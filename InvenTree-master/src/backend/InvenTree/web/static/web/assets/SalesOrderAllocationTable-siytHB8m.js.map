{"version":3,"file":"SalesOrderAllocationTable-siytHB8m.js","sources":["../../../../../../frontend/src/tables/sales/SalesOrderAllocationTable.tsx"],"sourcesContent":["import { t } from '@lingui/core/macro';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { ActionButton } from '@lib/components/ActionButton';\nimport {\n  type RowAction,\n  RowEditAction,\n  RowViewAction\n} from '@lib/components/RowActions';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { StockOperationProps } from '@lib/types/Forms';\nimport type { TableColumn } from '@lib/types/Tables';\nimport { Alert } from '@mantine/core';\nimport { IconCircleX, IconTruckDelivery } from '@tabler/icons-react';\nimport { useNavigate } from 'react-router-dom';\nimport { formatDate } from '../../defaults/formatters';\nimport { useSalesOrderAllocationFields } from '../../forms/SalesOrderForms';\nimport {\n  useBulkEditApiFormModal,\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { useStockAdjustActions } from '../../hooks/UseStockAdjustActions';\nimport { useTable } from '../../hooks/UseTable';\nimport { useUserState } from '../../states/UserState';\nimport {\n  DescriptionColumn,\n  LocationColumn,\n  PartColumn,\n  ReferenceColumn,\n  StatusColumn\n} from '../ColumnRenderers';\nimport { IncludeVariantsFilter, StockLocationFilter } from '../Filter';\nimport { InvenTreeTable } from '../InvenTreeTable';\n\nexport default function SalesOrderAllocationTable({\n  partId,\n  stockId,\n  orderId,\n  lineItemId,\n  shipmentId,\n  showPartInfo,\n  showOrderInfo,\n  allowEdit,\n  isSubTable,\n  modelTarget,\n  modelField\n}: Readonly<{\n  partId?: number;\n  stockId?: number;\n  orderId?: number;\n  lineItemId?: number;\n  shipmentId?: number;\n  showPartInfo?: boolean;\n  showOrderInfo?: boolean;\n  allowEdit?: boolean;\n  isSubTable?: boolean;\n  modelTarget?: ModelType;\n  modelField?: string;\n}>) {\n  const user = useUserState();\n  const navigate = useNavigate();\n\n  const tableId = useMemo(() => {\n    let id = 'salesorderallocations';\n\n    if (!!partId) {\n      id += '-part';\n    }\n\n    if (isSubTable) {\n      id += '-sub';\n    }\n\n    return id;\n  }, [partId, isSubTable]);\n\n  const table = useTable(tableId);\n\n  const tableFilters: TableFilter[] = useMemo(() => {\n    const filters: TableFilter[] = [\n      {\n        name: 'outstanding',\n        label: t`Outstanding`,\n        description: t`Show outstanding allocations`\n      },\n      {\n        name: 'assigned_to_shipment',\n        label: t`Assigned to Shipment`,\n        description: t`Show allocations assigned to a shipment`\n      },\n      StockLocationFilter()\n    ];\n\n    if (!!partId) {\n      filters.push(IncludeVariantsFilter());\n    }\n\n    return filters;\n  }, [partId]);\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    return [\n      ReferenceColumn({\n        accessor: 'order_detail.reference',\n        title: t`Sales Order`,\n        switchable: false,\n        sortable: true,\n        hidden: showOrderInfo != true\n      }),\n      DescriptionColumn({\n        accessor: 'order_detail.description',\n        hidden: showOrderInfo != true\n      }),\n      StatusColumn({\n        accessor: 'order_detail.status',\n        model: ModelType.salesorder,\n        title: t`Order Status`,\n        hidden: showOrderInfo != true\n      }),\n      PartColumn({\n        hidden: showPartInfo != true,\n        part: 'part_detail'\n      }),\n      DescriptionColumn({\n        accessor: 'part_detail.description',\n        hidden: showPartInfo != true\n      }),\n      {\n        accessor: 'part_detail.IPN',\n        title: t`IPN`,\n        hidden: showPartInfo != true,\n        sortable: true,\n        ordering: 'IPN'\n      },\n      {\n        accessor: 'serial',\n        title: t`Serial Number`,\n        sortable: true,\n        switchable: true,\n        render: (record: any) => record?.item_detail?.serial\n      },\n      {\n        accessor: 'batch',\n        title: t`Batch Code`,\n        sortable: true,\n        switchable: true,\n        render: (record: any) => record?.item_detail?.batch\n      },\n      {\n        accessor: 'available',\n        title: t`Available Quantity`,\n        sortable: false,\n        hidden: isSubTable,\n        render: (record: any) => record?.item_detail?.quantity\n      },\n      {\n        accessor: 'quantity',\n        title: t`Allocated Quantity`,\n        sortable: true\n      },\n      LocationColumn({\n        accessor: 'location_detail',\n        switchable: true,\n        sortable: true\n      }),\n      {\n        accessor: 'shipment_detail.reference',\n        title: t`Shipment`,\n        switchable: true,\n        sortable: false,\n        render: (record: any) => {\n          return record.shipment_detail?.reference ?? t`No shipment`;\n        }\n      },\n      {\n        accessor: 'shipment_date',\n        title: t`Shipment Date`,\n        switchable: true,\n        sortable: true,\n        render: (record: any) => {\n          if (record.shipment_detail?.shipment_date) {\n            return formatDate(record.shipment_detail.shipment_date);\n          } else if (record.shipment) {\n            return t`Not shipped`;\n          } else {\n            return t`No shipment`;\n          }\n        }\n      }\n    ];\n  }, [showOrderInfo, showPartInfo, isSubTable]);\n\n  const [selectedAllocation, setSelectedAllocation] = useState<number>(0);\n\n  const [selectedShipment, setSelectedShipment] = useState<any | null>(null);\n\n  const editAllocationFields = useSalesOrderAllocationFields({\n    orderId: orderId,\n    shipment: selectedShipment\n  });\n\n  const editAllocation = useEditApiFormModal({\n    url: ApiEndpoints.sales_order_allocation_list,\n    pk: selectedAllocation,\n    fields: editAllocationFields,\n    title: t`Edit Allocation`,\n    onFormSuccess: () => table.refreshTable()\n  });\n\n  const deleteAllocation = useDeleteApiFormModal({\n    url: ApiEndpoints.sales_order_allocation_list,\n    pk: selectedAllocation,\n    title: t`Remove Allocated Stock`,\n    preFormContent: (\n      <Alert color='red' title={t`Confirm Removal`}>\n        {t`Are you sure you want to remove this allocated stock from the order?`}\n      </Alert>\n    ),\n    submitText: t`Remove`,\n    onFormSuccess: () => table.refreshTable()\n  });\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      // Do not allow \"shipped\" items to be manipulated\n      const isShipped = !!record.shipment_detail?.shipment_date;\n\n      return [\n        RowEditAction({\n          tooltip: t`Edit Allocation`,\n          hidden:\n            isShipped ||\n            !allowEdit ||\n            !user.hasChangeRole(UserRoles.sales_order),\n          onClick: () => {\n            setSelectedAllocation(record.pk);\n            setSelectedShipment(record.shipment);\n            editAllocation.open();\n          }\n        }),\n        {\n          title: t`Remove`,\n          tooltip: t`Remove allocated stock`,\n          icon: <IconCircleX />,\n          color: 'red',\n          hidden:\n            isShipped ||\n            !allowEdit ||\n            !user.hasDeleteRole(UserRoles.sales_order),\n          onClick: () => {\n            setSelectedAllocation(record.pk);\n            deleteAllocation.open();\n          }\n        },\n        RowViewAction({\n          tooltip: t`View Shipment`,\n          title: t`View Shipment`,\n          hidden: !record.shipment || !!shipmentId,\n          modelId: record.shipment,\n          modelType: ModelType.salesordershipment,\n          navigate: navigate\n        })\n      ];\n    },\n    [allowEdit, shipmentId, user]\n  );\n\n  const stockOperationProps: StockOperationProps = useMemo(() => {\n    // Extract stock items from the selected records\n    // Note that the table is actually a list of SalesOrderAllocation instances,\n    // so we need to reconstruct the stock item details\n    const stockItems: any[] = table.selectedRecords\n      .filter((item: any) => !!item.item_detail)\n      .map((item: any) => {\n        return {\n          ...item.item_detail,\n          part_detail: item.part_detail,\n          location_detail: item.location_detail\n        };\n      });\n\n    return {\n      items: stockItems,\n      model: ModelType.stockitem,\n      refresh: table.refreshTable\n    };\n  }, [table.selectedRecords, table.refreshTable]);\n\n  const stockAdjustActions = useStockAdjustActions({\n    formProps: stockOperationProps,\n    merge: false,\n    assign: false,\n    delete: false,\n    add: false,\n    count: false,\n    remove: false\n  });\n\n  // A subset of the selected allocations, which can be assigned to a shipment\n  const nonShippedAllocationIds: number[] = useMemo(() => {\n    // Only allow allocations which have not been shipped\n    return (\n      table.selectedRecords?.filter((record) => {\n        return !record.shipment_detail?.shipment_date;\n      }) ?? []\n    ).map((record: any) => record.pk);\n  }, [table.selectedRecords]);\n\n  const setShipment = useBulkEditApiFormModal({\n    url: ApiEndpoints.sales_order_allocation_list,\n    items: nonShippedAllocationIds,\n    title: t`Assign to Shipment`,\n    fields: {\n      shipment: {\n        filters: {\n          order: orderId,\n          shipped: false\n        }\n      }\n    },\n    onFormSuccess: table.refreshTable\n  });\n\n  const tableActions = useMemo(() => {\n    return [\n      stockAdjustActions.dropdown,\n      <ActionButton\n        tooltip={t`Assign to shipment`}\n        icon={<IconTruckDelivery />}\n        onClick={() => {\n          setShipment.open();\n        }}\n        disabled={nonShippedAllocationIds.length == 0}\n        hidden={\n          !orderId || !allowEdit || !user.hasChangeRole(UserRoles.sales_order)\n        }\n        // TODO: Hide if order is already shipped\n      />\n    ];\n  }, [\n    allowEdit,\n    nonShippedAllocationIds,\n    orderId,\n    user,\n    stockAdjustActions.dropdown\n  ]);\n\n  return (\n    <>\n      {setShipment.modal}\n      {editAllocation.modal}\n      {deleteAllocation.modal}\n      {!isSubTable && stockAdjustActions.modals.map((modal) => modal.modal)}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.sales_order_allocation_list)}\n        tableState={table}\n        columns={tableColumns}\n        props={{\n          params: {\n            part_detail: showPartInfo ?? false,\n            order_detail: showOrderInfo ?? false,\n            item_detail: true,\n            location_detail: true,\n            line: lineItemId,\n            part: partId,\n            order: orderId,\n            shipment: shipmentId,\n            item: stockId\n          },\n          enableSearch: !isSubTable,\n          enableRefresh: !isSubTable,\n          enableColumnSwitching: !isSubTable,\n          enableFilters: !isSubTable,\n          enableDownload: !isSubTable,\n          enableSelection: !isSubTable,\n          minHeight: isSubTable ? 100 : undefined,\n          rowActions: rowActions,\n          tableActions: isSubTable ? undefined : tableActions,\n          tableFilters: tableFilters,\n          modelField: modelField ?? 'order',\n          enableReports: !isSubTable,\n          enableLabels: !isSubTable,\n          printingAccessor: 'item',\n          modelType: modelTarget ?? ModelType.salesorder\n        }}\n      />\n    </>\n  );\n}\n"],"names":["SalesOrderAllocationTable","partId","stockId","orderId","lineItemId","shipmentId","showPartInfo","showOrderInfo","allowEdit","isSubTable","modelTarget","modelField","user","useUserState","navigate","useNavigate","tableId","useMemo","id","table","useTable","tableFilters","filters","name","label","_i18n","_","description","StockLocationFilter","push","IncludeVariantsFilter","tableColumns","ReferenceColumn","accessor","title","switchable","sortable","hidden","DescriptionColumn","StatusColumn","model","ModelType","salesorder","PartColumn","part","ordering","render","record","item_detail","serial","batch","quantity","LocationColumn","shipment_detail","reference","shipment_date","formatDate","shipment","selectedAllocation","setSelectedAllocation","useState","selectedShipment","setSelectedShipment","editAllocationFields","useSalesOrderAllocationFields","editAllocation","useEditApiFormModal","url","ApiEndpoints","sales_order_allocation_list","pk","fields","onFormSuccess","refreshTable","deleteAllocation","useDeleteApiFormModal","preFormContent","jsx","Alert","submitText","rowActions","useCallback","isShipped","RowEditAction","tooltip","hasChangeRole","UserRoles","sales_order","onClick","open","icon","IconCircleX","color","hasDeleteRole","RowViewAction","modelId","modelType","salesordershipment","stockOperationProps","items","selectedRecords","filter","item","map","part_detail","location_detail","stockitem","refresh","stockAdjustActions","useStockAdjustActions","formProps","merge","assign","delete","add","count","remove","nonShippedAllocationIds","setShipment","useBulkEditApiFormModal","order","shipped","tableActions","dropdown","ActionButton","IconTruckDelivery","length","jsxs","Fragment","modal","modals","InvenTreeTable","apiUrl","params","order_detail","line","enableSearch","enableRefresh","enableColumnSwitching","enableFilters","enableDownload","enableSelection","minHeight","undefined","enableReports","enableLabels","printingAccessor"],"mappings":"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"}