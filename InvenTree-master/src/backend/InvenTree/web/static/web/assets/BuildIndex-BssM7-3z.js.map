{"version":3,"file":"BuildIndex-BssM7-3z.js","sources":["../../../../../../frontend/src/tables/build/BuildOrderParametricTable.tsx","../../../../../../frontend/src/pages/build/BuildIndex.tsx"],"sourcesContent":["import { ApiEndpoints, ModelType } from '@lib/index';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { TableColumn } from '@lib/types/Tables';\nimport { type ReactNode, useMemo } from 'react';\nimport { DescriptionColumn, ReferenceColumn } from '../ColumnRenderers';\nimport { OrderStatusFilter, OutstandingFilter } from '../Filter';\nimport ParametricDataTable from '../general/ParametricDataTable';\n\nexport default function BuildOrderParametricTable({\n  queryParams\n}: {\n  queryParams?: Record<string, any>;\n}): ReactNode {\n  const customColumns: TableColumn[] = useMemo(() => {\n    return [\n      ReferenceColumn({\n        switchable: false\n      }),\n      DescriptionColumn({\n        accessor: 'title'\n      })\n    ];\n  }, []);\n\n  const customFilters: TableFilter[] = useMemo(() => {\n    return [OutstandingFilter(), OrderStatusFilter({ model: ModelType.build })];\n  }, []);\n\n  return (\n    <ParametricDataTable\n      modelType={ModelType.build}\n      endpoint={ApiEndpoints.build_order_list}\n      customColumns={customColumns}\n      customFilters={customFilters}\n      queryParams={{\n        ...queryParams\n      }}\n    />\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Stack } from '@mantine/core';\nimport {\n  IconCalendar,\n  IconListDetails,\n  IconTable,\n  IconTools\n} from '@tabler/icons-react';\nimport { useMemo } from 'react';\n\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport type { TableFilter } from '@lib/types/Filters';\nimport { useLocalStorage } from '@mantine/hooks';\nimport OrderCalendar from '../../components/calendar/OrderCalendar';\nimport PermissionDenied from '../../components/errors/PermissionDenied';\nimport { PageDetail } from '../../components/nav/PageDetail';\nimport type { PanelType } from '../../components/panels/Panel';\nimport { PanelGroup } from '../../components/panels/PanelGroup';\nimport SegmentedControlPanel from '../../components/panels/SegmentedControlPanel';\nimport { useGlobalSettingsState } from '../../states/SettingsStates';\nimport { useUserState } from '../../states/UserState';\nimport { PartCategoryFilter } from '../../tables/Filter';\nimport BuildOrderParametricTable from '../../tables/build/BuildOrderParametricTable';\nimport { BuildOrderTable } from '../../tables/build/BuildOrderTable';\n\nfunction BuildOrderCalendar() {\n  const globalSettings = useGlobalSettingsState();\n\n  const calendarFilters: TableFilter[] = useMemo(() => {\n    return [\n      {\n        name: 'external',\n        label: t`External`,\n        description: t`Show external build orders`,\n        active: globalSettings.isSet('BUILDORDER_EXTERNAL_BUILDS')\n      },\n      PartCategoryFilter()\n    ];\n  }, [globalSettings]);\n\n  return (\n    <OrderCalendar\n      model={ModelType.build}\n      role={UserRoles.build}\n      params={{ outstanding: true }}\n      filters={calendarFilters}\n    />\n  );\n}\n\n/**\n * Build Order index page\n */\nexport default function BuildIndex() {\n  const user = useUserState();\n\n  const [buildOrderView, setBuildOrderView] = useLocalStorage<string>({\n    key: 'build-order-view',\n    defaultValue: 'table'\n  });\n\n  const panels: PanelType[] = useMemo(() => {\n    return [\n      SegmentedControlPanel({\n        name: 'buildorder',\n        label: t`Build Orders`,\n        icon: <IconTools />,\n        selection: buildOrderView,\n        onChange: setBuildOrderView,\n        options: [\n          {\n            value: 'table',\n            label: t`Table View`,\n            icon: <IconTable />,\n            content: <BuildOrderTable />\n          },\n          {\n            value: 'calendar',\n            label: t`Calendar View`,\n            icon: <IconCalendar />,\n            content: <BuildOrderCalendar />\n          },\n          {\n            value: 'parametric',\n            label: t`Parametric View`,\n            icon: <IconListDetails />,\n            content: <BuildOrderParametricTable />\n          }\n        ]\n      })\n    ];\n  }, [user, buildOrderView]);\n\n  if (!user.isLoggedIn() || !user.hasViewRole(UserRoles.build)) {\n    return <PermissionDenied />;\n  }\n\n  return (\n    <Stack>\n      <PageDetail title={t`Manufacturing`} actions={[]} />\n      <PanelGroup\n        pageKey='build-index'\n        panels={panels}\n        model='manufacturing'\n        id={null}\n      />\n    </Stack>\n  );\n}\n"],"names":["BuildOrderParametricTable","queryParams","customColumns","useMemo","ReferenceColumn","switchable","DescriptionColumn","accessor","customFilters","OutstandingFilter","OrderStatusFilter","model","ModelType","build","jsx","ParametricDataTable","ApiEndpoints","build_order_list","BuildOrderCalendar","globalSettings","useGlobalSettingsState","calendarFilters","name","label","_i18n","_","id","description","active","isSet","PartCategoryFilter","OrderCalendar","UserRoles","outstanding","BuildIndex","user","useUserState","buildOrderView","setBuildOrderView","useLocalStorage","key","defaultValue","panels","SegmentedControlPanel","icon","IconTools","selection","onChange","options","value","IconTable","content","BuildOrderTable","IconCalendar","IconListDetails","isLoggedIn","hasViewRole","PermissionDenied","Stack","PageDetail","PanelGroup"],"mappings":"qyCAQA,SAAwBA,EAA0B,CAChDC,YAAAA,CAGF,EAAc,CACZ,MAAMC,EAA+BC,EAAAA,QAAQ,IACpC,CACLC,EAAgB,CACdC,WAAY,EAAA,CACb,EACDC,EAAkB,CAChBC,SAAU,OAAA,CACX,CAAC,EAEH,CAAA,CAAE,EAECC,EAA+BL,EAAAA,QAAQ,IACpC,CAACM,EAAAA,EAAqBC,EAAkB,CAAEC,MAAOC,EAAUC,KAAAA,CAAO,CAAC,EACzE,CAAA,CAAE,EAEL,OACEC,MAACC,EAAA,CACC,UAAWH,EAAUC,MACrB,SAAUG,EAAaC,iBACvB,cAAAf,EACA,cAAAM,EACA,YAAa,CACX,GAAGP,CAAAA,EACH,CAGR,CCbA,SAASiB,GAAqB,CAC5B,MAAMC,EAAiBC,EAAAA,EAEjBC,EAAiClB,EAAAA,QAAQ,IACtC,CACL,CACEmB,KAAM,WACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAU,EACjBC,YAAWH,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAA4B,EACzCE,OAAQT,EAAeU,MAAM,4BAA4B,CAAA,EAE3DC,GAAoB,EAErB,CAACX,CAAc,CAAC,EAEnB,OACEL,EAAAA,IAACiB,GACC,MAAOnB,EAAUC,MACjB,KAAMmB,EAAUnB,MAChB,OAAQ,CAAEoB,YAAa,EAAA,EACvB,QAASZ,EAAgB,CAG/B,CAKA,SAAwBa,IAAa,CACnC,MAAMC,EAAOC,EAAAA,EAEP,CAACC,EAAgBC,CAAiB,EAAIC,EAAwB,CAClEC,IAAK,mBACLC,aAAc,OAAA,CACf,EAEKC,EAAsBvC,EAAAA,QAAQ,IAC3B,CACLwC,EAAsB,CACpBrB,KAAM,aACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAc,EACrBkB,WAAOC,EAAA,EAAS,EAChBC,UAAWT,EACXU,SAAUT,EACVU,QAAS,CACP,CACEC,MAAO,QACP1B,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAY,EACnBkB,WAAOM,EAAA,EAAS,EAChBC,cAAUC,EAAA,CAAA,CAAe,CAAA,EAE3B,CACEH,MAAO,WACP1B,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAe,EACtBkB,WAAOS,EAAA,EAAY,EACnBF,cAAUjC,EAAA,CAAA,CAAkB,CAAA,EAE9B,CACE+B,MAAO,aACP1B,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAiB,EACxBkB,WAAOU,EAAA,EAAe,EACtBH,cAAUnD,EAAA,CAAA,CAAyB,CAAA,CACpC,CAAA,CAEJ,CAAC,EAEH,CAACmC,EAAME,CAAc,CAAC,EAEzB,MAAI,CAACF,EAAKoB,cAAgB,CAACpB,EAAKqB,YAAYxB,EAAUnB,KAAK,QACjD4C,EAAA,EAAgB,SAIvBC,EAAA,CACC,SAAA,CAAA5C,EAAAA,IAAC6C,EAAA,CAAW,MAAMnC,EAAAC,EAAC,CAAAC,GAAA,QAAA,CAAe,EAAG,QAAS,CAAA,EAAG,EACjDZ,MAAC8C,GACC,QAAQ,cACR,OAAAlB,EACA,MAAM,gBACN,GAAI,IAAA,CAAK,CAAA,EAEb,CAEJ"}