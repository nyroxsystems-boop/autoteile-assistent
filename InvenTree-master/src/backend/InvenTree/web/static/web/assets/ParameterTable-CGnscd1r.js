import{ag as I,r as i,j as a,ab as e,bb as w,ao as d,an as N}from"./index-Db7AGPIq.js";import{f as R,T as q,U as B,a as D,b as E,c as G,I as S}from"./Filter-BgnAqEQC.js";import{Y as W}from"./YesNoButton-BaVgP5u9.js";import{u as Y,A as K,R as O,a as T,I as $}from"./InvenTreeTable-DmN557zY.js";import{d as y,I as z}from"./ImporterForms-D2fp0CPO.js";import{u as A}from"./CommonForms-DKQecQmS.js";import{D as H,N as J,a as L,U as Z}from"./ColumnRenderers-BUH0stTX.js";import{W as Q}from"./ThemeContext-CxdCkKtz.js";function re({modelType:s,modelId:r,allowEdit:n=!0}){const l=Y("parameters"),o=I(),F=i.useMemo(()=>[{accessor:"template_detail.name",switchable:!1,sortable:!0,ordering:"name"},H({accessor:"template_detail.description"}),{accessor:"data",switchable:!1,sortable:!0,render:t=>{const c=t.template_detail;if(c?.checkbox)return a.jsx(W,{value:t.data});const C=[];if(c.units&&t.data_numeric&&t.data_numeric!=t.data){const U=R(t.data_numeric,{digits:15});C.push(`${U} [${c.units}]`)}return a.jsx(q,{value:t.data,extra:C,title:e._({id:"Y0ne3N"})})}},{accessor:"template_detail.units",ordering:"units",sortable:!0},J({}),L({accessor:"updated",title:e._({id:"K7P0jz"}),sortable:!0,switchable:!0}),Z({accessor:"updated_by_detail",ordering:"updated_by",title:e._({id:"oaG7jU"})})],[o]),P=i.useMemo(()=>[{name:"enabled",label:"Enabled",description:e._({id:"MRUq1d"}),type:"boolean"},B({name:"updated_by",label:e._({id:"oaG7jU"}),description:e._({id:"e4nDbe"})})],[]),[p,m]=i.useState(void 0),[v,u]=i.useState(!1),[_,b]=i.useState(void 0),k=i.useMemo(()=>{const t=y({modelType:w.parameter});return t.field_overrides.value={model_type:s,model_id:r},t},[s,r]),f=D({url:d.import_session_list,title:e._({id:"IAi3JI"}),fields:k,onFormSuccess:t=>{b(t.pk),u(!0)}}),j=D({url:d.parameter_list,title:e._({id:"WrK5aa"}),fields:A({modelType:s,modelId:r}),initialData:{data:""},table:l}),h=E({url:d.parameter_list,pk:p?.pk,title:e._({id:"FDjidN"}),fields:A({modelType:s,modelId:r}),table:l}),x=G({url:d.parameter_list,pk:p?.pk,title:e._({id:"qSo+g1"}),table:l}),M=i.useMemo(()=>[a.jsx(K,{tooltip:e._({id:"2ZgBWs"}),position:"bottom-start",icon:a.jsx(S,{}),hidden:!o.hasAddPermission(s),actions:[{name:e._({id:"cejL7M"}),icon:a.jsx(S,{}),tooltip:e._({id:"is9ECr"}),onClick:()=>{m(void 0),j.open()}},{name:e._({id:"abGM9h"}),icon:a.jsx(Q,{}),tooltip:e._({id:"fF3Ns5"}),onClick:()=>{f.open()}}]},"add-parameter-actions")],[n,o]),g=i.useCallback(t=>[O({tooltip:e._({id:"FDjidN"}),onClick:()=>{m(t),h.open()},hidden:!o.hasChangePermission(s)}),T({tooltip:e._({id:"qSo+g1"}),onClick:()=>{m(t),x.open()},hidden:!o.hasDeletePermission(s)})],[o]);return a.jsxs(a.Fragment,{children:[j.modal,h.modal,x.modal,f.modal,a.jsx($,{url:N(d.parameter_list),tableState:l,columns:F,props:{enableDownload:!0,enableBulkDelete:n!=!1,enableSelection:n!=!1,rowActions:n==!1?void 0:g,tableActions:n==!1?void 0:M,tableFilters:P,params:{model_type:s,model_id:r}}}),a.jsx(z,{sessionId:_??-1,opened:_!==void 0&&v,onClose:()=>{b(void 0),u(!1),l.refreshTable()}})]})}export{re as P};
//# sourceMappingURL=ParameterTable-CGnscd1r.js.map
