import{K as b,ag as g,r as n,ab as o,j as c,an as I}from"./index-Db7AGPIq.js";import{a as R,b as D,c as L,d as F}from"./Filter-BgnAqEQC.js";import{u as M,R as v,d as j,a as E,I as q}from"./InvenTreeTable-DmN557zY.js";import{b as A}from"./formatters-B4ehJgEk.js";import{e as x}from"./CommonForms-DKQecQmS.js";import{D as K,c as N,b as T,N as W,L as U}from"./ColumnRenderers-BUH0stTX.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M12 16l4 -4l-4 -4",key:"svg-0"}],["path",{d:"M8 12h8",key:"svg-1"}],["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-2"}]],G=b("outline","square-arrow-right","SquareArrowRight",z);function H({endpoint:i,orderId:m,orderDetailRefresh:l,currency:y,editable:t,role:s}){const r=M("extra-line-item"),a=g(),_=n.useMemo(()=>[{accessor:"reference",switchable:!1},K({}),N({accessor:"quantity",switchable:!1}),{accessor:"price",title:o._({id:"vWelsN"}),render:e=>A(e.price,{currency:e.price_currency})},{accessor:"total_price",title:o._({id:"KyZVKD"}),render:e=>A(e.price,{currency:e.price_currency,multiplier:e.quantity})},T({}),W({accessor:"notes"}),U({accessor:"link"})],[]),[f,p]=n.useState({}),[d,h]=n.useState(0),u=R({url:i,title:o._({id:"pwb7Yo"}),fields:x(),initialData:{...f,price_currency:y},onFormSuccess:l,table:r}),C=D({url:i,pk:d,title:o._({id:"vgosWS"}),fields:x(),onFormSuccess:l,table:r}),k=L({url:i,pk:d,title:o._({id:"tpKh8C"}),onFormSuccess:l,table:r}),w=n.useCallback(e=>[v({hidden:!t||!a.hasChangeRole(s),onClick:()=>{h(e.pk),C.open()}}),j({hidden:!t||!a.hasAddRole(s),onClick:()=>{p({...e}),u.open()}}),E({hidden:!t||!a.hasDeleteRole(s),onClick:()=>{h(e.pk),k.open()}})],[t,a,s]),S=n.useMemo(()=>[c.jsx(F,{tooltip:o._({id:"xnxWkO"}),hidden:!t||!a.hasAddRole(s),onClick:()=>{p({order:m}),u.open()}},"add-line-item")],[t,a,s]);return c.jsxs(c.Fragment,{children:[u.modal,C.modal,k.modal,c.jsx(q,{tableState:r,url:I(i),columns:_,props:{params:{order:m},rowActions:w,tableActions:S}})]})}export{H as E,G as I};
//# sourceMappingURL=ExtraLineItemTable-DMf1CJ9x.js.map
