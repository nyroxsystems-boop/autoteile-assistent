import{r as l,j as e,S as R,ak as d,d as r,c as h,N as _,bf as f,aa as g,ab as i,O as T,a7 as k,bE as b,e as v,an as E,ao as S}from"./index-Db7AGPIq.js";import{I as y}from"./IconReload-Dd-yxDaM.js";function I({roles:x,editable:a=!1}){const[o,j]=l.useState(x);l.useEffect(()=>{j(x)},[x]);const p=l.useMemo(()=>o.some(s=>s.edited),[o]),m=l.useMemo(()=>o.sort((s,n)=>s.label>n.label?1:-1),[o]),u=l.useCallback((s,n)=>{a&&j(t=>t.map(c=>c.pk===s.pk?{...c,[n]:!c[n],edited:!0}:c))},[a]),w=async s=>{if(a){b.show({id:"group-roles-update",title:i._({id:"JL3si7"}),message:i._({id:"OEgtiW"}),loading:!0,color:"blue",autoClose:!1});for(const n of s.filter(t=>t.edited))await v.patch(E(S.ruleset_list,n.pk),{can_view:n.can_view,can_add:n.can_add,can_change:n.can_change,can_delete:n.can_delete}).then(()=>{j(t=>t.map(c=>c.pk===n.pk?{...c,edited:!1}:c))}).catch(t=>{console.error(t)});b.update({id:"group-roles-update",title:i._({id:"+b7T3G"}),message:i._({id:"5IF67l"}),autoClose:2e3,color:"green",icon:e.jsx(k,{}),loading:!1})}};return e.jsx(e.Fragment,{children:e.jsxs(R,{gap:"xs",children:[e.jsxs(d,{striped:!0,withColumnBorders:!0,withRowBorders:!0,withTableBorder:!0,children:[e.jsx(d.Thead,{children:e.jsxs(d.Tr,{children:[e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"GDvlUT"})})}),e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"jpctdh"})})}),e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"o+XJ9D"})})}),e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"m16xKo"})})}),e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"cnGeoo"})})})]})}),e.jsx(d.Tbody,{children:m.map(s=>e.jsxs(d.Tr,{children:[e.jsx(d.Td,{children:e.jsxs(_,{gap:"xs",children:[e.jsx(r,{children:s.label}),s.edited&&e.jsx(r,{children:"*"})]})}),e.jsx(d.Td,{children:e.jsx(f,{disabled:!a,checked:s.can_view,onChange:()=>u(s,"can_view")})}),e.jsx(d.Td,{children:e.jsx(f,{disabled:!a,checked:s.can_change,onChange:()=>u(s,"can_change")})}),e.jsx(d.Td,{children:e.jsx(f,{disabled:!a,checked:s.can_add,onChange:()=>u(s,"can_add")})}),e.jsx(d.Td,{children:e.jsx(f,{disabled:!a,checked:s.can_delete,onChange:()=>u(s,"can_delete")})})]},s.pk??s.name))})]}),a&&e.jsxs(_,{justify:"right",children:[e.jsx(g,{label:i._({id:"Jyesik"}),disabled:!p,children:e.jsx(T,{color:"red",onClick:()=>{j(x)},disabled:!p,leftSection:e.jsx(y,{}),children:i._({id:"OfhWJH"})})}),e.jsx(g,{label:i._({id:"56Yn4L"}),disabled:!p,children:e.jsx(T,{color:"green",onClick:()=>{w(o)},disabled:!p,leftSection:e.jsx(k,{}),children:i._({id:"tfDRzk"})})})]})]})})}export{I as R};
//# sourceMappingURL=RoleTable-nBfg8RVD.js.map
