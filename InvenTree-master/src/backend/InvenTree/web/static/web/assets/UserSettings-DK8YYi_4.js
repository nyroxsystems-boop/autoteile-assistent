const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PluginSettingsGroup-Hi2wSZqP.js","./index-Db7AGPIq.js","./index-D_EMA6Ox.css","./SettingList-Bc72M5k9.js","./ThemeContext-CxdCkKtz.js","./DesktopAppView-BuH2j218.js","./Filter-BgnAqEQC.js","./ActionButton-Cv5j5I5R.js","./Filter-DfJkRRGL.css","./UseInstance-BPJQEWDW.js"])))=>i.map(i=>d[i]);
import{K as pe,ah as X,a as F,r as l,bZ as M,b_ as Ae,e as A,an as T,ao as g,av as v,ab as s,j as e,ak as n,N as C,O as f,c as o,b7 as ne,aq as b,S as p,aa as Ie,U as z,aj as L,a8 as P,bd as $,$ as Pe,d as te,b$ as H,c0 as Oe,a7 as B,q as ke,ag as le,as as S,c1 as J,am as G,ay as we,by as U,ac as ie,aE as Me,c2 as Le,ad as He,u as Fe,b as fe,c3 as Ne,c4 as De,c5 as de,c6 as We,c7 as ue,aw as Ve,c8 as ge,L as Ue,b4 as ze,_ as Be}from"./index-Db7AGPIq.js";import{P as qe}from"./PageTitle-B4iaHXKM.js";import{U as ee,S as Ke}from"./SettingList-Bc72M5k9.js";import{P as Qe}from"./PanelGroup-Bif3iIGQ.js";import{v as q,S as y,r as Ye,ap as Ge,x as Je,y as Xe,a as $e,aB as he,am as Ze,X as es,w as ss}from"./ThemeContext-CxdCkKtz.js";import{A as ts}from"./ApiTokenTable-DJd_LRYP.js";import{Q as is}from"./QrRegistrationForm-BOw4prsR.js";import{I}from"./IconAlertCircle-DEV3UHRn.js";import{I as as}from"./IconAt-rYwKGkPn.js";import{A as ns}from"./ActionButton-Cv5j5I5R.js";import{a as se}from"./YesNoButton-BaVgP5u9.js";import{A as ls}from"./InvenTreeTable-DmN557zY.js";import{b as xe}from"./Filter-BgnAqEQC.js";import{I as rs,a as os}from"./IconUserCircle-CICiZPp2.js";import{L as cs,C as ds}from"./LanguageSelect-DFoTUXf2.js";import{I as us,a as hs}from"./IconFileAnalytics-C-Z37aQE.js";import{I as xs}from"./IconPlugConnected-DCM5QR4X.js";import"./DesktopAppView-BuH2j218.js";import"./PluginUIFeature-DCu8wTdG.js";import"./RemoteComponent-uZoHDwds.js";import"./ColumnRenderers-BUH0stTX.js";import"./index-DRtKJP-e.js";import"./formatters-B4ehJgEk.js";import"./QRCode-BaIEIQ2d.js";import"./browser-DSycY7kT.js";import"./IconChevronDown-CzbIU38Y.js";import"./IconDotsVertical-D8D3XsjG.js";import"./IconTags-DnGx22aA.js";import"./IconSun-DtEUHkRS.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z",key:"svg-0"}],["path",{d:"M7 20h10",key:"svg-1"}],["path",{d:"M9 16v4",key:"svg-2"}],["path",{d:"M15 16v4",key:"svg-3"}]],_s=pe("outline","device-desktop","DeviceDesktop",js);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M3.06 13a9 9 0 1 0 .49 -4.087",key:"svg-0"}],["path",{d:"M3 4.001v5h5",key:"svg-1"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]],je=pe("outline","restore","Restore",ms);function K(t){const i=t.response?.data?.data?.flows??[];return i.find(r=>r.id==M.MfaReauthenticate)?M.MfaReauthenticate:i.find(r=>r.id==M.Reauthenticate)?M.Reauthenticate:null}function O(t,i){const r=`${i}: ${t.status}`;return t.response?.data?.errors&&t.response?.data?.errors.length>0?t.response?.data?.errors[0]?.message??r:r}function ps({inputProps:t,setOpen:i}){const{setAuthContext:r}=X.getState(),[c,x]=l.useState(""),[h,m]=l.useState(""),j=l.useCallback(d=>{A.post(t.url,{[t.name]:d}).then(a=>{r(a.data?.data),v({title:s._({id:"0Jg7OJ"}),message:s._({id:"9ot5jN"}),color:"green",icon:e.jsx(B,{})}),i(!1)}).catch(a=>{m(O(a,s._({id:"iINlzl"}))),v({title:s._({id:"+3hNzn"}),message:`${s._({id:"Ka8LiH"})}: ${a.status}`,color:"red",icon:e.jsx(P,{})})})},[t]);return e.jsxs(p,{children:[e.jsx(L,{}),e.jsx(b,{color:"yellow",icon:e.jsx(P,{}),title:s._({id:"ANppow"}),children:s._({id:"n724Q9"})}),e.jsx(Oe,{required:!0,label:t.label,name:t.name,description:t.description,value:c,error:h,onChange:d=>x(d.target.value)}),e.jsxs(C,{justify:"right",children:[e.jsx(f,{onClick:()=>i(!1),color:"red",children:e.jsx(o,{id:"dEgA5A"})}),e.jsx(f,{onClick:()=>j(c),color:"green",children:e.jsx(o,{id:"hQRttt"})})]})]})}function Ce({inputProps:t,opened:i,setOpen:r}){return e.jsx(z,{opened:i,zIndex:9999,size:"lg",onClose:()=>r(!1),title:e.jsx(y,{size:"lg",children:s._({id:"ANppow"})}),children:e.jsx(ps,{inputProps:t,setOpen:r})})}function fs({opened:t,setOpen:i}){return e.jsx(Ce,{opened:t,setOpen:i,inputProps:{label:s._({id:"8ZsakT"}),name:"password",description:s._({id:"NgaR6B"}),url:T(g.auth_reauthenticate)}})}function gs({opened:t,setOpen:i}){return e.jsx(Ce,{opened:t,setOpen:i,inputProps:{label:s._({id:"e4JDhv"}),name:"code",description:s._({id:"6k8yzX"}),url:T(g.auth_mfa_reauthenticate)}})}function Cs({tokenId:t,opened:i,setOpen:r,onReauthFlow:c,onSuccess:x}){const[h,m]=l.useState(!1),[j,d]=l.useState("");l.useEffect(()=>{m(!1),d("")},[i]);const a=l.useCallback(()=>{m(!0),t&&H(T(g.auth_webauthn),{timeout:30*1e3},"delete",{authenticators:[t]}).then(_=>{v({title:s._({id:"2lRMws"}),message:s._({id:"zOOUxI"}),color:"green",icon:e.jsx(B,{})}),r(!1),x()}).catch(_=>{if(d(O(_,s._({id:"rwlTj5"}))),_.status===401){const E=K(_);E!==null&&c(E)}}).finally(()=>{m(!1)})},[t]);return e.jsx(z,{opened:i,onClose:()=>r(!1),title:e.jsx(y,{size:"lg",children:s._({id:"qgUus1"})}),children:e.jsxs(p,{children:[e.jsx(L,{}),e.jsx(b,{color:"red",icon:e.jsx(I,{}),title:s._({id:"f/P5VY"}),children:e.jsx(o,{id:"uWJ30f"})}),j&&e.jsx(b,{color:"red",icon:e.jsx(P,{}),title:s._({id:"SlfejT"}),children:j}),e.jsxs(C,{justify:"right",children:[e.jsx(f,{onClick:()=>r(!1),children:e.jsx(o,{id:"dEgA5A"})}),e.jsx(f,{onClick:a,color:"red",disabled:h,children:e.jsx(o,{id:"t/YqKh"})})]})]})})}function Es({opened:t,setOpen:i,onReauthFlow:r,onSuccess:c}){const[x,h]=l.useState(!1),[m,j]=l.useState("");l.useEffect(()=>{h(!1),j("")},[t]);const d=l.useCallback(()=>{h(!0),A.delete(T(g.auth_totp),{timeout:30*1e3}).then(a=>(v({title:s._({id:"LgPqDZ"}),message:s._({id:"w/736Z"}),color:"green",icon:e.jsx(B,{})}),i(!1),c(),a.data)).catch(a=>{if(j(O(a,s._({id:"BPDcd5"}))),a.status===401){const _=K(a);_!==null&&r(_)}}).finally(()=>{h(!1)})},[]);return e.jsx(z,{opened:t,onClose:()=>i(!1),title:e.jsx(y,{size:"lg",children:s._({id:"SIMFxR"})}),children:e.jsxs(p,{children:[e.jsx(L,{}),e.jsx(b,{color:"red",icon:e.jsx(I,{}),title:s._({id:"f/P5VY"}),children:e.jsx(o,{id:"vyF0pt"})}),m&&e.jsx(b,{color:"red",icon:e.jsx(P,{}),title:s._({id:"SlfejT"}),children:m}),e.jsxs(C,{justify:"right",children:[e.jsx(f,{onClick:()=>i(!1),children:e.jsx(o,{id:"dEgA5A"})}),e.jsx(f,{onClick:d,color:"red",disabled:x,children:e.jsx(o,{id:"t/YqKh"})})]})]})})}function Ss({opened:t,setOpen:i,onReauthFlow:r,onSuccess:c}){const[x,h]=l.useState(""),[m,j]=l.useState(""),[d,a]=l.useState(""),[_,E]=l.useState(""),[N,D]=l.useState(!1),Q=q({enabled:!1,queryKey:["mfa-totp-registration"],queryFn:async()=>(h(""),j(""),A.get(T(g.auth_totp)).then(R=>(i(!1),v({title:s._({id:"E3K+mh"}),message:s._({id:"MYlPMV"}),color:"green"}),{})).catch(R=>{switch(R.status){case 404:h(R.response?.data?.meta?.totp_url??""),j(R.response?.data?.meta?.secret??"");break;default:throw v({title:s._({id:"84UHPV"}),message:s._({id:"WFph16"}),color:"red"}),R}return null}))});l.useEffect(()=>{h(""),j(""),a(""),E(""),D(!1),t&&Q.refetch()},[t]);const Z=l.useCallback(R=>{D(!0),E(""),A.post(T(g.auth_totp),{code:R},{timeout:30*1e3}).then(k=>{v({title:s._({id:"88xtVn"}),message:s._({id:"FnnGiS"}),color:"green",icon:e.jsx(B,{})}),i(!1),c()}).catch(k=>{if(E(O(k,s._({id:"cthRSh"}))),k.status===401){const W=K(k);W!==null&&r(W)}}).finally(()=>{D(!1)})},[]);return e.jsx(z,{opened:t,onClose:()=>i(!1),title:e.jsx(y,{size:"lg",children:s._({id:"/CUha+"})}),children:e.jsxs(p,{children:[e.jsx(is,{url:x,secret:m,value:d,error:_,setValue:a}),e.jsx(f,{fullWidth:!0,onClick:()=>{Z(d)},disabled:N,children:e.jsx(o,{id:"hQRttt"})})]})})}function ys({opened:t,setOpen:i,onReauthFlow:r}){const[c,x]=l.useState(""),h=q({enabled:!1,queryKey:["mfa-recovery-codes"],queryFn:async()=>A.post(T(g.auth_recovery),void 0,{timeout:30*1e3}).catch(j=>{if(x(O(j,s._({id:"yXT+Fy"}))),j.status===401){const d=K(j);d!==null&&(i(!1),r(d))}else ke.cancelQueries({queryKey:["mfa-recovery-codes"]});throw j})}),m=l.useMemo(()=>h.data?.data?.data?.unused_codes??[],[h.data]);return l.useEffect(()=>{x(""),t&&h.refetch()},[t]),e.jsx(z,{opened:t,onClose:()=>i(!1),title:e.jsx(y,{size:"lg",children:s._({id:"QgQV6q"})}),children:e.jsxs(p,{children:[e.jsx(L,{}),c&&e.jsx(b,{color:"red",icon:e.jsx(P,{}),title:s._({id:"SlfejT"}),children:c}),h.isFetching||h.isLoading?e.jsx($,{}):m.length>0?e.jsxs(p,{gap:"xs",children:[e.jsx(b,{color:"blue",icon:e.jsx(Ye,{}),title:s._({id:"QgQV6q"}),children:e.jsx(o,{id:"eJyuNa"})}),e.jsx(Pe,{p:"sm",withBorder:!0,children:e.jsxs(p,{gap:"xs",children:[m.map(j=>e.jsx(C,{p:3,justify:"space-between",children:e.jsx(te,{children:j})},`mfa-recovery-code-${j}`)),e.jsx(L,{}),e.jsxs(C,{justify:"space-between",children:[e.jsx(o,{id:"1n/RH0"}),e.jsx(Ge,{value:m.join(`
`)})]})]})})]}):e.jsx(b,{color:"yellow",icon:e.jsx(I,{}),title:s._({id:"Q9yL3w"}),children:e.jsx(o,{id:"JkQqC1"})}),e.jsx(L,{}),e.jsx(C,{justify:"right",children:e.jsx(f,{onClick:()=>i(!1),children:e.jsx(o,{id:"yz7wBu"})})})]})})}function Ts(){const[t]=X(F(u=>[u.auth_config])),{isLoading:i,data:r,refetch:c}=q({queryKey:["mfa-list"],queryFn:()=>A.get(T(g.auth_authenticators)).then(u=>u?.data?.data??[]).catch(()=>[])}),x=l.useMemo(()=>i||!r?[]:r.map(u=>u.type),[i,r]),[h,m]=l.useState(null),[j,d]=l.useState(!1),[a,_]=l.useState(!1),[E,N]=l.useState(!1),[D,Q]=l.useState(!1),[Z,R]=l.useState(!1),[k,W]=l.useState(!1),V=l.useCallback(u=>{switch(u){case M.Reauthenticate:_(!0);break;case M.MfaReauthenticate:N(!0);break}},[]),Ee=l.useCallback(()=>{d(!0)},[]),Se=l.useCallback(u=>{Ae({publicKey:PublicKeyCredential.parseCreationOptionsFromJSON(u)}).then(w=>{const Y=JSON.stringify(w);A.post(T(g.auth_webauthn),{name:"Master Key",credential:Y},{timeout:30*1e3}).then(ce=>{v({title:s._({id:"gUKg8e"}),message:s._({id:"BOJsPE"}),color:"green",icon:e.jsx(B,{})}),c()}).catch(ce=>{const Re=O(ce,s._({id:"GyKqxW"}));v({title:s._({id:"9GWPJ6"}),message:`${s._({id:"XDOG5s"})}: ${Re}`,color:"red",icon:e.jsx(P,{})})})})},[]),ye=l.useCallback(()=>{A.get(T(g.auth_webauthn)).then(u=>{const w=u.data?.data?.creation_options;return w&&Se(w.publicKey),u.data}).catch(u=>{const w=O(u,s._({id:"2tgegi"}));if(u.status===401){const Y=K(u);Y!==null&&V(Y)}else v({title:s._({id:"SlfejT"}),message:w,color:"red",icon:e.jsx(P,{})});throw u})},[]),Te=l.useCallback(()=>{R(!0)},[]),be=l.useCallback(()=>{d(!0)},[]),ve=l.useCallback(u=>{m(u),W(!0)},[]),re=l.useMemo(()=>[{type:"totp",name:s._({id:"Kvajkr"}),description:s._({id:"JIT9Ku"}),function:()=>Q(!0),used:x?.includes("totp")},{type:"recovery_codes",name:s._({id:"QgQV6q"}),description:s._({id:"jw8/rF"}),function:Ee,used:x?.includes("recovery_codes")},{type:"webauthn",name:s._({id:"yPYwbP"}),description:s._({id:"FpkkzV"}),function:ye,used:x?.includes("webauthn")}].filter(u=>t?.mfa?.supported_types.includes(u.type)),[x,t]),oe=l.useMemo(()=>r?.map(u=>e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:u.type}),e.jsx(n.Td,{children:ae(u.last_used_at)}),e.jsx(n.Td,{children:ae(u.created_at)}),e.jsx(n.Td,{children:e.jsxs(C,{grow:!0,children:[u.type=="totp"&&e.jsx(f,{"aria-label":"remove-totp",color:"red",onClick:Te,children:e.jsx(o,{id:"t/YqKh"})}),u.type=="recovery_codes"&&e.jsx(f,{"aria-label":"view-recovery-codes",onClick:be,children:e.jsx(o,{id:"jpctdh"})}),u.type=="webauthn"&&e.jsx(f,{"aria-label":"remove-webauthn",color:"red",onClick:()=>{ve(u.id)},children:e.jsx(o,{id:"t/YqKh"})})]})})]},`${u.created_at}-${u.type}`))??[],[r]);return e.jsxs(e.Fragment,{children:[e.jsx(ys,{opened:j,setOpen:d,onReauthFlow:V}),e.jsx(Es,{opened:Z,setOpen:R,onReauthFlow:V,onSuccess:c}),e.jsx(Cs,{tokenId:h,opened:k,setOpen:W,onReauthFlow:V,onSuccess:c}),e.jsx(Ss,{opened:D,setOpen:Q,onReauthFlow:V,onSuccess:c}),e.jsx(fs,{opened:a,setOpen:_}),e.jsx(gs,{opened:E,setOpen:N}),e.jsxs(ne,{cols:{xs:1,md:2},spacing:"sm",children:[oe.length>0?e.jsxs(n,{stickyHeader:!0,striped:!0,highlightOnHover:!0,withTableBorder:!0,children:[e.jsx(n.Thead,{children:e.jsxs(n.Tr,{children:[e.jsx(n.Th,{children:e.jsx(o,{id:"+zy2Nq"})}),e.jsx(n.Th,{children:e.jsx(o,{id:"rG8/7P"})}),e.jsx(n.Th,{children:e.jsx(o,{id:"YeUQpx"})}),e.jsx(n.Th,{children:e.jsx(o,{id:"7L01XJ"})})]})}),e.jsx(n.Tbody,{children:oe})]}):e.jsx(b,{title:s._({id:"0X7aCu"}),icon:e.jsx(I,{size:"1rem"}),color:"yellow",children:e.jsx(o,{id:"FiVzC7"})}),re.length>0?e.jsxs(p,{children:[e.jsx(y,{size:"md",children:s._({id:"HJIIzN"})}),re.map(u=>e.jsx(Ie,{label:u.description,children:e.jsx(f,{onClick:u.function,disabled:u.used,variant:"outline","aria-label":`add-factor-${u.type}`,children:u.name})},u.type))]}):e.jsx(b,{title:s._({id:"y7qB3J"}),icon:e.jsx(I,{size:"1rem"}),color:"yellow",children:e.jsx(o,{id:"cDbhU0"})})]})]})}function bs(){const[t,i]=X(F(c=>[c.auth_config,c.sso_enabled])),r=le();return e.jsx(p,{children:e.jsxs(S,{multiple:!0,defaultValue:["email"],children:[e.jsxs(S.Item,{value:"email",children:[e.jsx(S.Control,{children:e.jsx(y,{size:"lg",children:s._({id:"jheQzv"})})}),e.jsx(S.Panel,{children:e.jsx(Rs,{})})]}),e.jsxs(S.Item,{value:"sso",children:[e.jsx(S.Control,{children:e.jsx(y,{size:"lg",children:s._({id:"OI/Njf"})})}),e.jsx(S.Panel,{children:i()?e.jsx(Is,{auth_config:t}):e.jsx(b,{icon:e.jsx(I,{size:"1rem"}),title:s._({id:"GYQmzM"}),color:"yellow",children:e.jsx(o,{id:"dlCBek"})})})]}),e.jsxs(S.Item,{value:"mfa",children:[e.jsx(S.Control,{children:e.jsx(y,{size:"lg",children:s._({id:"AJZ3UU"})})}),e.jsx(S.Panel,{children:e.jsx(Ts,{})})]}),e.jsxs(S.Item,{value:"token",children:[e.jsx(S.Control,{children:e.jsx(y,{size:"lg",children:s._({id:"arnfQh"})})}),e.jsx(S.Panel,{children:e.jsx(ts,{only_myself:!0})})]}),r.isSuperuser()&&e.jsxs(S.Item,{value:"session",children:[e.jsx(S.Control,{children:e.jsx(y,{size:"lg",children:s._({id:"fg3aim"})})}),e.jsx(S.Panel,{children:e.jsx(vs,{})})]})]})})}function vs(){const[t,i]=X(F(c=>[c.auth_context,c.setAuthContext])),r=l.useCallback(()=>{H(T(g.auth_session)).then(c=>{i(c.data.data)})},[i]);return e.jsxs(p,{gap:"xs",children:[e.jsx(C,{children:e.jsx(ie,{onClick:r,variant:"transparent","aria-label":"refresh-auth-context",children:e.jsx(Je,{})})}),e.jsxs(n,{children:[e.jsx(n.Thead,{children:e.jsxs(n.Tr,{children:[e.jsx(n.Th,{children:s._({id:"8TMaZI"})}),e.jsx(n.Th,{children:s._({id:"fiPesM"})})]})}),e.jsx(n.Tbody,{children:t?.methods?.map((c,x)=>e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:ae(c.at)}),e.jsx(n.Td,{children:c.method})]},`auth-method-${x}`))})]})]})}function Rs(){const[t,i]=l.useState(""),[r,c]=l.useState(""),{isLoading:x,data:h,refetch:m}=q({queryKey:["emails"],queryFn:()=>H(T(g.auth_email)).then(a=>a.data.data)}),j=l.useMemo(()=>h==null||h.length==0,[h]);function d(a="post",_){const E=_||{email:t};return H(T(g.auth_email),void 0,a,E).then(()=>{m()}).catch(N=>{Me("email-error"),v({id:"email-error",title:s._({id:"SlfejT"}),message:s._({id:"6+wumt"}),color:"red"})})}return x?e.jsx($,{}):e.jsxs(ne,{cols:{xs:1,md:2},spacing:"sm",children:[j?e.jsx(p,{gap:"xs",children:e.jsx(b,{icon:e.jsx(I,{size:"1rem"}),title:s._({id:"0X7aCu"}),color:"yellow",children:e.jsx(o,{id:"lVUxBy"})})}):e.jsx(J.Group,{value:t,onChange:i,name:"email_accounts",label:s._({id:"Xfy/DT"}),children:e.jsxs(p,{mt:"xs",children:[h.map(a=>e.jsx(J,{value:String(a.email),label:e.jsxs(C,{justify:"space-apart",children:[a.email,e.jsxs(C,{justify:"right",children:[a.primary&&e.jsx(G,{color:"blue",children:e.jsx(o,{id:"T/R+Qz"})}),a.verified?e.jsx(G,{color:"green",children:e.jsx(o,{id:"QDEWii"})}):e.jsx(G,{color:"yellow",children:e.jsx(o,{id:"VBTGXl"})})]})]})},a.email)),e.jsxs(C,{children:[e.jsx(f,{onClick:()=>d("patch",{email:t,primary:!0}),disabled:!t,children:e.jsx(o,{id:"g/Kbij"})}),e.jsx(f,{onClick:()=>d("put"),disabled:!t,children:e.jsx(o,{id:"+GoJJW"})}),e.jsx(f,{onClick:()=>d("delete"),disabled:!t,color:"red",children:e.jsx(o,{id:"t/YqKh"})})]})]})}),e.jsxs(p,{children:[e.jsx(y,{size:"md",children:s._({id:"oLztc+"})}),e.jsx(we,{label:s._({id:"Y/cuRF"}),placeholder:s._({id:"JqLqpm"}),leftSection:e.jsx(as,{}),"aria-label":"email-address-input",value:r,onChange:a=>c(a.currentTarget.value)}),e.jsx(f,{"aria-label":"email-address-submit",onClick:()=>d("post",{email:r}).catch(a=>{a.status==400&&v({title:s._({id:"/NCeM2"}),message:a.response.data.errors.map(_=>_.message).join(`
`),color:"red",icon:e.jsx(Xe,{})})}),children:e.jsx(o,{id:"0+CYPj"})})]})]})}function As({provider:t}){return e.jsx(f,{variant:"outline",onClick:()=>Le(t,"connect"),children:e.jsx(C,{justify:"space-between",children:t.name})},t.id)}function Is({auth_config:t}){const[i,r]=l.useState(""),{isLoading:c,data:x,refetch:h}=q({queryKey:["provider-list"],queryFn:()=>H(T(g.auth_providers)).then(d=>d?.data?.data??[]).catch(()=>[])}),m=l.useMemo(()=>{if(!t||!x)return[];const d=x.map(a=>a.provider.id);return t.socialaccount.providers.filter(a=>!d.includes(a.id))},[t,x]);function j(){const[d,a]=i.split("$");H(T(g.auth_providers),void 0,"delete",{provider:a,account:d}).then(()=>{h()}).catch(_=>console.log(_.data))}return c?e.jsx($,{}):e.jsxs(U,{children:[e.jsx(U.Col,{span:6,children:x.length==0?e.jsx(p,{gap:"xs",children:e.jsx(b,{icon:e.jsx(I,{size:"1rem"}),title:s._({id:"0X7aCu"}),color:"yellow",children:e.jsx(o,{id:"KbNsE0"})})}):e.jsxs(p,{children:[e.jsx(J.Group,{value:i,onChange:r,name:"sso_accounts",label:s._({id:"+b3H4M"}),children:e.jsx(p,{mt:"xs",children:x.map(d=>e.jsx(J,{value:[d.uid,d.provider.id].join("$"),label:`${d.provider.name}: ${d.display}`},d.uid))})}),e.jsx(f,{onClick:j,children:e.jsx(o,{id:"iDH5VM"})})]})}),e.jsx(U.Col,{span:6,children:e.jsxs(p,{children:[e.jsx(te,{children:"Add SSO Account"}),m===void 0?e.jsx(te,{children:e.jsx(o,{id:"yQE2r9"})}):e.jsx(p,{gap:"xs",children:m.map(d=>e.jsx(As,{provider:d},d.id))})]})})]})}const ae=t=>t==null?"Never":new Date(t*1e3).toLocaleString();function Ps(){const t=$e(),[i,r]=le(F(_=>[_.user,_.fetchUserState])),c=l.useMemo(()=>({first_name:{},last_name:{}}),[]),x=xe({title:s._({id:"3mLnBk"}),url:g.user_me,onFormSuccess:r,fields:c,successMessage:s._({id:"4ZEEyG"})}),h=l.useMemo(()=>({displayname:{},position:{},status:{},location:{},active:{},contact:{},type:{},organisation:{},primary_group:{}}),[]),m=xe({title:s._({id:"yXWeK6"}),url:g.user_profile,onFormSuccess:r,fields:h,successMessage:s._({id:"/C3Zg+"})}),j=l.useMemo(()=>[{label:s._({id:"7sNhEz"}),value:i?.username},{label:s._({id:"kODvZJ"}),value:i?.first_name},{label:s._({id:"UXBCwc"}),value:i?.last_name},{label:s._({id:"F6pfE9"}),value:e.jsx(se,{value:i?.profile?.active})},{label:s._({id:"0ib+Ql"}),value:e.jsx(se,{value:i?.is_staff})},{label:s._({id:"agYOFs"}),value:e.jsx(se,{value:i?.is_superuser})}],[i]),d=l.useMemo(()=>[{label:s._({id:"0gS7M5"}),value:i?.profile?.displayname},{label:s._({id:"p/78dY"}),value:i?.profile?.position},{label:s._({id:"uAQUqI"}),value:i?.profile?.status},{label:s._({id:"wJijgU"}),value:i?.profile?.location},{label:s._({id:"jfC/xh"}),value:i?.profile?.contact},{label:s._({id:"+zy2Nq"}),value:e.jsx(G,{children:i?.profile?.type})},{label:s._({id:"LB3Kje"}),value:i?.profile?.organisation},{label:s._({id:"O5tQDe"}),value:i?.profile?.primary_group}],[i]);return e.jsxs(e.Fragment,{children:[x.modal,m.modal,e.jsxs(p,{gap:"xs",children:[e.jsxs(C,{justify:"space-between",children:[e.jsx(y,{size:"lg",children:e.jsx(o,{id:"AQoSYJ"})}),e.jsx(ls,{tooltip:s._({id:"adqezM"}),icon:e.jsx(Ze,{}),actions:[{name:s._({id:"9B436y"}),icon:e.jsx(he,{}),tooltip:s._({id:"3mLnBk"}),onClick:x.open},{name:s._({id:"VhMDMg"}),icon:e.jsx(rs,{}),tooltip:s._({id:"QzqxNm"}),onClick:()=>{t("/change-password")}}]})]}),a(j),e.jsxs(C,{justify:"space-between",children:[e.jsx(y,{size:"lg",children:e.jsx(o,{id:"pmie1A"})}),e.jsx(ns,{text:s._({id:"QJQd1J"}),icon:e.jsx(he,{}),tooltip:s._({id:"yXWeK6"}),onClick:m.open,variant:"light"})]}),a(d)]})]});function a(_){return e.jsx(n,{children:e.jsx(n.Tbody,{children:_.map(E=>e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{id:"J/hVSQ",values:{0:E.label}})}),e.jsx(n.Td,{children:E.value})]},E.label))})})}}function Os(t){return{[ge.colors[t][6]]:t}}const _e=Object.assign({},...Object.keys(ge.colors).map(t=>Os(t)));function ks({height:t}){const i=He(),[r,c,x]=Fe(F(a=>[a.userTheme,a.setTheme,a.setLanguage]));function h(a){const _=ue.find(E=>E.value===a);return _?_.label:"sm"}const[m,j]=l.useState(25);function d(a){const _=h(a);j(a),c([{key:"radius",value:_.toString()}])}return e.jsxs(fe,{w:"100%",mih:t,p:0,children:[e.jsx(y,{size:"lg",children:e.jsx(o,{id:"DdjH42"})}),e.jsx(n,{children:e.jsxs(n.Tbody,{children:[e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{id:"vXIe7J"})}),e.jsx(n.Td,{children:e.jsx(cs,{width:200})}),e.jsx(n.Td,{children:Ne})]}),e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{id:"FpsvqB"})}),e.jsx(n.Td,{children:e.jsx(C,{justify:"left",children:e.jsx(ds,{})})}),e.jsx(n.Td,{})]}),e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{id:"ca2AYV"})}),e.jsx(n.Td,{children:e.jsx(De,{format:"hex",onChange:a=>c([{key:"primaryColor",value:_e[a]}]),withPicker:!1,swatches:Object.keys(_e)})}),e.jsx(n.Td,{children:e.jsx(f,{color:i.primaryColor,variant:"light",children:e.jsx(o,{id:"HmI5oK"})})})]}),e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{id:"160vo+"})}),e.jsx(n.Td,{children:e.jsx(de,{"aria-label":"Color Picker White",value:r.whiteColor,onChange:a=>c([{key:"whiteColor",value:a}])})}),e.jsx(n.Td,{children:e.jsx(ie,{variant:"default","aria-label":"Reset White Color",onClick:()=>c([{key:"whiteColor",value:"#FFFFFF"}]),children:e.jsx(je,{})})})]}),e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{id:"u01284"})}),e.jsx(n.Td,{children:e.jsx(de,{"aria-label":"Color Picker Black",value:r.blackColor,onChange:a=>c([{key:"blackColor",value:a}])})}),e.jsx(n.Td,{children:e.jsx(ie,{variant:"default","aria-label":"Reset Black Color",onClick:()=>c([{key:"blackColor",value:"#000000"}]),children:e.jsx(je,{})})})]}),e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{id:"bjp1xg"})}),e.jsx(n.Td,{children:e.jsx(We,{label:a=>h(a),defaultValue:50,step:25,marks:ue,value:m,onChange:d,mb:18})})]}),e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{id:"EBeoY+"})}),e.jsx(n.Td,{children:e.jsx(C,{justify:"left",children:e.jsx(Ve,{"aria-label":"Loader Type Selector",data:[{value:"bars",label:s._({id:"yIoFdU"})},{value:"oval",label:s._({id:"NAZGMM"})},{value:"dots",label:s._({id:"2AXZa8"})}],value:r.loader,onChange:a=>{a!=null&&c([{key:"loader",value:a}])}})})}),e.jsx(n.Td,{children:e.jsx(C,{justify:"left",children:e.jsx($,{type:r.loader,mah:16,size:"sm"})})})]})]})})]})}function ws(){return e.jsx("div",{children:e.jsxs(ne,{cols:{base:1,md:2},spacing:"md",children:[e.jsx(fe,{w:"100%",children:e.jsx(Ps,{})}),e.jsx(U,{gutter:"md",children:e.jsx(U.Col,{children:e.jsx(ks,{height:142})})})]})})}const me=Ue(l.lazy(()=>Be(()=>import("./PluginSettingsGroup-Hi2wSZqP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)));function ct(){const[t,i]=le(F(c=>[c.user,c.isLoggedIn])),r=l.useMemo(()=>[{name:"account",label:s._({id:"AeXO77"}),icon:e.jsx(os,{}),content:e.jsx(ws,{})},{name:"security",label:s._({id:"a3LDKx"}),icon:e.jsx(es,{}),content:e.jsx(bs,{})},{name:"display",label:s._({id:"+4YDgS"}),icon:e.jsx(_s,{}),content:e.jsx(ee,{keys:["ICONS_IN_NAVBAR","STICKY_HEADER","STICKY_TABLE_HEADER","SHOW_SPOTLIGHT","BARCODE_IN_FORM_FIELDS","DATE_DISPLAY_FORMAT","FORMS_CLOSE_USING_ESCAPE","DISPLAY_STOCKTAKE_TAB","ENABLE_LAST_BREADCRUMB","SHOW_FULL_LOCATION_IN_TABLES","SHOW_FULL_CATEGORY_IN_TABLES"]})},{name:"search",label:s._({id:"A1taO8"}),icon:e.jsx(ss,{}),content:e.jsx(ee,{keys:["SEARCH_WHOLE","SEARCH_REGEX","SEARCH_NOTES","SEARCH_PREVIEW_RESULTS","SEARCH_PREVIEW_SHOW_PARTS","SEARCH_HIDE_INACTIVE_PARTS","SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS","SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS","SEARCH_PREVIEW_SHOW_CATEGORIES","SEARCH_PREVIEW_SHOW_STOCK","SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK","SEARCH_PREVIEW_SHOW_LOCATIONS","SEARCH_PREVIEW_SHOW_COMPANIES","SEARCH_PREVIEW_SHOW_BUILD_ORDERS","SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS","SEARCH_PREVIEW_SHOW_SALES_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS","SEARCH_PREVIEW_SHOW_SALES_ORDER_SHIPMENTS","SEARCH_PREVIEW_SHOW_RETURN_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS"]})},{name:"notifications",label:s._({id:"iDNBZe"}),icon:e.jsx(us,{}),content:e.jsx(me,{mixin:"notification",global:!1,message:s._({id:"lNuecQ"})})},{name:"reporting",label:s._({id:"ApEshE"}),icon:e.jsx(hs,{}),content:e.jsx(ee,{keys:["REPORT_INLINE","LABEL_INLINE","LABEL_DEFAULT_PRINTER"]})},{name:"plugins",label:s._({id:"eKHY3W"}),icon:e.jsx(xs,{}),content:e.jsx(me,{global:!1})}],[]);return i()?e.jsxs(e.Fragment,{children:[e.jsx(qe,{title:s._({id:"ekfzWq"})}),e.jsxs(p,{gap:"xs",children:[e.jsx(Ke,{label:"user",title:s._({id:"ekfzWq"}),subtitle:t?.first_name&&t?.last_name?`${t?.first_name} ${t?.last_name}`:null,shorthand:t?.username||""}),e.jsx(Qe,{pageKey:"user-settings",panels:r,model:"usersettings",id:null})]})]}):e.jsx(ze,{})}export{ct as default};
//# sourceMappingURL=UserSettings-DK8YYi_4.js.map
