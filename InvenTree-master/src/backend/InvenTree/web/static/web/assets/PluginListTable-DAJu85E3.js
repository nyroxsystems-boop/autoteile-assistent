import{K as L,j as e,r as s,ao as c,aq as P,ab as t,d as p,a8 as Y,as as n,S as u,aB as h,ag as z,ah as H,N as X,a7 as C,an as E,av as G,aa as y}from"./index-Db7AGPIq.js";import{A as I}from"./ActionButton-Cv5j5I5R.js";import{D as J}from"./DetailDrawer-DtwyRZtv.js";import{u as U}from"./UseInstance-BPJQEWDW.js";import{I as o}from"./InfoItem-CKE41Z9j.js";import{E as Z,S as b,a as Q,ac as M,x as w,aw as q,r as $}from"./ThemeContext-CxdCkKtz.js";import{P as ee}from"./SettingList-Bc72M5k9.js";import{u as te}from"./PluginUIFeature-DCu8wTdG.js";import{R as ie}from"./RemoteComponent-uZoHDwds.js";import{u as ae}from"./DesktopAppView-BuH2j218.js";import{b as K,a as se,c as le}from"./Filter-BgnAqEQC.js";import{u as ne,I as oe}from"./InvenTreeTable-DmN557zY.js";import{B as k}from"./ColumnRenderers-BUH0stTX.js";import"./IconChevronLeft-6FmaJpTs.js";import"./YesNoButton-BaVgP5u9.js";import"./IconChevronDown-CzbIU38Y.js";import"./index-DRtKJP-e.js";import"./QRCode-BaIEIQ2d.js";import"./browser-DSycY7kT.js";import"./IconDotsVertical-D8D3XsjG.js";import"./IconTags-DnGx22aA.js";import"./formatters-B4ehJgEk.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 16v.01",key:"svg-1"}],["path",{d:"M12 13a2 2 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483",key:"svg-2"}]],de=L("outline","help-circle","HelpCircle",re);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M19 8h-14",key:"svg-0"}],["path",{d:"M5 12h9",key:"svg-1"}],["path",{d:"M11 16h-6",key:"svg-2"}],["path",{d:"M15 16h6",key:"svg-3"}],["path",{d:"M18 13v6",key:"svg-4"}]],ue=L("outline","playlist-add","PlaylistAdd",ce);function me({pluginAdmin:l}){const a=te();return e.jsx(ie,{source:l.source,defaultFunctionName:"renderPluginSettings",context:{...a,context:l.context}})}function pe({pluginKey:l,pluginInstance:a}){const{id:_}=Z(),r=s.useMemo(()=>l||_||"",[l,_]),{instance:d}=U({endpoint:c.plugin_admin,pathParams:{key:r},defaultValue:{},hasPrimaryKey:!1,refetchOnMount:!0}),g=s.useMemo(()=>!!a?.mixins?.settings,[a]);return a.active?e.jsxs(n,{defaultValue:["plugin-details","plugin-settings"],multiple:!0,children:[e.jsxs(n.Item,{value:"plugin-details",children:[e.jsx(n.Control,{children:e.jsx(b,{size:"lg",children:t._({id:"5HArLW"})})}),e.jsx(n.Panel,{children:e.jsxs(u,{gap:"xs",children:[e.jsx(h,{withBorder:!0,children:e.jsx(u,{gap:"md",children:e.jsxs(u,{pos:"relative",gap:"xs",children:[e.jsx(o,{type:"text",name:t._({id:"6YtxFj"}),value:a?.name}),e.jsx(o,{type:"text",name:t._({id:"Nu4oKW"}),value:a?.meta.description}),e.jsx(o,{type:"text",name:t._({id:"VbeIOx"}),value:a?.meta.author}),e.jsx(o,{type:"text",name:t._({id:"mYGY3B"}),value:a?.meta.pub_date}),e.jsx(o,{type:"text",name:t._({id:"eE0JZ4"}),value:a?.meta.version}),e.jsx(o,{type:"boolean",name:t._({id:"F6pfE9"}),value:a?.active})]})})}),e.jsx(h,{withBorder:!0,children:e.jsx(u,{gap:"md",children:e.jsxs(u,{pos:"relative",gap:"xs",children:[a?.is_package&&e.jsx(o,{type:"text",name:t._({id:"/L+cAM"}),value:a?.package_name}),e.jsx(o,{type:"text",name:t._({id:"AJd5vK"}),value:a?.meta.package_path}),e.jsx(o,{type:"boolean",name:t._({id:"++LBSt"}),value:a?.is_builtin}),e.jsx(o,{type:"boolean",name:t._({id:"mGYa19"}),value:a?.is_package})]})})})]})})]}),g&&e.jsxs(n.Item,{value:"plugin-settings",children:[e.jsx(n.Control,{children:e.jsx(b,{size:"lg",children:t._({id:"eKHY3W"})})}),e.jsx(n.Panel,{children:e.jsx(h,{withBorder:!0,children:e.jsx(ee,{pluginKey:r})})})]}),d?.source&&e.jsxs(n.Item,{value:"plugin-custom",children:[e.jsx(n.Control,{children:e.jsx(b,{size:"lg",children:t._({id:"BFm1Jm"})})}),e.jsx(n.Panel,{children:e.jsx(h,{withBorder:!0,children:e.jsx(me,{pluginAdmin:d})})})]})]}):e.jsx(P,{color:"red",title:t._({id:"nNlKYH"}),icon:e.jsx(Y,{}),children:e.jsx(p,{children:t._({id:"xwdvWr"})})})}function _e({plugin:l}){return l?.is_installed?l?.active?e.jsx(y,{label:t._({id:"QqLLp2"}),children:e.jsx(C,{color:"green"})}):e.jsx(y,{label:t._({id:"s99Mc1"}),children:e.jsx(M,{color:"red"})}):e.jsx(y,{label:t._({id:"LtEW/l"}),children:e.jsx(de,{})})}function Ve(){const l=ae(),a=ne("plugin"),_=Q(),r=z(),{server:d}=H(),g=s.useMemo(()=>[{accessor:"name",title:t._({id:"fOuPPd"}),sortable:!0,render:i=>{if(i)return e.jsxs(X,{justify:"left",children:[e.jsx(_e,{plugin:i}),e.jsx(p,{children:i.name})]})}},k({accessor:"active",sortable:!0,title:t._({id:"F6pfE9"})}),k({accessor:"is_builtin",sortable:!1,title:t._({id:"++LBSt"})}),k({accessor:"is_mandatory",sortable:!1,title:t._({id:"gFFgtV"})}),{accessor:"meta.description",title:t._({id:"Nu4oKW"}),sortable:!1,render:i=>i.active?i?.meta.description:e.jsx(p,{style:{fontStyle:"italic"},size:"sm",children:t._({id:"9YdyZU"})})},{accessor:"meta.version",title:t._({id:"eE0JZ4"}),sortable:!1,render:i=>i?.meta.version},{accessor:"meta.author",title:"Author",sortable:!1}],[]),[S,V]=s.useState({}),[j,x]=s.useState(""),[m,A]=s.useState(!1),D=s.useMemo(()=>e.jsx(u,{gap:"xs",children:e.jsx(P,{color:m?"green":"red",icon:e.jsx(C,{}),title:m?t._({id:"fLe7w+"}):t._({id:"oBCe/M"}),children:e.jsx(p,{children:m?t._({id:"th4roR"}):t._({id:"WPCUXx"})})})}),[m]),O=s.useCallback(i=>!r.isSuperuser()||!d.plugins_enabled?[]:[{hidden:i.is_mandatory!=!1||i.active!=!0,title:t._({id:"5y3O+A"}),color:"red",icon:e.jsx(M,{}),onClick:()=>{x(i.key),A(!1),f.open()}},{hidden:i.is_mandatory!=!1||!i.is_installed||i.active!=!1,title:t._({id:"FQBaXG"}),tooltip:t._({id:"RqdYGI"}),color:"green",icon:e.jsx(C,{}),onClick:()=>{x(i.key),A(!0),f.open()}},{hidden:!i.active||!i.is_package||!i.package_name,title:t._({id:"EkH9pt"}),tooltip:t._({id:"R7mVjI"}),color:"blue",icon:e.jsx(w,{}),onClick:()=>{F(i.package_name),v.open()}},{hidden:!r.isSuperuser()||i.active||i.is_builtin||i.is_mandatory||i.is_sample||!i.is_installed||!i.is_package,title:t._({id:"fo0VXg"}),tooltip:t._({id:"ll8AEP"}),color:"red",icon:e.jsx(M,{}),onClick:()=>{x(i.key),B.open()}},{hidden:i.active||i.is_builtin||i.is_mandatory||i.is_sample||i.is_installed||!r.isSuperuser(),title:t._({id:"cnGeoo"}),tooltip:t._({id:"yX/BXa"}),color:"red",icon:e.jsx(q,{}),onClick:()=>{x(i.key),T.open()}}],[r,d]),[R,F]=s.useState(""),f=K({title:t._({id:"2RHgaV"}),url:c.plugin_activate,pathParams:{key:j},preFormContent:D,fetchInitialData:!1,method:"PATCH",successMessage:m?t._({id:"VAuM5b"}):t._({id:"ysKQPq"}),fields:{active:{hidden:!0}},initialData:{active:m},table:a}),v=se({title:t._({id:"0O/OZv"}),url:c.plugin_install,timeout:3e4,fields:{packagename:{},url:{},version:{},confirm:{}},initialData:{packagename:R},closeOnClickOutside:!1,submitText:t._({id:"TKQ7K+"}),successMessage:t._({id:"MiYlP5"}),table:a}),B=K({title:t._({id:"mXzRzO"}),url:c.plugin_uninstall,pathParams:{key:j},fetchInitialData:!1,timeout:3e4,fields:{delete_config:{}},preFormContent:e.jsx(P,{color:"red",icon:e.jsx($,{}),title:t._({id:"6onEou"}),children:e.jsxs(u,{gap:"xs",children:[e.jsx(p,{children:t._({id:"nh4MTY"})}),e.jsx(p,{children:t._({id:"U99rVM"})})]})}),successMessage:t._({id:"MAZU/W"}),table:a}),T=le({url:c.plugin_list,pk:j,fetchInitialData:!1,title:t._({id:"nud26y"}),preFormWarning:t._({id:"vb5uIh"}),table:a}),N=s.useCallback(()=>{l.post(E(c.plugin_reload),{full_reload:!0,force_reload:!0,collect_plugins:!0}).then(()=>{G({title:t._({id:"Bs76+T"}),message:t._({id:"js1VzJ"}),color:"green"}),a.refreshTable()})},[]),W=s.useMemo(()=>!r.isSuperuser()||!d.plugins_enabled?[]:[e.jsx(I,{color:"green",icon:e.jsx(w,{}),tooltip:t._({id:"2VWTDu"}),onClick:N},"reload"),e.jsx(I,{color:"green",icon:e.jsx(ue,{}),tooltip:t._({id:"0O/OZv"}),onClick:()=>{F(""),v.open()},disabled:d.plugins_install_disabled||!1},"install")],[r,d]);return e.jsxs(e.Fragment,{children:[v.modal,B.modal,T.modal,f.modal,e.jsx(J,{title:`${t._({id:"NCjc4L"})} - ${S?.name}`,size:"65%",renderContent:i=>{if(i)return e.jsx(pe,{pluginKey:i,pluginInstance:S})}}),e.jsx(oe,{url:E(c.plugin_list),tableState:a,columns:g,props:{enableDownload:!1,rowActions:O,onRowClick:i=>{V(i),_(`${i.key}/`)},tableActions:W,tableFilters:[{name:"active",label:t._({id:"F6pfE9"}),type:"boolean"},{name:"builtin",label:t._({id:"++LBSt"}),type:"boolean"},{name:"mandatory",label:t._({id:"gFFgtV"}),type:"boolean"},{name:"sample",label:t._({id:"LcJmOR"}),type:"boolean"},{name:"installed",label:t._({id:"eQkgKV"}),type:"boolean"}]}})]})}export{Ve as default};
//# sourceMappingURL=PluginListTable-DAJu85E3.js.map
