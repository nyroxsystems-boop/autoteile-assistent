import{r as o,ab as n,an as d,ao as c,az as m,j as t,bb as _,ak as l,bc as f}from"./index-Db7AGPIq.js";import{R as p}from"./PluginUIFeature-DCu8wTdG.js";import{a as x,i as h,h as j,N as y}from"./Filter-BgnAqEQC.js";import{I as b}from"./IconUsers-Dr_Sln9A.js";import{I as g}from"./IconAddressBook-CdNRMeyy.js";import{am as F,ab as u}from"./ThemeContext-CxdCkKtz.js";function q({duplicateOrderId:e}){const i=m();return o.useMemo(()=>{const s={reference:{},description:{},customer:{disabled:e!=null,filters:{is_customer:!0,active:!0}},customer_reference:{},project_code:{},order_currency:{},start_date:{icon:t.jsx(u,{})},target_date:{icon:t.jsx(u,{})},link:{},contact:{icon:t.jsx(F,{}),adjustFilters:r=>({...r.filters,company:r.data.customer})},address:{icon:t.jsx(g,{}),adjustFilters:r=>({...r.filters,company:r.data.customer})},responsible:{filters:{is_active:!0},icon:t.jsx(b,{})}};return e&&(s.duplicate={children:{order_id:{hidden:!0,value:e},copy_lines:{value:!1,hidden:!0},copy_extra_lines:{}}}),i.isSet("PROJECT_CODES_ENABLED",!0)||delete s.project_code,s},[e,i])}function A({orderId:e,customerId:i,create:s}){return o.useMemo(()=>({order:{disabled:!0,filters:{customer_detail:!0}},item:{filters:{customer:i,part_detail:!0}},quantity:{},reference:{},outcome:{hidden:s==!0},price:{},price_currency:{},project_code:{description:n._({id:"XruckR"})},target_date:{},notes:{},link:{}}),[s,e,i])}function v({props:e,record:i}){const s=o.useMemo(()=>h(_.stockitem)()?.map(a=>({value:a.value,display_name:a.label}))??[],[]),r=o.useMemo(()=>i.item_detail?.serial&&i.quantity==1?`# ${i.item_detail.serial}`:i.quantity,[i.quantity,i.item_detail]);return t.jsx(t.Fragment,{children:t.jsxs(l.Tr,{children:[t.jsx(l.Td,{children:t.jsxs(f,{gap:"sm",align:"center",children:[t.jsx(j,{size:40,src:i.part_detail.thumbnail,align:"center"}),t.jsx("div",{children:i.part_detail.name})]})}),t.jsx(l.Td,{children:r}),t.jsx(l.Td,{children:t.jsx(y,{fieldDefinition:{field_type:"choice",label:n._({id:"uAQUqI"}),choices:s,onValueChange:a=>{e.changeFn(e.idx,"status",a)}},defaultValue:i.item_detail?.status,error:e.rowErrors?.status?.message})}),t.jsx(l.Td,{children:t.jsx(p,{onClick:()=>e.removeFn(e.idx)})})]})})}function M(e){const i={id:{value:e.orderId,hidden:!0},items:{field_type:"table",value:e.items.map(s=>({item:s.pk})),modelRenderer:s=>{const r=e.items.find(a=>a.pk==s?.item?.item);return t.jsx(v,{props:s,record:r},r.pk)},headers:[{title:n._({id:"vgP+9p"}),style:{minWidth:"250px"}},{title:n._({id:"VbWX2u"}),style:{minWidth:"250px"}},{title:n._({id:"uAQUqI"}),style:{minWidth:"250px"}},{title:"",style:{width:"50px"}}]},location:{filters:{structural:!1}}};return x({url:d(c.return_order_receive,e.orderId),title:n._({id:"iwAbO1"}),fields:i,initialData:{location:null},size:"80%",onFormSuccess:e.onFormSuccess,successMessage:n._({id:"9U/ZsL"})})}export{A as a,M as b,q as u};
//# sourceMappingURL=ReturnOrderForms-DH3actnY.js.map
