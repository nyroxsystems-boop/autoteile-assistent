{"version":3,"file":"PluginUIFeature-DCu8wTdG.js","sources":["../../../../../../frontend/node_modules/@tanstack/react-query/build/modern/useSuspenseQuery.js","../../../../../../frontend/node_modules/@tabler/icons-react/dist/esm/icons/IconCalendarExclamation.mjs","../../../../../../frontend/node_modules/@tabler/icons-react/dist/esm/icons/IconCoins.mjs","../../../../../../frontend/lib/types/Plugins.tsx","../../../../../../frontend/src/components/buttons/RemoveRowButton.tsx","../../../../../../frontend/src/hooks/UseGenerator.tsx","../../../../../../frontend/src/forms/StockForms.tsx","../../../../../../frontend/src/components/plugins/PluginContext.tsx","../../../../../../frontend/src/components/plugins/PluginSource.tsx","../../../../../../frontend/src/components/plugins/PluginUIFeature.tsx"],"sourcesContent":["\"use client\";\n\n// src/useSuspenseQuery.ts\nimport { QueryObserver, skipToken } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nimport { defaultThrowOnError } from \"./suspense.js\";\nfunction useSuspenseQuery(options, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\"skipToken is not allowed for useSuspenseQuery\");\n    }\n  }\n  return useBaseQuery(\n    {\n      ...options,\n      enabled: true,\n      suspense: true,\n      throwOnError: defaultThrowOnError,\n      placeholderData: void 0\n    },\n    QueryObserver,\n    queryClient\n  );\n}\nexport {\n  useSuspenseQuery\n};\n//# sourceMappingURL=useSuspenseQuery.js.map","/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M15 21h-9a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v5\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M16 3v4\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M8 3v4\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M4 11h16\", \"key\": \"svg-3\" }], [\"path\", { \"d\": \"M11 15h1\", \"key\": \"svg-4\" }], [\"path\", { \"d\": \"M12 15v3\", \"key\": \"svg-5\" }], [\"path\", { \"d\": \"M19 16v3\", \"key\": \"svg-6\" }], [\"path\", { \"d\": \"M19 22v.01\", \"key\": \"svg-7\" }]];\nconst IconCalendarExclamation = createReactComponent(\"outline\", \"calendar-exclamation\", \"CalendarExclamation\", __iconNode);\n\nexport { __iconNode, IconCalendarExclamation as default };\n//# sourceMappingURL=IconCalendarExclamation.mjs.map\n","/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M9 14c0 1.657 2.686 3 6 3s6 -1.343 6 -3s-2.686 -3 -6 -3s-6 1.343 -6 3z\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M9 14v4c0 1.656 2.686 3 6 3s6 -1.344 6 -3v-4\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M3 6c0 1.072 1.144 2.062 3 2.598s4.144 .536 6 0c1.856 -.536 3 -1.526 3 -2.598c0 -1.072 -1.144 -2.062 -3 -2.598s-4.144 -.536 -6 0c-1.856 .536 -3 1.526 -3 2.598z\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M3 6v10c0 .888 .772 1.45 2 2\", \"key\": \"svg-3\" }], [\"path\", { \"d\": \"M3 11c0 .888 .772 1.45 2 2\", \"key\": \"svg-4\" }]];\nconst IconCoins = createReactComponent(\"outline\", \"coins\", \"Coins\", __iconNode);\n\nexport { __iconNode, IconCoins as default };\n//# sourceMappingURL=IconCoins.mjs.map\n","import type { I18n } from '@lingui/core';\nimport type { MantineColorScheme, MantineTheme } from '@mantine/core';\nimport type { QueryClient } from '@tanstack/react-query';\nimport type { AxiosInstance } from 'axios';\nimport type { NavigateFunction } from 'react-router-dom';\nimport type { ModelDict } from '../enums/ModelInformation';\nimport type { ModelType } from '../enums/ModelType';\nimport type {\n  ApiFormModalProps,\n  BulkEditApiFormModalProps,\n  StockOperationProps\n} from './Forms';\nimport type { UseModalReturn } from './Modals';\nimport type { RenderInstanceProps } from './Rendering';\nimport type { SettingsStateProps } from './Settings';\nimport type { UserStateProps } from './User';\n\nexport interface PluginProps {\n  name: string;\n  slug: string;\n  version: null | string;\n}\n\nexport interface PluginVersion {\n  inventree: string;\n  react: string;\n  reactDom: string;\n  mantine: string;\n}\n\nexport type StockAdjustmentFormsContext = {\n  addStock: (props: StockOperationProps) => UseModalReturn;\n  assignStock: (props: StockOperationProps) => UseModalReturn;\n  changeStatus: (props: StockOperationProps) => UseModalReturn;\n  countStock: (props: StockOperationProps) => UseModalReturn;\n  deleteStock: (props: StockOperationProps) => UseModalReturn;\n  mergeStock: (props: StockOperationProps) => UseModalReturn;\n  removeStock: (props: StockOperationProps) => UseModalReturn;\n  transferStock: (props: StockOperationProps) => UseModalReturn;\n  returnStock: (props: StockOperationProps) => UseModalReturn;\n};\n\nexport type InvenTreeFormsContext = {\n  bulkEdit: (props: BulkEditApiFormModalProps) => UseModalReturn;\n  create: (props: ApiFormModalProps) => UseModalReturn;\n  delete: (props: ApiFormModalProps) => UseModalReturn;\n  edit: (props: ApiFormModalProps) => UseModalReturn;\n  stockActions: StockAdjustmentFormsContext;\n};\n\n/**\n * A set of properties which are passed to a plugin,\n * for rendering an element in the user interface.\n *\n * @param version - The version of the running InvenTree software stack\n * @param api - The Axios API instance (see ../states/ApiState.tsx)\n * @param user - The current user instance (see ../states/UserState.tsx)\n * @param userSettings - The current user settings (see ../states/SettingsState.tsx)\n * @param globalSettings - The global settings (see ../states/SettingsState.tsx)\n * @param navigate - The navigation function (see react-router-dom)\n * @param theme - The current Mantine theme\n * @param colorScheme - The current Mantine color scheme (e.g. 'light' / 'dark')\n * @param host - The current host URL\n * @param i18n - The i18n instance for translations (from @lingui/core)\n * @param locale - The current locale string (e.g. 'en' / 'de')\n * @param model - The model type associated with the rendered component (if applicable)\n * @param modelInformation - A dictionary of available model information\n * @param renderInstance - A component function for rendering a model instance\n * @param id - The ID (primary key) of the model instance for the plugin (if applicable)\n * @param instance - The model instance data (if available)\n * @param reloadContent - A function which can be called to reload the plugin content\n * @param reloadInstance - A function which can be called to reload the model instance\n * @param context - Any additional context data which may be passed to the plugin\n */\nexport type InvenTreePluginContext = {\n  version: PluginVersion;\n  api: AxiosInstance;\n  queryClient: QueryClient;\n  user: UserStateProps;\n  userSettings: SettingsStateProps;\n  globalSettings: SettingsStateProps;\n  modelInformation: ModelDict;\n  renderInstance: (props: Readonly<RenderInstanceProps>) => React.ReactNode;\n  host: string;\n  i18n: I18n;\n  locale: string;\n  navigate: NavigateFunction;\n  theme: MantineTheme;\n  forms: InvenTreeFormsContext;\n  colorScheme: MantineColorScheme;\n  model?: ModelType | string;\n  id?: string | number | null;\n  instance?: any;\n  reloadContent?: () => void;\n  reloadInstance?: () => void;\n  context?: any;\n};\n\n/*\n * The version of the InvenTree plugin context interface.\n * This number should be incremented if the interface changes.\n */\n\n// @ts-ignore\nexport const INVENTREE_PLUGIN_VERSION: string = __INVENTREE_LIB_VERSION__;\n// @ts-ignore\nexport const INVENTREE_REACT_VERSION: string = __INVENTREE_REACT_VERSION__;\n// @ts-ignore\nexport const INVENTREE_REACT_DOM_VERSION: string =\n  // @ts-ignore\n  __INVENTREE_REACT_DOM_VERSION__;\n// @ts-ignore\nexport const INVENTREE_MANTINE_VERSION: string = __INVENTREE_MANTINE_VERSION__;\n","import { t } from '@lingui/core/macro';\n\nimport { ActionButton } from '@lib/components/ActionButton';\nimport type { FloatingPosition } from '@mantine/core';\nimport { InvenTreeIcon } from '../../functions/icons';\n\nexport default function RemoveRowButton({\n  onClick,\n  tooltip = t`Remove this row`,\n  tooltipAlignment\n}: Readonly<{\n  onClick: () => void;\n  tooltip?: string;\n  tooltipAlignment?: FloatingPosition;\n}>) {\n  return (\n    <ActionButton\n      onClick={onClick}\n      icon={<InvenTreeIcon icon='square_x' />}\n      tooltip={tooltip}\n      tooltipAlignment={tooltipAlignment ?? 'top-end'}\n      color='red'\n    />\n  );\n}\n","import { useDebouncedValue } from '@mantine/hooks';\nimport { useQuery } from '@tanstack/react-query';\nimport { useCallback, useState } from 'react';\n\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { apiUrl } from '@lib/functions/Api';\nimport { api } from '../App';\nimport { useModalState } from '../states/ModalState';\n\nexport type GeneratorProps = {\n  endpoint: ApiEndpoints;\n  key: string;\n  initialQuery?: Record<string, any>;\n  onGenerate?: (value: any) => void;\n  isEnabled?: () => boolean;\n  modalId?: string;\n};\n\nexport type GeneratorState = {\n  query: Record<string, any>;\n  result: any;\n  update: (params: Record<string, any>, overwrite?: boolean) => void;\n};\n\n/* Hook for managing generation of data via the InvenTree API.\n * We pass an endpoint, and start with an initially empty query.\n * We can pass additional parameters to the query, and update the query as needed.\n * Each update calls a new query to the API, and the result is stored in the state.\n */\nexport function useGenerator(props: GeneratorProps): GeneratorState {\n  const modalState = useModalState();\n\n  // Track the result\n  const [result, setResult] = useState<any>(null);\n\n  // Track the generator query\n  const [query, setQuery] = useState<Record<string, any>>({});\n\n  // Prevent rapid updates\n  const [debouncedQuery] = useDebouncedValue<Record<string, any>>(query, 100);\n\n  // Callback to determine if the function is enabled\n  const isEnabled = useCallback(() => {\n    if (props.isEnabled?.() == false) {\n      return false;\n    }\n\n    if (props.modalId && !modalState.isModalOpen(props.modalId)) {\n      return false;\n    }\n\n    return true;\n  }, [\n    modalState.isModalOpen,\n    modalState.openModals,\n    props.isEnabled,\n    props.modalId\n  ]);\n\n  // Callback to update the generator query\n  const update = useCallback(\n    (params: Record<string, any>, overwrite?: boolean) => {\n      if (overwrite) {\n        setQuery(params);\n      } else {\n        setQuery((query) => ({\n          ...query,\n          ...params\n        }));\n      }\n    },\n    []\n  );\n\n  // API query handler\n  const queryGenerator = useQuery({\n    enabled: true,\n    queryKey: [\n      'generator',\n      props.key,\n      props.endpoint,\n      props.modalId,\n      props.initialQuery,\n      modalState.openModals,\n      debouncedQuery\n    ],\n    refetchOnMount: false,\n    refetchOnWindowFocus: false,\n    throwOnError: (error: any) => {\n      console.error(\n        `Error generating ${props.key} @ ${props.endpoint}:`,\n        error\n      );\n      return false;\n    },\n    queryFn: async () => {\n      const generatorQuery = {\n        ...(props.initialQuery ?? {}),\n        ...debouncedQuery\n      };\n\n      if (!isEnabled()) {\n        setResult(null);\n        return null;\n      }\n\n      return api\n        .post(apiUrl(props.endpoint), generatorQuery)\n        .then((response) => {\n          const value = response?.data[props.key];\n          setResult(value);\n\n          props.onGenerate?.(value);\n\n          return response;\n        });\n    }\n  });\n\n  return {\n    query,\n    update,\n    result\n  };\n}\n\n// Generate a batch code with provided data\nexport function useBatchCodeGenerator({\n  initialQuery,\n  onGenerate,\n  isEnabled,\n  modalId\n}: {\n  initialQuery?: Record<string, any>;\n  onGenerate?: (value: any) => void;\n  isEnabled?: () => boolean;\n  modalId?: string;\n}): GeneratorState {\n  return useGenerator({\n    endpoint: ApiEndpoints.generate_batch_code,\n    key: 'batch_code',\n    initialQuery: initialQuery,\n    onGenerate: onGenerate,\n    isEnabled: isEnabled,\n    modalId: modalId\n  });\n}\n\n// Generate a serial number with provided data\nexport function useSerialNumberGenerator({\n  initialQuery,\n  onGenerate,\n  isEnabled,\n  modalId\n}: {\n  initialQuery?: Record<string, any>;\n  onGenerate?: (value: any) => void;\n  isEnabled?: () => boolean;\n  modalId?: string;\n}): GeneratorState {\n  return useGenerator({\n    endpoint: ApiEndpoints.generate_serial_number,\n    key: 'serial_number',\n    initialQuery: initialQuery,\n    onGenerate: onGenerate,\n    isEnabled: isEnabled,\n    modalId: modalId\n  });\n}\n","import { t } from '@lingui/core/macro';\nimport {\n  Alert,\n  Flex,\n  Group,\n  List,\n  Skeleton,\n  Stack,\n  Table,\n  Text\n} from '@mantine/core';\nimport { useDisclosure } from '@mantine/hooks';\nimport { modals } from '@mantine/modals';\nimport {\n  IconCalendarExclamation,\n  IconCoins,\n  IconCurrencyDollar,\n  IconLink,\n  IconPackage,\n  IconUsersGroup\n} from '@tabler/icons-react';\nimport { useQuery, useSuspenseQuery } from '@tanstack/react-query';\nimport { type JSX, Suspense, useEffect, useMemo, useState } from 'react';\n\nimport { ActionButton } from '@lib/components/ActionButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport dayjs from 'dayjs';\nimport { useNavigate } from 'react-router-dom';\nimport { api } from '../App';\nimport RemoveRowButton from '../components/buttons/RemoveRowButton';\nimport { StandaloneField } from '../components/forms/StandaloneField';\n\nimport { apiUrl } from '@lib/functions/Api';\nimport { getDetailUrl } from '@lib/functions/Navigation';\nimport type {\n  ApiFormAdjustFilterType,\n  ApiFormFieldChoice,\n  ApiFormFieldSet,\n  ApiFormModalProps,\n  StockOperationProps\n} from '@lib/types/Forms';\nimport {\n  TableFieldExtraRow,\n  type TableFieldRowProps\n} from '../components/forms/fields/TableField';\nimport { Thumbnail } from '../components/images/Thumbnail';\nimport { StylishText } from '../components/items/StylishText';\nimport { StatusRenderer } from '../components/render/StatusRenderer';\nimport { RenderStockLocation } from '../components/render/Stock';\nimport { InvenTreeIcon } from '../functions/icons';\nimport {\n  useApiFormModal,\n  useCreateApiFormModal,\n  useDeleteApiFormModal\n} from '../hooks/UseForm';\nimport {\n  useBatchCodeGenerator,\n  useSerialNumberGenerator\n} from '../hooks/UseGenerator';\nimport { useGlobalSettingsState } from '../states/SettingsStates';\nimport { StatusFilterOptions } from '../tables/Filter';\n\n/**\n * Construct a set of fields for creating / editing a StockItem instance\n */\nexport function useStockFields({\n  partId,\n  stockItem,\n  create = false,\n  supplierPartId,\n  pricing,\n  modalId\n}: {\n  partId?: number;\n  stockItem?: any;\n  modalId: string;\n  create: boolean;\n  supplierPartId?: number;\n  pricing?: { [priceBreak: number]: [number, string] };\n}): ApiFormFieldSet {\n  const globalSettings = useGlobalSettingsState();\n\n  // Keep track of the \"part\" instance\n  const [partInstance, setPartInstance] = useState<any>({});\n\n  const [supplierPart, setSupplierPart] = useState<number | null>(\n    supplierPartId ?? null\n  );\n\n  const [expiryDate, setExpiryDate] = useState<string | null>(null);\n  const [quantity, setQuantity] = useState<number | null>(null);\n  const [purchasePrice, setPurchasePrice] = useState<number | null>(null);\n  const [purchasePriceCurrency, setPurchasePriceCurrency] = useState<\n    string | null\n  >(null);\n\n  const batchGenerator = useBatchCodeGenerator({\n    modalId: modalId,\n    initialQuery: {\n      part: partId\n    }\n  });\n\n  const serialGenerator = useSerialNumberGenerator({\n    modalId: modalId,\n    initialQuery: {\n      part: partId\n    }\n  });\n\n  // Update pricing when quantity changes\n  useEffect(() => {\n    if (quantity === null || quantity === undefined || !pricing) return;\n\n    // Find the highest price break that is less than or equal to the quantity\n    const priceBreak = Object.entries(pricing)\n      .sort(([a], [b]) => Number.parseInt(b) - Number.parseInt(a))\n      .find(([br]) => quantity >= Number.parseInt(br));\n\n    if (priceBreak) {\n      setPurchasePrice(priceBreak[1][0]);\n      setPurchasePriceCurrency(priceBreak[1][1]);\n    }\n  }, [pricing, quantity]);\n\n  // Set the supplier part if provided\n  useEffect(() => {\n    if (supplierPartId && !supplierPart) setSupplierPart(supplierPartId);\n  }, [partInstance, supplierPart, supplierPartId]);\n\n  // Set default currency from global settings\n  useEffect(() => {\n    setPurchasePriceCurrency(\n      globalSettings.getSetting('INVENTREE_DEFAULT_CURRENCY')\n    );\n  }, [globalSettings]);\n\n  return useMemo(() => {\n    const fields: ApiFormFieldSet = {\n      part: {\n        value: partInstance.pk,\n        disabled: !create || !!partId,\n        filters: {\n          virtual: false,\n          active: create ? true : undefined\n        },\n        onValueChange: (value, record) => {\n          // Update the tracked part instance\n          setPartInstance(record);\n\n          serialGenerator.update({\n            part: value\n          });\n\n          batchGenerator.update({\n            part: value\n          });\n\n          // Clear the 'supplier_part' field if the part is changed\n          setSupplierPart(null);\n\n          // Adjust the 'expiry date' for the stock item\n          const expiry_days = record?.default_expiry ?? 0;\n\n          if (expiry_days && expiry_days > 0) {\n            // Adjust the expiry date based on the part default expiry\n            setExpiryDate(\n              dayjs().add(expiry_days, 'days').format('YYYY-MM-DD')\n            );\n          }\n        }\n      },\n      supplier_part: {\n        hidden: partInstance?.purchaseable == false,\n        disabled: !!supplierPartId,\n        value: supplierPart,\n        onValueChange: (value) => {\n          setSupplierPart(value);\n        },\n        filters: {\n          part_detail: true,\n          supplier_detail: true,\n          part: partId\n        },\n        adjustFilters: (adjust: ApiFormAdjustFilterType) => {\n          if (adjust.data.part) {\n            adjust.filters['part'] = adjust.data.part;\n          }\n\n          return adjust.filters;\n        }\n      },\n      use_pack_size: {\n        hidden: !create,\n        description: t`Add given quantity as packs instead of individual items`\n      },\n      location: {\n        // Cannot adjust location for existing stock items\n        hidden: !create,\n        onValueChange: (value) => {\n          batchGenerator.update({ location: value });\n        },\n        filters: {\n          structural: false\n        }\n      },\n      quantity: {\n        hidden: !create,\n        description: t`Enter initial quantity for this stock item`,\n        onValueChange: (value) => {\n          batchGenerator.update({ quantity: value });\n          setQuantity(value);\n        }\n      },\n      serial_numbers: {\n        field_type: 'string',\n        label: t`Serial Numbers`,\n        disabled: partInstance?.trackable == false,\n        description: t`Enter serial numbers for new stock (or leave blank)`,\n        required: false,\n        hidden: !create,\n        placeholderAutofill: true,\n        placeholder: serialGenerator.result && `${serialGenerator.result}+`\n      },\n      serial: {\n        placeholderAutofill: true,\n        placeholder: serialGenerator.result,\n        hidden:\n          create ||\n          partInstance.trackable == false ||\n          (stockItem?.quantity != undefined && stockItem?.quantity != 1)\n      },\n      batch: {\n        default: '',\n        placeholderAutofill: true,\n        placeholder: batchGenerator.result\n      },\n      status_custom_key: {\n        label: t`Stock Status`\n      },\n      expiry_date: {\n        icon: <IconCalendarExclamation />,\n        hidden: !globalSettings.isSet('STOCK_ENABLE_EXPIRY'),\n        value: expiryDate,\n        onValueChange: (value) => {\n          setExpiryDate(value);\n        }\n      },\n      purchase_price: {\n        icon: <IconCurrencyDollar />,\n        value: purchasePrice,\n        onValueChange: (value) => {\n          setPurchasePrice(value);\n        }\n      },\n      purchase_price_currency: {\n        icon: <IconCoins />,\n        default: globalSettings.getSetting('INVENTREE_DEFAULT_CURRENCY'),\n        value: purchasePriceCurrency,\n        onValueChange: (value) => {\n          setPurchasePriceCurrency(value);\n        }\n      },\n      packaging: {\n        icon: <IconPackage />\n      },\n      link: {\n        icon: <IconLink />\n      },\n      owner: {\n        icon: <IconUsersGroup />\n      },\n      delete_on_deplete: {}\n    };\n\n    // Remove the expiry date field if it is not enabled\n    if (!globalSettings.isSet('STOCK_ENABLE_EXPIRY')) {\n      delete fields.expiry_date;\n    }\n\n    if (!create) {\n      delete fields.serial_numbers;\n    }\n\n    return fields;\n  }, [\n    stockItem,\n    expiryDate,\n    partInstance,\n    partId,\n    globalSettings,\n    supplierPart,\n    create,\n    supplierPartId,\n    purchasePrice,\n    purchasePriceCurrency,\n    serialGenerator.result,\n    batchGenerator.result,\n    create\n  ]);\n}\n\n/**\n * Launch a form to create a new StockItem instance\n */\nexport function useCreateStockItem() {\n  const fields = useStockFields({\n    create: true,\n    modalId: 'create-stock-item'\n  });\n\n  return useCreateApiFormModal({\n    url: ApiEndpoints.stock_item_list,\n    fields: fields,\n    modalId: 'create-stock-item',\n    title: t`Add Stock Item`\n  });\n}\n\n/**\n * Form set for manually removing (uninstalling) a StockItem from an existing StockItem\n */\nexport function useStockItemUninstallFields(): ApiFormFieldSet {\n  return useMemo(() => {\n    return {\n      location: {\n        filters: {\n          structural: false\n        }\n      },\n      note: {}\n    };\n  }, []);\n}\n\n/**\n * Form set for manually installing a StockItem into an existing StockItem\n */\nexport function useStockItemInstallFields({\n  stockItem\n}: {\n  stockItem: any;\n}): ApiFormFieldSet {\n  const globalSettings = useGlobalSettingsState();\n\n  const [selectedPart, setSelectedPart] = useState<number | null>(null);\n\n  useEffect(() => {\n    setSelectedPart(null);\n  }, [stockItem]);\n\n  return useMemo(() => {\n    // Note: The 'part' field is not a part of the API endpoint, so we construct it manually\n    return {\n      part: {\n        field_type: 'related field',\n        required: true,\n        exclude: true,\n        label: t`Part`,\n        description: t`Select the part to install`,\n        model: ModelType.part,\n        api_url: apiUrl(ApiEndpoints.part_list),\n        onValueChange: (value) => {\n          setSelectedPart(value);\n        },\n        filters: {\n          trackable: true,\n          in_bom_for: globalSettings.isSet('STOCK_ENFORCE_BOM_INSTALLATION')\n            ? stockItem.part\n            : undefined\n        }\n      },\n      stock_item: {\n        disabled: !selectedPart,\n        filters: {\n          part_detail: true,\n          in_stock: true,\n          available: true,\n          tracked: true,\n          part: selectedPart ? selectedPart : undefined\n        }\n      },\n      quantity: {},\n      note: {}\n    };\n  }, [globalSettings, selectedPart, stockItem]);\n}\n\n/**\n * Form set for serializing an existing StockItem\n */\nexport function useStockItemSerializeFields({\n  partId,\n  trackable,\n  modalId\n}: {\n  partId: number;\n  trackable: boolean;\n  modalId: string;\n}): ApiFormFieldSet {\n  const serialGenerator = useSerialNumberGenerator({\n    modalId: modalId,\n    isEnabled: () => trackable,\n    initialQuery: {\n      part: partId\n    }\n  });\n\n  return useMemo(() => {\n    return {\n      quantity: {},\n      serial_numbers: {\n        placeholder: serialGenerator.result && `${serialGenerator.result}+`,\n        placeholderAutofill: true\n      },\n      destination: {}\n    };\n  }, [serialGenerator.result]);\n}\n\nfunction StockItemDefaultMove({\n  stockItem,\n  value\n}: Readonly<{\n  stockItem: any;\n  value: any;\n}>) {\n  const { data } = useSuspenseQuery({\n    queryKey: [\n      'location',\n      stockItem.part_detail?.default_location ??\n        stockItem.part_detail?.category_default_location\n    ],\n    queryFn: async () => {\n      const url = apiUrl(\n        ApiEndpoints.stock_location_list,\n        stockItem.part_detail?.default_location ??\n          stockItem.part_detail?.category_default_location\n      );\n\n      return api\n        .get(url)\n        .then((response) => {\n          switch (response.status) {\n            case 200:\n              return response.data;\n            default:\n              return null;\n          }\n        })\n        .catch(() => {\n          return null;\n        });\n    }\n  });\n\n  return (\n    <Flex gap='sm' justify='space-evenly' align='center'>\n      <Flex gap='sm' direction='column' align='center'>\n        <Text>\n          {value} x {stockItem.part_detail.name}\n        </Text>\n        <Thumbnail\n          src={stockItem.part_detail.thumbnail}\n          size={80}\n          align='center'\n        />\n      </Flex>\n      <Flex direction='column' gap='sm' align='center'>\n        <Text>{stockItem.location_detail?.pathstring ?? '-'}</Text>\n        <InvenTreeIcon icon='arrow_down' />\n        <Suspense fallback={<Skeleton width='150px' />}>\n          <Text>{data?.pathstring}</Text>\n        </Suspense>\n      </Flex>\n    </Flex>\n  );\n}\n\nfunction moveToDefault(\n  stockItem: any,\n  value: StockItemQuantity,\n  refresh: () => void\n) {\n  modals.openConfirmModal({\n    title: <StylishText>{t`Confirm Stock Transfer`}</StylishText>,\n    children: <StockItemDefaultMove stockItem={stockItem} value={value} />,\n    onConfirm: () => {\n      if (\n        stockItem.location === stockItem.part_detail?.default_location ||\n        stockItem.location === stockItem.part_detail?.category_default_location\n      ) {\n        return;\n      }\n      api\n        .post(apiUrl(ApiEndpoints.stock_transfer), {\n          items: [\n            {\n              pk: stockItem.pk,\n              quantity: value,\n              batch: stockItem.batch,\n              status: stockItem.status\n            }\n          ],\n          location:\n            stockItem.part_detail?.default_location ??\n            stockItem.part_detail?.category_default_location\n        })\n        .then((response) => {\n          refresh();\n          return response.data;\n        })\n        .catch(() => {\n          return null;\n        });\n    }\n  });\n}\n\ntype StockAdjustmentItemWithRecord = {\n  obj: any;\n} & StockAdjustmentItem;\n\ntype TableFieldRefreshFn = (idx: number) => void;\ntype TableFieldChangeFn = (idx: number, key: string, value: any) => void;\n\ntype StockRow = {\n  item: StockAdjustmentItemWithRecord;\n  idx: number;\n  changeFn: TableFieldChangeFn;\n  removeFn: TableFieldRefreshFn;\n};\n\nfunction StockOperationsRow({\n  props,\n  transfer = false,\n  changeStatus = false,\n  add = false,\n  setMax = false,\n  merge = false,\n  record\n}: {\n  props: TableFieldRowProps;\n  transfer?: boolean;\n  changeStatus?: boolean;\n  add?: boolean;\n  setMax?: boolean;\n  merge?: boolean;\n  record?: any;\n}) {\n  const statusOptions: ApiFormFieldChoice[] = useMemo(() => {\n    return (\n      StatusFilterOptions(ModelType.stockitem)()?.map((choice) => {\n        return {\n          value: choice.value,\n          display_name: choice.label\n        };\n      }) ?? []\n    );\n  }, []);\n\n  const [quantity, setQuantity] = useState<StockItemQuantity>(\n    add ? 0 : (props.item?.quantity ?? 0)\n  );\n\n  const [status, setStatus] = useState<number | undefined>(undefined);\n\n  const removeAndRefresh = () => {\n    props.removeFn(props.idx);\n  };\n\n  const callChangeFn = (idx: number, key: string, value: any) => {\n    setTimeout(() => props.changeFn(idx, key, value), 0);\n  };\n\n  const [packagingOpen, packagingHandlers] = useDisclosure(false, {\n    onOpen: () => {\n      if (transfer) {\n        callChangeFn(props.idx, 'packaging', record?.packaging || undefined);\n      }\n    },\n    onClose: () => {\n      if (transfer) {\n        callChangeFn(props.idx, 'packaging', undefined);\n      }\n    }\n  });\n\n  const [statusOpen, statusHandlers] = useDisclosure(false, {\n    onOpen: () => {\n      setStatus(record?.status_custom_key || record?.status || undefined);\n      props.changeFn(props.idx, 'status', record?.status || undefined);\n    },\n    onClose: () => {\n      setStatus(undefined);\n      callChangeFn(props.idx, 'status', undefined);\n    }\n  });\n\n  const stockString: string = useMemo(() => {\n    if (!record) {\n      return '-';\n    }\n\n    if (!record.serial) {\n      return `${record.quantity}`;\n    } else {\n      return `#${record.serial}`;\n    }\n  }, [record]);\n\n  return !record ? (\n    <div>{t`Loading...`}</div>\n  ) : (\n    <>\n      <Table.Tr>\n        <Table.Td>\n          <Stack gap='xs'>\n            <Flex gap='sm' align='center'>\n              <Thumbnail\n                size={40}\n                src={record.part_detail?.thumbnail}\n                align='center'\n              />\n              <div>{record.part_detail?.name}</div>\n            </Flex>\n            {props.rowErrors?.pk?.message && (\n              <Text c='red' size='xs'>\n                {props.rowErrors.pk.message}\n              </Text>\n            )}\n          </Stack>\n        </Table.Td>\n        <Table.Td>\n          <RenderStockLocation instance={record.location_detail} />\n        </Table.Td>\n        <Table.Td>{record.batch ? record.batch : '-'}</Table.Td>\n        <Table.Td>\n          <Group grow justify='space-between' wrap='nowrap'>\n            <Text>{stockString}</Text>\n            <StatusRenderer\n              status={record.status_custom_key}\n              type={ModelType.stockitem}\n            />\n          </Group>\n        </Table.Td>\n        {!merge && (\n          <Table.Td>\n            <StandaloneField\n              fieldName='quantity'\n              fieldDefinition={{\n                field_type: 'number',\n                value: quantity,\n                onValueChange: (value: any) => {\n                  setQuantity(value);\n                  props.changeFn(props.idx, 'quantity', value);\n                }\n              }}\n              error={props.rowErrors?.quantity?.message}\n            />\n          </Table.Td>\n        )}\n        <Table.Td>\n          <Flex gap='3px'>\n            {transfer && (\n              <ActionButton\n                onClick={() =>\n                  moveToDefault(record, props.item.quantity, removeAndRefresh)\n                }\n                icon={<InvenTreeIcon icon='default_location' />}\n                tooltip={t`Move to default location`}\n                tooltipAlignment='top'\n                disabled={\n                  !record.part_detail?.default_location &&\n                  !record.part_detail?.category_default_location\n                }\n              />\n            )}\n            {changeStatus && (\n              <ActionButton\n                size='sm'\n                icon={<InvenTreeIcon icon='status' />}\n                tooltip={t`Change Status`}\n                onClick={() => statusHandlers.toggle()}\n                variant={statusOpen ? 'filled' : 'transparent'}\n              />\n            )}\n            {transfer && (\n              <ActionButton\n                size='sm'\n                icon={<InvenTreeIcon icon='packaging' />}\n                tooltip={t`Adjust Packaging`}\n                onClick={() => packagingHandlers.toggle()}\n                variant={packagingOpen ? 'filled' : 'transparent'}\n              />\n            )}\n            <RemoveRowButton onClick={() => props.removeFn(props.idx)} />\n          </Flex>\n        </Table.Td>\n      </Table.Tr>\n      {changeStatus && (\n        <TableFieldExtraRow\n          visible={statusOpen}\n          onValueChange={(value: any) => {\n            setStatus(value);\n            props.changeFn(props.idx, 'status', value || undefined);\n          }}\n          fieldName='status'\n          fieldDefinition={{\n            field_type: 'choice',\n            label: t`Status`,\n            choices: statusOptions,\n            value: status\n          }}\n          defaultValue={status}\n        />\n      )}\n      {transfer && (\n        <TableFieldExtraRow\n          visible={transfer && packagingOpen}\n          onValueChange={(value: any) => {\n            props.changeFn(props.idx, 'packaging', value || undefined);\n          }}\n          fieldName='packaging'\n          fieldDefinition={{\n            field_type: 'string',\n            label: t`Packaging`\n          }}\n          defaultValue={record.packaging}\n        />\n      )}\n    </>\n  );\n}\n\ntype StockItemQuantity = number | '' | undefined;\n\ntype StockAdjustmentItem = {\n  pk: number;\n  quantity: StockItemQuantity;\n  batch?: string;\n  status?: number | '' | null;\n  packaging?: string;\n};\n\nfunction mapAdjustmentItems(items: any[]) {\n  const mappedItems: StockAdjustmentItemWithRecord[] = items.map((elem) => {\n    return {\n      pk: elem.pk,\n      quantity: elem.quantity,\n      batch: elem.batch || undefined,\n      status: elem.status || undefined,\n      packaging: elem.packaging || undefined,\n      obj: elem\n    };\n  });\n\n  return mappedItems;\n}\n\nfunction stockTransferFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  // Extract all location values from the items\n  const locations = [...new Set(items.map((item) => item.location))];\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: mapAdjustmentItems(items),\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item.pk];\n\n        return (\n          <StockOperationsRow\n            props={row}\n            transfer\n            changeStatus\n            setMax\n            key={record.pk}\n            record={record}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`Stock` },\n        { title: t`Move`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    location: {\n      value: locations.length === 1 ? locations[0] : undefined,\n      filters: {\n        structural: false\n      }\n    },\n    notes: {}\n  };\n  return fields;\n}\n\nfunction stockReturnFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  // Only include items that are currently *not* in stock\n  const records = Object.fromEntries(\n    items.filter((item) => !item.in_stock).map((item) => [item.pk, item])\n  );\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: mapAdjustmentItems(items),\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item.pk];\n\n        return (\n          <StockOperationsRow\n            props={row}\n            key={record.pk}\n            record={record}\n            transfer\n            changeStatus\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`Quantity` },\n        { title: t`Return`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    location: {\n      filters: {\n        structural: false\n      }\n    },\n    merge: {},\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockRemoveFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const initialValue = mapAdjustmentItems(items).map((elem) => {\n    return {\n      ...elem,\n      quantity: 0\n    };\n  });\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: initialValue,\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item.pk];\n\n        return (\n          <StockOperationsRow\n            props={row}\n            setMax\n            changeStatus\n            add\n            key={record.pk}\n            record={record}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: t`Remove`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockAddFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const initialValue = mapAdjustmentItems(items).map((elem) => {\n    return {\n      ...elem,\n      quantity: 0\n    };\n  });\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: initialValue,\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item.pk];\n\n        return (\n          <StockOperationsRow\n            changeStatus\n            props={row}\n            add\n            key={record.pk}\n            record={record}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: t`Add`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockCountFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const initialValue = mapAdjustmentItems(items);\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: initialValue,\n      modelRenderer: (row: TableFieldRowProps) => {\n        return (\n          <StockOperationsRow\n            props={row}\n            changeStatus\n            key={row.item.pk}\n            record={records[row.item.pk]}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: t`Count`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockChangeStatusFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  // Extract all status values from the items\n  const statusValues = [\n    ...new Set(items.map((item) => item.status_custom_key ?? item.status))\n  ];\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: items.map((elem) => {\n        return elem.pk;\n      }),\n      modelRenderer: (row: TableFieldRowProps) => {\n        return (\n          <StockOperationsRow\n            props={row}\n            key={row.item}\n            merge\n            record={records[row.item]}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: '', style: { width: '50px' } }\n      ]\n    },\n    status: {\n      value: statusValues.length === 1 ? statusValues[0] : undefined\n    },\n    note: {}\n  };\n\n  return fields;\n}\n\nfunction stockMergeFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: items.map((elem) => {\n        return {\n          item: elem.pk,\n          obj: elem\n        };\n      }),\n      modelRenderer: (row: TableFieldRowProps) => {\n        return (\n          <StockOperationsRow\n            props={row}\n            key={row.item.item}\n            merge\n            changeStatus\n            record={records[row.item.item]}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: t`Actions` }\n      ]\n    },\n    location: {\n      default: items[0]?.part_detail?.default_location,\n      filters: {\n        structural: false\n      }\n    },\n    notes: {},\n    allow_mismatched_suppliers: {},\n    allow_mismatched_status: {}\n  };\n\n  return fields;\n}\n\nfunction stockAssignFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: items.map((elem) => {\n        return {\n          item: elem.pk,\n          obj: elem\n        };\n      }),\n      modelRenderer: (row: TableFieldRowProps) => {\n        return (\n          <StockOperationsRow\n            props={row}\n            key={row.item.item}\n            merge\n            record={records[row.item.item]}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: '', style: { width: '50px' } }\n      ]\n    },\n    customer: {\n      filters: {\n        is_customer: true\n      }\n    },\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockDeleteFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: items.map((elem) => {\n        return elem.pk;\n      }),\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item];\n\n        return (\n          <StockOperationsRow\n            props={row}\n            key={record.pk}\n            merge\n            record={record}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: '', style: { width: '50px' } }\n      ]\n    }\n  };\n\n  return fields;\n}\n\ntype apiModalFunc = (props: ApiFormModalProps) => {\n  open: () => void;\n  close: () => void;\n  toggle: () => void;\n  modal: JSX.Element;\n};\n\nfunction useStockOperationModal({\n  items,\n  pk,\n  model,\n  refresh,\n  fieldGenerator,\n  endpoint,\n  filters,\n  title,\n  preFormContent,\n  successMessage,\n  modalFunc = useCreateApiFormModal\n}: {\n  items?: object;\n  pk?: number;\n  filters?: any;\n  model: ModelType | string;\n  refresh: () => void;\n  fieldGenerator: (items: any[]) => ApiFormFieldSet;\n  endpoint: ApiEndpoints;\n  title: string;\n  preFormContent?: JSX.Element;\n  successMessage?: string;\n  modalFunc?: apiModalFunc;\n}) {\n  const baseParams: any = {\n    part_detail: true,\n    location_detail: true,\n    cascade: false\n  };\n\n  const params = useMemo(() => {\n    const query_params: any = {\n      ...baseParams,\n      ...(filters ?? {})\n    };\n\n    query_params[model] =\n      pk === undefined && model === 'location' ? 'null' : pk;\n\n    return query_params;\n  }, [baseParams, filters, model, pk]);\n\n  const [opened, setOpened] = useState<boolean>(false);\n\n  const { data } = useQuery({\n    queryKey: ['stockitems', opened, model, pk, items, params],\n    queryFn: async () => {\n      if (items) {\n        // If a list of items is provided, use that directly\n        return Array.isArray(items) ? items : [items];\n      }\n\n      if (!pk || !opened) {\n        return [];\n      }\n\n      const url = apiUrl(ApiEndpoints.stock_item_list);\n\n      return api\n        .get(url, {\n          params: params\n        })\n        .then((response) => response.data ?? []);\n    }\n  });\n\n  const fields = useMemo(() => {\n    return fieldGenerator(data);\n  }, [data]);\n\n  return modalFunc({\n    url: endpoint,\n    fields: fields,\n    preFormContent: preFormContent,\n    title: title,\n    size: '80%',\n    successMessage: successMessage,\n    onFormSuccess: () => refresh(),\n    onClose: () => setOpened(false),\n    onOpen: () => setOpened(true)\n  });\n}\n\nexport function useAddStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockAddFields,\n    endpoint: ApiEndpoints.stock_add,\n    title: t`Add Stock`,\n    successMessage: t`Stock added`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Increase the quantity of the selected stock items by a given amount.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useRemoveStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockRemoveFields,\n    endpoint: ApiEndpoints.stock_remove,\n    title: t`Remove Stock`,\n    successMessage: t`Stock removed`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Decrease the quantity of the selected stock items by a given amount.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useTransferStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockTransferFields,\n    endpoint: ApiEndpoints.stock_transfer,\n    title: t`Transfer Stock`,\n    successMessage: t`Stock transferred`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Transfer selected items to the specified location.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useReturnStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockReturnFields,\n    endpoint: ApiEndpoints.stock_return,\n    title: t`Return Stock`,\n    successMessage: t`Stock returned`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Return selected items into stock, to the specified location.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useCountStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockCountFields,\n    endpoint: ApiEndpoints.stock_count,\n    title: t`Count Stock`,\n    successMessage: t`Stock counted`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Count the selected stock items, and adjust the quantity accordingly.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useChangeStockStatus(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockChangeStatusFields,\n    endpoint: ApiEndpoints.stock_change_status,\n    title: t`Change Stock Status`,\n    successMessage: t`Stock status changed`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Change the status of the selected stock items.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useMergeStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockMergeFields,\n    endpoint: ApiEndpoints.stock_merge,\n    title: t`Merge Stock`,\n    successMessage: t`Stock merged`,\n    preFormContent: (\n      <Alert title={t`Merge Stock Items`} color='yellow'>\n        <List>\n          <List.Item>{t`Merge operation cannot be reversed`}</List.Item>\n          <List.Item>{t`Tracking information may be lost when merging items`}</List.Item>\n          <List.Item>{t`Supplier information may be lost when merging items`}</List.Item>\n        </List>\n      </Alert>\n    )\n  });\n}\n\nexport function useAssignStockItem(props: StockOperationProps) {\n  // Filter items - only allow 'salable' items\n  const items = useMemo(() => {\n    return props.items?.filter((item) => item?.part_detail?.salable);\n  }, [props.items]);\n\n  return useStockOperationModal({\n    ...props,\n    items: items,\n    fieldGenerator: stockAssignFields,\n    endpoint: ApiEndpoints.stock_assign,\n    title: t`Assign Stock to Customer`,\n    successMessage: t`Stock assigned to customer`\n  });\n}\n\nexport function useDeleteStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockDeleteFields,\n    endpoint: ApiEndpoints.stock_item_list,\n    modalFunc: useDeleteApiFormModal,\n    title: t`Delete Stock Items`,\n    successMessage: t`Stock deleted`,\n    preFormContent: (\n      <Alert color='red'>\n        {t`This operation will permanently delete the selected stock items.`}\n      </Alert>\n    )\n  });\n}\n\nexport function stockLocationFields(): ApiFormFieldSet {\n  const fields: ApiFormFieldSet = {\n    parent: {\n      description: t`Parent stock location`,\n      required: false\n    },\n    name: {},\n    description: {},\n    structural: {},\n    external: {},\n    custom_icon: {\n      field_type: 'icon'\n    },\n    location_type: {}\n  };\n\n  return fields;\n}\n\n// Construct a set of fields for\nexport function useTestResultFields({\n  partId,\n  itemId,\n  templateId,\n  editing = false,\n  editTemplate = false\n}: {\n  partId: number;\n  itemId: number;\n  templateId: number | undefined;\n  editing?: boolean;\n  editTemplate?: boolean;\n}): ApiFormFieldSet {\n  // Valid field choices\n  const [choices, setChoices] = useState<any[]>([]);\n\n  // Field type for the \"value\" input\n  const [fieldType, setFieldType] = useState<'string' | 'choice'>('string');\n\n  const settings = useGlobalSettingsState();\n\n  const includeTestStation = useMemo(\n    () => settings.isSet('TEST_STATION_DATA'),\n    [settings]\n  );\n\n  return useMemo(() => {\n    const fields: ApiFormFieldSet = {\n      stock_item: {\n        value: itemId,\n        hidden: true\n      },\n      template: {\n        disabled: !editTemplate && !!templateId,\n        filters: {\n          include_inherited: true,\n          part: partId\n        },\n        onValueChange: (value: any, record: any) => {\n          // Adjust the type of the \"value\" field based on the selected template\n          if (record?.choices) {\n            const _choices: string[] = record.choices.split(',');\n\n            if (_choices.length > 0) {\n              setChoices(\n                _choices.map((choice) => {\n                  return {\n                    label: choice.trim(),\n                    value: choice.trim()\n                  };\n                })\n              );\n              setFieldType('choice');\n            } else {\n              setChoices([]);\n              setFieldType('string');\n            }\n          }\n        }\n      },\n      result: {},\n      value: {\n        field_type: fieldType,\n        choices: fieldType === 'choice' ? choices : undefined\n      },\n      attachment: {},\n      notes: {},\n      started_datetime: {\n        hidden: !includeTestStation\n      },\n      finished_datetime: {\n        hidden: !includeTestStation\n      },\n      test_station: {\n        hidden: !includeTestStation\n      }\n    };\n\n    if (editing) {\n      // Prevent changing uploaded attachments\n      delete fields.attachment;\n    }\n\n    return fields;\n  }, [\n    choices,\n    editing,\n    editTemplate,\n    fieldType,\n    partId,\n    itemId,\n    templateId,\n    includeTestStation\n  ]);\n}\n\n/**\n * Modal form for finding a particular stock item by serial number\n */\nexport function useFindSerialNumberForm({\n  partId\n}: {\n  partId: number;\n}) {\n  const navigate = useNavigate();\n\n  return useApiFormModal({\n    url: apiUrl(ApiEndpoints.stock_item_list),\n    fetchInitialData: false,\n    method: 'GET',\n    title: t`Find Serial Number`,\n    fields: {\n      serial: {},\n      part_tree: {\n        value: partId,\n        hidden: true,\n        field_type: 'integer'\n      }\n    },\n    checkClose: (data, form) => {\n      if (!data || data?.length == 0) {\n        form.setError('serial', { message: t`No matching items` });\n        return false;\n      }\n\n      if (data.length > 1) {\n        form.setError('serial', {\n          message: t`Multiple matching items`\n        });\n        return false;\n      }\n\n      if (data[0].pk) {\n        return true;\n      } else {\n        form.setError('serial', {\n          message: t`Invalid response from server`\n        });\n        return false;\n      }\n    },\n    onFormSuccess: (data) => {\n      if (data.length == 1 && data[0].pk) {\n        navigate(getDetailUrl(ModelType.stockitem, data[0].pk));\n      }\n    }\n  });\n}\n","import { useMantineColorScheme, useMantineTheme } from '@mantine/core';\nimport { useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useShallow } from 'zustand/react/shallow';\nimport { api, queryClient } from '../../App';\nimport { useLocalState } from '../../states/LocalState';\nimport {\n  useGlobalSettingsState,\n  useUserSettingsState\n} from '../../states/SettingsStates';\nimport { useUserState } from '../../states/UserState';\n\nimport { ModelInformationDict } from '@lib/enums/ModelInformation';\nimport {\n  INVENTREE_MANTINE_VERSION,\n  INVENTREE_PLUGIN_VERSION,\n  INVENTREE_REACT_VERSION,\n  type InvenTreePluginContext\n} from '@lib/types/Plugins';\nimport { i18n } from '@lingui/core';\nimport {\n  useAddStockItem,\n  useAssignStockItem,\n  useChangeStockStatus,\n  useCountStockItem,\n  useDeleteStockItem,\n  useMergeStockItem,\n  useRemoveStockItem,\n  useReturnStockItem,\n  useTransferStockItem\n} from '../../forms/StockForms';\nimport {\n  useBulkEditApiFormModal,\n  useCreateApiFormModal,\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { RenderInstance } from '../render/Instance';\n\nexport const useInvenTreeContext = () => {\n  const [locale, host] = useLocalState(useShallow((s) => [s.language, s.host]));\n  const navigate = useNavigate();\n  const user = useUserState();\n  const { colorScheme } = useMantineColorScheme();\n  const theme = useMantineTheme();\n  const globalSettings = useGlobalSettingsState();\n  const userSettings = useUserSettingsState();\n\n  const contextData = useMemo<InvenTreePluginContext>(() => {\n    return {\n      version: {\n        inventree: INVENTREE_PLUGIN_VERSION,\n        react: INVENTREE_REACT_VERSION,\n        reactDom: INVENTREE_REACT_VERSION,\n        mantine: INVENTREE_MANTINE_VERSION\n      },\n      user: user,\n      host: host,\n      i18n: i18n,\n      locale: locale,\n      api: api,\n      queryClient: queryClient,\n      navigate: navigate,\n      globalSettings: globalSettings,\n      userSettings: userSettings,\n      modelInformation: ModelInformationDict,\n      renderInstance: RenderInstance,\n      theme: theme,\n      colorScheme: colorScheme,\n      forms: {\n        bulkEdit: useBulkEditApiFormModal,\n        create: useCreateApiFormModal,\n        delete: useDeleteApiFormModal,\n        edit: useEditApiFormModal,\n        stockActions: {\n          addStock: useAddStockItem,\n          assignStock: useAssignStockItem,\n          changeStatus: useChangeStockStatus,\n          countStock: useCountStockItem,\n          deleteStock: useDeleteStockItem,\n          mergeStock: useMergeStockItem,\n          removeStock: useRemoveStockItem,\n          transferStock: useTransferStockItem,\n          returnStock: useReturnStockItem\n        }\n      }\n    };\n  }, [\n    user,\n    host,\n    api,\n    locale,\n    queryClient,\n    navigate,\n    globalSettings,\n    userSettings,\n    theme,\n    colorScheme\n  ]);\n\n  return contextData;\n};\n","import type { InvenTreePluginContext } from '@lib/types/Plugins';\nimport { generateUrl } from '../../functions/urls';\nimport { useLocalState } from '../../states/LocalState';\n\n/*\n * Load an external plugin source from a URL.\n */\nexport async function loadExternalPluginSource(source: string) {\n  source = source.trim();\n\n  // If no source is provided, clear the plugin content\n  if (!source) {\n    return null;\n  }\n\n  const url = generateUrl(source);\n\n  const module = await import(/* @vite-ignore */ url)\n    .catch((error) => {\n      console.error(`ERR: Failed to load plugin from ${url}:`, error);\n      return null;\n    })\n    .then((module) => {\n      return module;\n    });\n\n  return module;\n}\n\n/*\n * Find a named function in an external plugin source.\n */\nexport async function findExternalPluginFunction(\n  source: string,\n  functionName: string\n): Promise<Function | null> {\n  const { getHost } = useLocalState.getState();\n\n  // Extract pathstring from the source URL\n  // Use the specified host unless the source is already a full URL\n  const url = new URL(source, getHost());\n\n  // If the pathname contains a ':' character, it indicates a function name\n  // but we need to remove it for the URL lookup to work correctly\n  if (url.pathname.includes(':')) {\n    const parts = url.pathname.split(':');\n    source = parts[0]; // Use the first part as the source URL\n    functionName = parts[1] || functionName; // Use the second part as the\n    url.pathname = source; // Update the pathname to the source URL\n  }\n\n  const module = await loadExternalPluginSource(url.toString());\n\n  if (module?.[functionName]) {\n    return module[functionName];\n  }\n\n  return null;\n}\n\n// Attempt to call an external plugin function, given the source URL and function name\nexport async function callExternalPluginFunction(\n  source: string,\n  functionName: string,\n  context: InvenTreePluginContext\n): Promise<any> {\n  findExternalPluginFunction(source, functionName).then((func) => {\n    if (func) {\n      return func(context);\n    }\n  });\n}\n","import { t } from '@lingui/core/macro';\nimport { Alert, Stack, Text } from '@mantine/core';\nimport { IconExclamationCircle } from '@tabler/icons-react';\nimport {\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState\n} from 'react';\n\nimport type { TemplateI } from '../../tables/settings/TemplateTable';\nimport type {\n  EditorComponent,\n  PreviewAreaComponent,\n  PreviewAreaRef\n} from '../editors/TemplateEditor/TemplateEditor';\nimport type {\n  PluginUIFuncWithoutInvenTreeContextType,\n  TemplateEditorUIFeature,\n  TemplatePreviewUIFeature\n} from './PluginUIFeatureTypes';\n\n/**\n * Enumeration for available plugin UI feature types.\n */\nexport enum PluginUIFeatureType {\n  spotlight_action = 'spotlight_action',\n  dashboard = 'dashboard',\n  panel = 'panel',\n  template_editor = 'template_editor',\n  template_preview = 'template_preview',\n  navigation = 'navigation'\n}\n\n/**\n * Type definition for a UI component which can be loaded via plugin.\n * Ref: src/backend/InvenTree/plugin/base/ui/serializers.py:PluginUIFeatureSerializer\n *\n * @param plugin_name: The name of the plugin\n * @param feature_type: The type of the UI feature (see PluginUIFeatureType)\n * @param key: The unique key for the feature (used to identify the feature in the DOM)\n * @param title: The title of the feature (human readable)\n * @param description: A description of the feature (human readable, optional)\n * @param options: Additional options for the feature (optional, depends on the feature type)\n * @param context: Additional context data passed to the rendering function (optional)\n * @param source: The source of the feature (must point to an accessible javascript module)\n *\n */\nexport interface PluginUIFeature {\n  plugin_name: string;\n  feature_type: PluginUIFeatureType;\n  key: string;\n  title: string;\n  description?: string;\n  icon?: string;\n  options?: any;\n  context?: any;\n  source: string;\n}\n\nexport const getPluginTemplateEditor = (\n  func: PluginUIFuncWithoutInvenTreeContextType<TemplateEditorUIFeature>,\n  template: TemplateI\n) =>\n  forwardRef((props, ref) => {\n    const elRef = useRef<HTMLDivElement | null>(null);\n    const [error, setError] = useState<string | undefined>(undefined);\n\n    const initialCodeRef = useRef<string | null>(null);\n    const setCodeRef = useRef<((code: string) => void) | null>(null);\n    const getCodeRef = useRef<(() => string) | null>(null);\n\n    useImperativeHandle(ref, () => ({\n      setCode: (code) => {\n        // if the editor is not yet initialized, store the initial code in a ref to set it later\n        if (setCodeRef.current) {\n          setCodeRef.current(code);\n        } else {\n          initialCodeRef.current = code;\n        }\n      },\n      getCode: () => getCodeRef.current?.()\n    }));\n\n    useEffect(() => {\n      let unmountHandler: (() => void) | undefined;\n      (async () => {\n        try {\n          unmountHandler = await func({\n            ref: elRef.current!,\n            registerHandlers: ({ getCode, setCode }) => {\n              setCodeRef.current = setCode;\n              getCodeRef.current = getCode;\n\n              if (initialCodeRef.current) {\n                setCode(initialCodeRef.current);\n              }\n            },\n            template\n          });\n        } catch (error) {\n          setError(t`Error occurred while rendering the template editor.`);\n          console.error(error);\n        }\n      })();\n\n      return () => {\n        if (typeof unmountHandler === 'function') {\n          unmountHandler();\n        }\n      };\n    }, []);\n\n    return (\n      <Stack gap='xs' style={{ display: 'flex', flex: 1 }}>\n        {error && (\n          <Alert\n            color='red'\n            title={t`Error Loading Plugin Editor`}\n            icon={<IconExclamationCircle />}\n          >\n            <Text>{error}</Text>\n          </Alert>\n        )}\n        <div ref={elRef as any} style={{ display: 'flex', flex: 1 }} />\n      </Stack>\n    );\n  }) as EditorComponent;\n\nexport const getPluginTemplatePreview = (\n  func: PluginUIFuncWithoutInvenTreeContextType<TemplatePreviewUIFeature>,\n  template: TemplateI\n) =>\n  forwardRef((props, ref) => {\n    const elRef = useRef<HTMLDivElement | null>(null);\n    const [error, setError] = useState<string | undefined>(undefined);\n\n    const updatePreviewRef = useRef<PreviewAreaRef['updatePreview'] | null>(\n      null\n    );\n\n    useImperativeHandle(ref, () => ({\n      updatePreview: (...args) => updatePreviewRef.current?.(...args)\n    }));\n\n    useEffect(() => {\n      (async () => {\n        try {\n          func({\n            ref: elRef.current!,\n            registerHandlers: ({ updatePreview }) => {\n              updatePreviewRef.current = updatePreview;\n            },\n            template\n          });\n        } catch (error) {\n          setError(t`Error occurred while rendering the template preview.`);\n          console.error(error);\n        }\n      })();\n    }, []);\n\n    return (\n      <Stack gap='xs' style={{ display: 'flex', flex: 1 }}>\n        {error && (\n          <Alert\n            color='red'\n            title={t`Error Loading Plugin Preview`}\n            icon={<IconExclamationCircle />}\n          >\n            <Text>{error}</Text>\n          </Alert>\n        )}\n        <div ref={elRef as any} style={{ display: 'flex', flex: 1 }} />\n      </Stack>\n    );\n  }) as PreviewAreaComponent;\n"],"names":["useSuspenseQuery","options","queryClient","useBaseQuery","defaultThrowOnError","QueryObserver","__iconNode","IconCalendarExclamation","createReactComponent","IconCoins","INVENTREE_PLUGIN_VERSION","__INVENTREE_LIB_VERSION__","INVENTREE_REACT_VERSION","__INVENTREE_REACT_VERSION__","INVENTREE_MANTINE_VERSION","__INVENTREE_MANTINE_VERSION__","RemoveRowButton","onClick","tooltip","_i18n","_","id","tooltipAlignment","jsx","ActionButton","InvenTreeIcon","useGenerator","props","modalState","useModalState","result","setResult","useState","query","setQuery","debouncedQuery","useDebouncedValue","isEnabled","useCallback","modalId","isModalOpen","openModals","update","params","overwrite","useQuery","enabled","queryKey","key","endpoint","initialQuery","refetchOnMount","refetchOnWindowFocus","throwOnError","error","console","queryFn","generatorQuery","api","post","apiUrl","then","response","value","data","onGenerate","useBatchCodeGenerator","ApiEndpoints","generate_batch_code","useSerialNumberGenerator","generate_serial_number","useStockFields","partId","stockItem","create","supplierPartId","pricing","globalSettings","useGlobalSettingsState","partInstance","setPartInstance","supplierPart","setSupplierPart","expiryDate","setExpiryDate","quantity","setQuantity","purchasePrice","setPurchasePrice","purchasePriceCurrency","setPurchasePriceCurrency","batchGenerator","part","serialGenerator","useEffect","priceBreak","Object","entries","sort","a","b","Number","parseInt","find","br","getSetting","useMemo","fields","pk","disabled","filters","virtual","active","undefined","onValueChange","record","expiry_days","default_expiry","dayjs","add","format","supplier_part","hidden","purchaseable","part_detail","supplier_detail","adjustFilters","adjust","use_pack_size","description","location","structural","serial_numbers","field_type","label","trackable","required","placeholderAutofill","placeholder","serial","batch","default","status_custom_key","expiry_date","icon","isSet","purchase_price","IconCurrencyDollar","purchase_price_currency","packaging","IconPackage","link","IconLink","owner","IconUsersGroup","delete_on_deplete","useStockItemUninstallFields","note","useStockItemInstallFields","selectedPart","setSelectedPart","exclude","model","ModelType","api_url","part_list","in_bom_for","stock_item","in_stock","available","tracked","useStockItemSerializeFields","destination","StockItemDefaultMove","default_location","category_default_location","url","stock_location_list","get","status","catch","Flex","jsxs","Text","name","Thumbnail","thumbnail","location_detail","pathstring","Suspense","Skeleton","moveToDefault","refresh","modals","openConfirmModal","title","StylishText","children","onConfirm","stock_transfer","items","StockOperationsRow","transfer","changeStatus","setMax","merge","statusOptions","StatusFilterOptions","stockitem","map","choice","display_name","item","setStatus","removeAndRefresh","removeFn","idx","callChangeFn","setTimeout","changeFn","packagingOpen","packagingHandlers","useDisclosure","onOpen","onClose","statusOpen","statusHandlers","stockString","Fragment","Table","Stack","rowErrors","message","RenderStockLocation","Group","StatusRenderer","StandaloneField","toggle","TableFieldExtraRow","choices","mapAdjustmentItems","elem","obj","stockTransferFields","records","fromEntries","locations","Set","modelRenderer","row","headers","style","width","length","notes","stockReturnFields","filter","stockRemoveFields","stockAddFields","stockCountFields","stockChangeStatusFields","statusValues","stockMergeFields","allow_mismatched_suppliers","allow_mismatched_status","stockAssignFields","customer","is_customer","stockDeleteFields","useStockOperationModal","fieldGenerator","preFormContent","successMessage","modalFunc","useCreateApiFormModal","baseParams","cascade","query_params","opened","setOpened","Array","isArray","stock_item_list","size","onFormSuccess","useAddStockItem","stock_add","Alert","useRemoveStockItem","stock_remove","useTransferStockItem","useReturnStockItem","stock_return","useCountStockItem","stock_count","useChangeStockStatus","stock_change_status","useMergeStockItem","stock_merge","List","useAssignStockItem","salable","stock_assign","useDeleteStockItem","useDeleteApiFormModal","stockLocationFields","parent","external","custom_icon","location_type","useTestResultFields","itemId","templateId","editing","editTemplate","setChoices","fieldType","setFieldType","settings","includeTestStation","template","include_inherited","_choices","split","trim","attachment","started_datetime","finished_datetime","test_station","useFindSerialNumberForm","navigate","useNavigate","useApiFormModal","fetchInitialData","method","part_tree","checkClose","form","setError","getDetailUrl","useInvenTreeContext","locale","host","useLocalState","useShallow","s","language","user","useUserState","colorScheme","useMantineColorScheme","theme","useMantineTheme","userSettings","useUserSettingsState","version","inventree","react","reactDom","mantine","i18n","modelInformation","ModelInformationDict","renderInstance","RenderInstance","forms","bulkEdit","useBulkEditApiFormModal","delete","edit","useEditApiFormModal","stockActions","addStock","assignStock","countStock","deleteStock","mergeStock","removeStock","transferStock","returnStock","loadExternalPluginSource","source","generateUrl","module","findExternalPluginFunction","functionName","getHost","getState","URL","pathname","includes","parts","toString","callExternalPluginFunction","context","func","PluginUIFeatureType","spotlight_action","dashboard","panel","template_editor","template_preview","navigation","getPluginTemplateEditor","forwardRef","ref","elRef","useRef","initialCodeRef","setCodeRef","getCodeRef","useImperativeHandle","setCode","code","current","getCode","unmountHandler","registerHandlers","display","flex","IconExclamationCircle","getPluginTemplatePreview","updatePreviewRef","updatePreview","args"],"mappings":"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","x_google_ignoreList":[0,1,2]}