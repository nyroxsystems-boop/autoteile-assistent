import{ag as V,r as d,ab as e,ao as c,j as t,bb as h,a7 as B,b1 as r,an as G}from"./index-Db7AGPIq.js";import{a as g,c as N,b as U,k as z,d as H}from"./Filter-BgnAqEQC.js";import{u as L,R as q,j as I,c as P,I as O}from"./InvenTreeTable-DmN557zY.js";import{Y as _}from"./YesNoButton-BaVgP5u9.js";import{d as j,e as X,f as J,g as K}from"./SalesOrderForms-DoG2xqUe.js";import{S as Q,a as A,L as Z,d as W}from"./ColumnRenderers-BUH0stTX.js";import{a as $,ac as ee,H as se}from"./ThemeContext-CxdCkKtz.js";function de({showOrderInfo:a=!1,tableName:R,customerId:u,orderId:m,filters:y}){const i=V(),F=$(),l=L(R??"sales-order-shipment"),[o,n]=d.useState({}),M=j({customerId:u}),v=j({customerId:u,pending:!o.shipment_date}),T=X({}),b=g({url:c.sales_order_shipment_list,fields:M,title:e._({id:"qU3Y7+"}),table:l,initialData:{order:m}}),k=N({url:c.sales_order_shipment_list,pk:o.pk,title:e._({id:"YAsuZ2"}),table:l}),S=U({url:c.sales_order_shipment_list,pk:o.pk,fields:v,title:e._({id:"rX/5YH"}),table:l}),C=J({shipmentId:o.pk,onSuccess:()=>{l.refreshTable()}}),f=K({shipmentId:o.pk,onSuccess:()=>{l.refreshTable()}}),x=g({url:c.sales_order_shipment_complete,pk:o.pk,fields:T,title:e._({id:"/IxVda"}),table:l,focus:"tracking_number",initialData:{...o,shipment_date:z().format("YYYY-MM-DD")}}),w=d.useMemo(()=>[{accessor:"customer",title:e._({id:"876pfE"}),switchable:!0,sortable:!0,hidden:!a,render:s=>t.jsx(W,{company:s.customer_detail})},{switchable:!1,accessor:"order_detail.reference",title:e._({id:"LozYBo"}),hidden:!a,sortable:!1},Q({switchable:!0,model:h.salesorder,accessor:"order_detail.status",title:e._({id:"acIJ41"}),hidden:!a}),{accessor:"reference",title:e._({id:"Dwgrby"}),switchable:!1,sortable:!0},{accessor:"allocated_items",sortable:!0,switchable:!1,title:e._({id:"BzfzPK"})},{accessor:"checked",title:e._({id:"VSGGki"}),switchable:!0,sortable:!1,render:s=>t.jsx(_,{value:!!s.checked_by})},{accessor:"shipped",title:e._({id:"AoOqHM"}),switchable:!0,sortable:!1,render:s=>t.jsx(_,{value:!!s.shipment_date})},{accessor:"delivered",title:e._({id:"BTOhSm"}),switchable:!0,sortable:!1,render:s=>t.jsx(_,{value:!!s.delivery_date})},A({accessor:"shipment_date",title:e._({id:"MFQxyA"})}),A({accessor:"delivery_date",title:e._({id:"ovm9ir"})}),{accessor:"tracking_number"},{accessor:"invoice_number"},Z({accessor:"link"})],[a]),Y=d.useCallback(s=>{const p=!!s.shipment_date;return[{hidden:!!s.checked_by||!i.hasChangeRole(r.sales_order),title:e._({id:"+/tsLo"}),color:"blue",icon:t.jsx(B,{}),onClick:()=>{n(s),C.open()}},{hidden:p||!s.checked_by||!i.hasChangeRole(r.sales_order),title:e._({id:"0NN8nM"}),color:"red",icon:t.jsx(ee,{}),onClick:()=>{n(s),f.open()}},{hidden:p||!i.hasChangeRole(r.sales_order),title:e._({id:"/IxVda"}),color:"green",icon:t.jsx(se,{}),onClick:()=>{n(s),x.open()}},q({hidden:!i.hasChangeRole(r.sales_order),tooltip:e._({id:"MPjEsC"}),onClick:()=>{n(s),S.open()}}),I({hidden:p||!i.hasDeleteRole(r.sales_order),tooltip:e._({id:"whI1i/"}),onClick:()=>{n(s),k.open()}}),P({title:e._({id:"iV6RGP"}),modelType:h.salesorder,modelId:s.order,hidden:!s.order||!a||!i.hasViewRole(r.sales_order),navigate:F})]},[a,i]),D=d.useMemo(()=>m?[t.jsx(H,{tooltip:e._({id:"77d67d"}),hidden:!i.hasAddRole(r.sales_order),onClick:()=>{b.open()}},"add-shipment")]:[],[m,i]),E=d.useMemo(()=>[{name:"checked",label:e._({id:"VSGGki"}),description:e._({id:"xNtT7F"})},{name:"shipped",label:e._({id:"AoOqHM"}),description:e._({id:"zxYkrg"})},{name:"delivered",label:e._({id:"BTOhSm"}),description:e._({id:"DOexmc"})}],[]);return t.jsxs(t.Fragment,{children:[b.modal,S.modal,C.modal,k.modal,f.modal,x.modal,t.jsx(O,{url:G(c.sales_order_shipment_list),tableState:l,columns:w,props:{tableActions:D,tableFilters:E,modelType:h.salesordershipment,enableSelection:!0,enableReports:!0,rowActions:Y,params:{order:m,order_detail:!0,customer_detail:a,...y}}})]})}export{de as S};
//# sourceMappingURL=SalesOrderShipmentTable-B57Wq2FS.js.map
