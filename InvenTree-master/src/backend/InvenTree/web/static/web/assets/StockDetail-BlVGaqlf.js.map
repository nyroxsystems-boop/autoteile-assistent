{"version":3,"file":"StockDetail-BlVGaqlf.js","sources":["../../../../../../frontend/node_modules/@tabler/icons-react/dist/esm/icons/IconBoxPadding.mjs","../../../../../../frontend/src/tables/stock/InstalledItemsTable.tsx","../../../../../../frontend/src/tables/stock/StockItemTestResultTable.tsx","../../../../../../frontend/src/tables/stock/StockTrackingTable.tsx","../../../../../../frontend/src/pages/stock/StockDetail.tsx"],"sourcesContent":["/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M8 16v.01\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M8 12v.01\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M8 8v.01\", \"key\": \"svg-3\" }], [\"path\", { \"d\": \"M16 16v.01\", \"key\": \"svg-4\" }], [\"path\", { \"d\": \"M16 12v.01\", \"key\": \"svg-5\" }], [\"path\", { \"d\": \"M16 8v.01\", \"key\": \"svg-6\" }], [\"path\", { \"d\": \"M12 8v.01\", \"key\": \"svg-7\" }], [\"path\", { \"d\": \"M12 16v.01\", \"key\": \"svg-8\" }]];\nconst IconBoxPadding = createReactComponent(\"outline\", \"box-padding\", \"BoxPadding\", __iconNode);\n\nexport { __iconNode, IconBoxPadding as default };\n//# sourceMappingURL=IconBoxPadding.mjs.map\n","import { t } from '@lingui/core/macro';\nimport { Skeleton } from '@mantine/core';\nimport { IconUnlink } from '@tabler/icons-react';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { AddItemButton } from '@lib/components/AddItemButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport { formatDecimal } from '@lib/functions/Formatting';\nimport type { TableColumn } from '@lib/types/Tables';\nimport {\n  useStockItemInstallFields,\n  useStockItemUninstallFields\n} from '../../forms/StockForms';\nimport { useCreateApiFormModal } from '../../hooks/UseForm';\nimport { useTable } from '../../hooks/UseTable';\nimport { useUserState } from '../../states/UserState';\nimport { PartColumn, StatusColumn } from '../ColumnRenderers';\nimport { InvenTreeTable } from '../InvenTreeTable';\n\nexport default function InstalledItemsTable({\n  stockItem\n}: Readonly<{\n  stockItem: any;\n}>) {\n  const table = useTable('stock_item_install');\n  const user = useUserState();\n\n  const installItemFields = useStockItemInstallFields({\n    stockItem: stockItem\n  });\n\n  const installItem = useCreateApiFormModal({\n    url: apiUrl(ApiEndpoints.stock_install),\n    pk: stockItem.pk,\n    title: t`Install Item`,\n    table: table,\n    successMessage: t`Item installed`,\n    fields: installItemFields\n  });\n\n  const [selectedRecord, setSelectedRecord] = useState<any>({});\n\n  const uninstallItemFields = useStockItemUninstallFields();\n\n  const uninstallItem = useCreateApiFormModal({\n    url: apiUrl(ApiEndpoints.stock_uninstall),\n    pk: selectedRecord.pk,\n    title: t`Uninstall Item`,\n    table: table,\n    successMessage: t`Item uninstalled`,\n    fields: uninstallItemFields,\n    initialData: {\n      location: stockItem.location ?? stockItem.part_detail?.default_location\n    }\n  });\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    return [\n      PartColumn({\n        part: 'part_detail'\n      }),\n      {\n        accessor: 'quantity',\n        switchable: false,\n        render: (record: any) => {\n          let text = formatDecimal(record.quantity);\n\n          if (record.serial && record.quantity == 1) {\n            text = `# ${record.serial}`;\n          }\n\n          return text;\n        }\n      },\n      {\n        accessor: 'batch',\n        switchable: false\n      },\n      StatusColumn({ model: ModelType.stockitem })\n    ];\n  }, []);\n\n  const tableActions = useMemo(() => {\n    return [\n      <AddItemButton\n        key='install'\n        tooltip={t`Install Item`}\n        onClick={() => {\n          installItem.open();\n        }}\n        hidden={\n          !user.hasChangeRole(UserRoles.stock) ||\n          stockItem.is_building ||\n          stockItem.part_detail?.assembly != true\n        }\n      />\n    ];\n  }, [stockItem, user]);\n\n  const rowActions = useCallback(\n    (record: any) => {\n      return [\n        {\n          title: t`Uninstall`,\n          tooltip: t`Uninstall stock item`,\n          onClick: () => {\n            setSelectedRecord(record);\n            uninstallItem.open();\n          },\n          icon: <IconUnlink />,\n          hidden: !user.hasChangeRole(UserRoles.stock)\n        }\n      ];\n    },\n    [user]\n  );\n\n  return (\n    <>\n      {installItem.modal}\n      {uninstallItem.modal}\n      {stockItem.pk ? (\n        <InvenTreeTable\n          url={apiUrl(ApiEndpoints.stock_item_list)}\n          tableState={table}\n          columns={tableColumns}\n          props={{\n            tableActions: tableActions,\n            enableSelection: true,\n            enableLabels: true,\n            enableReports: true,\n            rowActions: rowActions,\n            modelType: ModelType.stockitem,\n            params: {\n              belongs_to: stockItem.pk,\n              part_detail: true\n            }\n          }}\n        />\n      ) : (\n        <Skeleton />\n      )}\n    </>\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Badge, Group, Text, Tooltip } from '@mantine/core';\nimport { showNotification } from '@mantine/notifications';\nimport {\n  IconCircleCheck,\n  IconCirclePlus,\n  IconInfoCircle\n} from '@tabler/icons-react';\nimport { useQuery } from '@tanstack/react-query';\nimport { DataTable, type DataTableRowExpansionProps } from 'mantine-datatable';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { AddItemButton } from '@lib/components/AddItemButton';\nimport {\n  type RowAction,\n  RowActions,\n  RowDeleteAction,\n  RowEditAction\n} from '@lib/components/RowActions';\nimport { PassFailButton } from '@lib/components/YesNoButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { ApiFormFieldSet } from '@lib/types/Forms';\nimport type { TableColumn } from '@lib/types/Tables';\nimport { AttachmentLink } from '../../components/items/AttachmentLink';\nimport { useApi } from '../../contexts/ApiContext';\nimport { formatDate } from '../../defaults/formatters';\nimport { useTestResultFields } from '../../forms/StockForms';\nimport {\n  useCreateApiFormModal,\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { useTable } from '../../hooks/UseTable';\nimport { useGlobalSettingsState } from '../../states/SettingsStates';\nimport { useUserState } from '../../states/UserState';\nimport {\n  DateColumn,\n  DescriptionColumn,\n  NoteColumn,\n  UserColumn\n} from '../ColumnRenderers';\nimport { InvenTreeTable } from '../InvenTreeTable';\nimport RowExpansionIcon from '../RowExpansionIcon';\n\nexport default function StockItemTestResultTable({\n  partId,\n  itemId\n}: Readonly<{\n  partId: number;\n  itemId: number;\n}>) {\n  const api = useApi();\n  const user = useUserState();\n  const table = useTable('stocktests');\n\n  const globalSettings = useGlobalSettingsState();\n  const includeTestStation = useMemo(\n    () => globalSettings.isSet('TEST_STATION_DATA'),\n    [globalSettings]\n  );\n  // Fetch the test templates required for this stock item\n  const { data: testTemplates } = useQuery({\n    queryKey: ['stocktesttemplates', partId, itemId],\n    queryFn: async () => {\n      if (!partId) {\n        return [];\n      }\n\n      return api\n        .get(apiUrl(ApiEndpoints.part_test_template_list), {\n          params: {\n            part: partId,\n            include_inherited: true,\n            enabled: true\n          }\n        })\n        .then((response) => response.data);\n    }\n  });\n\n  useEffect(() => {\n    table.refreshTable();\n  }, [testTemplates]);\n\n  // Format the test results based on the returned data\n  const formatRecords = useCallback(\n    (records: any[]): any[] => {\n      // Construct a list of test templates\n      const results =\n        testTemplates?.map((template: any) => {\n          return {\n            ...template,\n            templateId: template.pk,\n            results: []\n          };\n        }) ?? [];\n\n      // If any of the tests results point to templates which we do not have, add them in\n      records.forEach((record) => {\n        if (!results.find((r: any) => r.templateId == record.template)) {\n          results.push({\n            ...record.template_detail,\n            templateId: record.template,\n            results: []\n          });\n        }\n      });\n\n      // Iterate through the returned records\n      // Note that the results are sorted by oldest first,\n      // to ensure that the most recent result is displayed \"on top\"\n      records\n        .sort((a: any, b: any) => {\n          return a.pk > b.pk ? 1 : -1;\n        })\n        .forEach((record) => {\n          // Find matching template\n          const idx = results.findIndex(\n            (r: any) => r.templateId == record.template\n          );\n          if (idx >= 0) {\n            results[idx] = {\n              ...results[idx],\n              ...record\n            };\n\n            results[idx].results.push(record);\n          }\n        });\n\n      return results;\n    },\n    [partId, itemId, testTemplates]\n  );\n\n  const constructTableColumns = useCallback(\n    (child: boolean) => {\n      return [\n        {\n          accessor: 'test',\n          title: t`Test`,\n          switchable: false,\n          sortable: true,\n          render: (record: any) => {\n            const enabled = record.enabled ?? record.template_detail?.enabled;\n            const installed =\n              record.stock_item != undefined && record.stock_item != itemId;\n\n            const multipleResults = record.results && record.results.length > 1;\n\n            return (\n              <Group justify='space-between' wrap='nowrap'>\n                <Group gap='xs'>\n                  {!child && (\n                    <RowExpansionIcon\n                      enabled={multipleResults}\n                      expanded={table.isRowExpanded(record.pk)}\n                    />\n                  )}\n                  <Text\n                    style={{ fontStyle: installed ? 'italic' : undefined }}\n                    c={enabled ? undefined : 'red'}\n                  >\n                    {!record.templateId && '- '}\n                    {record.test_name ?? record.template_detail?.test_name}\n                  </Text>\n                </Group>\n                <Group justify='right'>\n                  {record.results && record.results.length > 1 && (\n                    <Tooltip label={t`Test Results`}>\n                      <Badge color='lightblue' variant='filled'>\n                        {record.results.length}\n                      </Badge>\n                    </Tooltip>\n                  )}\n                  {installed && (\n                    <Tooltip label={t`Test result for installed stock item`}>\n                      <IconInfoCircle size={16} color='blue' />\n                    </Tooltip>\n                  )}\n                </Group>\n              </Group>\n            );\n          }\n        },\n        {\n          accessor: 'result',\n          title: t`Result`,\n          switchable: false,\n          sortable: true,\n          render: (record: any) => {\n            if (record.result === undefined) {\n              return (\n                <Badge color='lightblue' variant='filled'>{t`No Result`}</Badge>\n              );\n            } else {\n              return <PassFailButton value={record.result} />;\n            }\n          }\n        },\n        DescriptionColumn({}),\n        {\n          accessor: 'value',\n          title: t`Value`\n        },\n        {\n          accessor: 'attachment',\n          title: t`Attachment`,\n          render: (record: any) =>\n            record.attachment && (\n              <AttachmentLink attachment={record.attachment} />\n            ),\n          noContext: true\n        },\n        NoteColumn({}),\n        DateColumn({}),\n        UserColumn({\n          accessor: 'user_detail',\n          ordering: 'user'\n        }),\n        {\n          accessor: 'test_station',\n          sortable: true,\n          title: t`Test station`,\n          hidden: !includeTestStation\n        },\n        {\n          accessor: 'started_datetime',\n          sortable: true,\n          title: t`Started`,\n          hidden: !includeTestStation,\n          render: (record: any) => {\n            return (\n              <Group justify='space-between'>\n                {formatDate(record.started_datetime, {\n                  showTime: true,\n                  showSeconds: true\n                })}\n              </Group>\n            );\n          }\n        },\n        {\n          accessor: 'finished_datetime',\n          sortable: true,\n          title: t`Finished`,\n          hidden: !includeTestStation,\n          render: (record: any) => {\n            return (\n              <Group justify='space-between'>\n                {formatDate(record.finished_datetime, {\n                  showTime: true,\n                  showSeconds: true\n                })}\n              </Group>\n            );\n          }\n        }\n      ];\n    },\n    [itemId, includeTestStation, table.expandedRecords]\n  );\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    return constructTableColumns(false);\n  }, [itemId, includeTestStation, table.expandedRecords]);\n\n  const [selectedTemplate, setSelectedTemplate] = useState<number | undefined>(\n    undefined\n  );\n\n  const newResultFields: ApiFormFieldSet = useTestResultFields({\n    partId: partId,\n    itemId: itemId,\n    templateId: selectedTemplate,\n    editing: false\n  });\n\n  const editResultFields: ApiFormFieldSet = useTestResultFields({\n    partId: partId,\n    itemId: itemId,\n    templateId: selectedTemplate,\n    editing: true\n  });\n\n  const newTestModal = useCreateApiFormModal({\n    url: ApiEndpoints.stock_test_result_list,\n    fields: useMemo(() => ({ ...newResultFields }), [newResultFields]),\n    initialData: {\n      template: selectedTemplate,\n      result: true\n    },\n    title: t`Add Test Result`,\n    table: table,\n    successMessage: t`Test result added`\n  });\n\n  const [selectedTest, setSelectedTest] = useState<number>(0);\n\n  const editTestModal = useEditApiFormModal({\n    url: ApiEndpoints.stock_test_result_list,\n    pk: selectedTest,\n    fields: useMemo(() => ({ ...editResultFields }), [editResultFields]),\n    title: t`Edit Test Result`,\n    onFormSuccess: () => table.refreshTable,\n    successMessage: t`Test result updated`\n  });\n\n  const deleteTestModal = useDeleteApiFormModal({\n    url: ApiEndpoints.stock_test_result_list,\n    pk: selectedTest,\n    title: t`Delete Test Result`,\n    table: table,\n    successMessage: t`Test result deleted`\n  });\n\n  const passTest = useCallback(\n    (templateId: number) => {\n      api\n        .post(apiUrl(ApiEndpoints.stock_test_result_list), {\n          template: templateId,\n          stock_item: itemId,\n          result: true\n        })\n        .then(() => {\n          table.refreshTable();\n          showNotification({\n            title: t`Test Passed`,\n            message: t`Test result has been recorded`,\n            color: 'green'\n          });\n        })\n        .catch(() => {\n          showNotification({\n            title: t`Error`,\n            message: t`Failed to record test result`,\n            color: 'red'\n          });\n        });\n    },\n    [itemId]\n  );\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      if (record.stock_item != undefined && record.stock_item != itemId) {\n        // Test results for other stock items cannot be edited\n        return [];\n      }\n\n      return [\n        {\n          title: t`Pass Test`,\n          color: 'green',\n          icon: <IconCircleCheck />,\n          hidden:\n            !record.templateId ||\n            record?.requires_attachment ||\n            record?.requires_value ||\n            record.result,\n          onClick: () => passTest(record.templateId)\n        },\n        {\n          title: t`Add`,\n          tooltip: t`Add Test Result`,\n          color: 'green',\n          icon: <IconCirclePlus />,\n          hidden: !user.hasAddRole(UserRoles.stock) || !record.templateId,\n          onClick: () => {\n            setSelectedTemplate(record.templateId);\n            newTestModal.open();\n          }\n        },\n        RowEditAction({\n          tooltip: t`Edit Test Result`,\n          hidden:\n            !user.hasChangeRole(UserRoles.stock) || !record.template_detail,\n          onClick: () => {\n            setSelectedTest(record.pk);\n            editTestModal.open();\n          }\n        }),\n        RowDeleteAction({\n          tooltip: t`Delete Test Result`,\n          hidden:\n            !user.hasDeleteRole(UserRoles.stock) || !record.template_detail,\n          onClick: () => {\n            setSelectedTest(record.pk);\n            deleteTestModal.open();\n          }\n        })\n      ];\n    },\n    [user, itemId]\n  );\n\n  const tableFilters: TableFilter[] = useMemo(() => {\n    return [\n      {\n        name: 'required',\n        label: t`Required`,\n        description: t`Show results for required tests`\n      },\n      {\n        name: 'include_installed',\n        label: t`Include Installed`,\n        description: t`Show results for installed stock items`\n      },\n      {\n        name: 'result',\n        label: t`Passed`,\n        description: t`Show only passed tests`\n      },\n      {\n        name: 'enabled',\n        label: t`Enabled`,\n        description: t`Show results for enabled tests`\n      }\n    ];\n  }, []);\n\n  const tableActions = useMemo(() => {\n    return [\n      <AddItemButton\n        key='add-test-result'\n        tooltip={t`Add Test Result`}\n        onClick={() => {\n          setSelectedTemplate(undefined);\n          newTestModal.open();\n        }}\n        hidden={!user.hasAddRole(UserRoles.stock)}\n      />\n    ];\n  }, [user]);\n\n  // Row expansion controller\n  const rowExpansion: DataTableRowExpansionProps<any> = useMemo(() => {\n    const cols: any = [\n      ...constructTableColumns(true),\n      {\n        accessor: 'actions',\n        title: '  ',\n        hidden: false,\n        switchable: false,\n        width: 50,\n        render: (record: any) => (\n          <RowActions actions={rowActions(record) ?? []} />\n        )\n      }\n    ];\n\n    return {\n      allowMultiple: true,\n      expandable: ({ record }: { record: any }) => {\n        return (\n          table.isRowExpanded(record.pk) ||\n          (record.results && record.results.length > 1)\n        );\n      },\n      content: ({ record }: { record: any }) => {\n        if (!record || !record.results || record.results.length < 2) {\n          return null;\n        }\n\n        const results = record?.results ?? [];\n\n        return (\n          <DataTable\n            key={record.pk}\n            idAccessor={'test'}\n            noHeader\n            columns={cols}\n            records={results.slice(0, -1)}\n          />\n        );\n      }\n    };\n  }, [constructTableColumns, table.isRowExpanded]);\n\n  return (\n    <>\n      {newTestModal.modal}\n      {editTestModal.modal}\n      {deleteTestModal.modal}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.stock_test_result_list)}\n        tableState={table}\n        columns={tableColumns}\n        props={{\n          dataFormatter: formatRecords,\n          enablePagination: false,\n          tableActions: tableActions,\n          tableFilters: tableFilters,\n          rowActions: rowActions,\n          rowExpansion: rowExpansion,\n          params: {\n            stock_item: itemId,\n            user_detail: true,\n            attachment_detail: true,\n            template_detail: true\n          }\n        }}\n      />\n    </>\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Table, Text } from '@mantine/core';\nimport { type ReactNode, useCallback, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { apiUrl } from '@lib/functions/Api';\nimport { formatDecimal } from '@lib/functions/Formatting';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { TableColumn } from '@lib/types/Tables';\nimport { RenderBuildOrder } from '../../components/render/Build';\nimport { RenderCompany } from '../../components/render/Company';\nimport {\n  RenderPurchaseOrder,\n  RenderReturnOrder,\n  RenderSalesOrder\n} from '../../components/render/Order';\nimport { RenderPart } from '../../components/render/Part';\nimport { StatusRenderer } from '../../components/render/StatusRenderer';\nimport {\n  RenderStockItem,\n  RenderStockLocation\n} from '../../components/render/Stock';\nimport { RenderUser } from '../../components/render/User';\nimport { useTable } from '../../hooks/UseTable';\nimport { DateColumn, DescriptionColumn } from '../ColumnRenderers';\nimport { UserFilter } from '../Filter';\nimport { InvenTreeTable } from '../InvenTreeTable';\n\ntype StockTrackingEntry = {\n  label: string;\n  key: string;\n  details: ReactNode;\n};\n\nexport function StockTrackingTable({ itemId }: Readonly<{ itemId: number }>) {\n  const navigate = useNavigate();\n  const table = useTable('stock_tracking');\n\n  // Render \"details\" for a stock tracking record\n  const renderDetails = useCallback(\n    (record: any) => {\n      const deltas: any = record?.deltas ?? {};\n\n      const entries: StockTrackingEntry[] = [\n        {\n          label: t`Stock Item`,\n          key: 'stockitem',\n          details:\n            deltas.stockitem_detail &&\n            RenderStockItem({ instance: deltas.stockitem_detail, link: true })\n        },\n        {\n          label: t`Stock Item`,\n          key: 'item',\n          details:\n            deltas.item_detail &&\n            RenderStockItem({\n              instance: deltas.item_detail,\n              link: true\n            })\n        },\n        {\n          label: t`Status`,\n          key: 'status',\n          details:\n            deltas.status &&\n            StatusRenderer({ status: deltas.status, type: ModelType.stockitem })\n        },\n        {\n          label: t`Quantity`,\n          key: 'quantity',\n          details: formatDecimal(deltas.quantity)\n        },\n        {\n          label: t`Added`,\n          key: 'added',\n          details: deltas.added\n        },\n        {\n          label: t`Removed`,\n          key: 'removed',\n          details: deltas.removed\n        },\n        {\n          label: t`Part`,\n          key: 'part',\n          details:\n            deltas.part_detail &&\n            RenderPart({\n              instance: deltas.part_detail,\n              link: true,\n              navigate: navigate\n            })\n        },\n        {\n          label: t`Location`,\n          key: 'location',\n          details:\n            deltas.location_detail &&\n            RenderStockLocation({\n              instance: deltas.location_detail,\n              link: true,\n              navigate: navigate\n            })\n        },\n        {\n          label: t`Build Order`,\n          key: 'buildorder',\n          details:\n            deltas.buildorder_detail &&\n            RenderBuildOrder({\n              instance: deltas.buildorder_detail,\n              link: true,\n              navigate: navigate\n            })\n        },\n        {\n          label: t`Purchase Order`,\n          key: 'purchaseorder',\n          details:\n            deltas.purchaseorder_detail &&\n            RenderPurchaseOrder({\n              instance: deltas.purchaseorder_detail,\n              link: true,\n              navigate: navigate\n            })\n        },\n        {\n          label: t`Sales Order`,\n          key: 'salesorder',\n          details:\n            deltas.salesorder_detail &&\n            RenderSalesOrder({\n              instance: deltas.salesorder_detail,\n              link: true,\n              navigate: navigate\n            })\n        },\n        {\n          label: t`Return Order`,\n          key: 'returnorder',\n          details:\n            deltas.returnorder_detail &&\n            RenderReturnOrder({\n              instance: deltas.returnorder_detail,\n              link: true,\n              navigate: navigate\n            })\n        },\n        {\n          label: t`Customer`,\n          key: 'customer',\n          details:\n            deltas.customer_detail &&\n            RenderCompany({\n              instance: deltas.customer_detail,\n              link: true,\n              navigate: navigate\n            })\n        }\n      ];\n\n      return (\n        <Table striped>\n          <Table.Tbody>\n            {entries.map(\n              (entry) =>\n                entry.details && (\n                  <Table.Tr key={entry.key}>\n                    <Table.Td>\n                      <Text>{entry.label}</Text>\n                    </Table.Td>\n                    <Table.Td>{entry.details}</Table.Td>\n                  </Table.Tr>\n                )\n            )}\n          </Table.Tbody>\n        </Table>\n      );\n    },\n    [navigate]\n  );\n\n  const filters: TableFilter[] = useMemo(() => {\n    return [\n      UserFilter({\n        name: 'user',\n        label: t`User`,\n        description: t`Filter by user`\n      })\n    ];\n  }, []);\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    return [\n      DateColumn({\n        switchable: false\n      }),\n      DescriptionColumn({\n        accessor: 'label'\n      }),\n      {\n        accessor: 'details',\n        title: t`Details`,\n        switchable: false,\n        render: renderDetails\n      },\n      {\n        accessor: 'notes',\n        title: t`Notes`,\n        sortable: false,\n        switchable: true\n      },\n      {\n        accessor: 'user',\n        title: t`User`,\n        render: (record: any) => {\n          if (!record.user_detail) {\n            return <Text size='sm' fs='italic'>{t`No user information`}</Text>;\n          }\n\n          return RenderUser({ instance: record.user_detail });\n        }\n      }\n    ];\n  }, []);\n\n  return (\n    <InvenTreeTable\n      tableState={table}\n      url={apiUrl(ApiEndpoints.stock_tracking_list)}\n      columns={tableColumns}\n      props={{\n        params: {\n          item: itemId,\n          user_detail: true\n        },\n        enableDownload: true,\n        tableFilters: filters\n      }}\n    />\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport {\n  Accordion,\n  Button,\n  Grid,\n  Group,\n  Skeleton,\n  Space,\n  Stack,\n  Text,\n  Tooltip\n} from '@mantine/core';\nimport {\n  IconArrowLeft,\n  IconArrowRight,\n  IconBookmark,\n  IconBoxPadding,\n  IconChecklist,\n  IconHistory,\n  IconInfoCircle,\n  IconPackages,\n  IconSearch,\n  IconShoppingCart,\n  IconSitemap\n} from '@tabler/icons-react';\nimport { useQuery } from '@tanstack/react-query';\nimport { type ReactNode, useMemo, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { ActionButton } from '@lib/components/ActionButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport { getDetailUrl, getOverviewUrl } from '@lib/functions/Navigation';\nimport type { StockOperationProps } from '@lib/types/Forms';\nimport { notifications } from '@mantine/notifications';\nimport { useBarcodeScanDialog } from '../../components/barcodes/BarcodeScanDialog';\nimport AdminButton from '../../components/buttons/AdminButton';\nimport { PrintingActions } from '../../components/buttons/PrintingActions';\nimport {\n  type DetailsField,\n  DetailsTable\n} from '../../components/details/Details';\nimport DetailsBadge from '../../components/details/DetailsBadge';\nimport { DetailsImage } from '../../components/details/DetailsImage';\nimport { ItemDetailsGrid } from '../../components/details/ItemDetails';\nimport {\n  ActionDropdown,\n  BarcodeActionDropdown,\n  DeleteItemAction,\n  DuplicateItemAction,\n  EditItemAction,\n  OptionsActionDropdown\n} from '../../components/items/ActionDropdown';\nimport { StylishText } from '../../components/items/StylishText';\nimport InstanceDetail from '../../components/nav/InstanceDetail';\nimport NavigationTree from '../../components/nav/NavigationTree';\nimport { PageDetail } from '../../components/nav/PageDetail';\nimport AttachmentPanel from '../../components/panels/AttachmentPanel';\nimport NotesPanel from '../../components/panels/NotesPanel';\nimport type { PanelType } from '../../components/panels/Panel';\nimport { PanelGroup } from '../../components/panels/PanelGroup';\nimport LocateItemButton from '../../components/plugins/LocateItemButton';\nimport { StatusRenderer } from '../../components/render/StatusRenderer';\nimport OrderPartsWizard from '../../components/wizards/OrderPartsWizard';\nimport { useApi } from '../../contexts/ApiContext';\nimport { formatCurrency, formatDecimal } from '../../defaults/formatters';\nimport {\n  useFindSerialNumberForm,\n  useStockFields,\n  useStockItemSerializeFields\n} from '../../forms/StockForms';\nimport { InvenTreeIcon } from '../../functions/icons';\nimport {\n  useCreateApiFormModal,\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { useInstance } from '../../hooks/UseInstance';\nimport { useStockAdjustActions } from '../../hooks/UseStockAdjustActions';\nimport { useGlobalSettingsState } from '../../states/SettingsStates';\nimport { useUserState } from '../../states/UserState';\nimport BuildAllocatedStockTable from '../../tables/build/BuildAllocatedStockTable';\nimport SalesOrderAllocationTable from '../../tables/sales/SalesOrderAllocationTable';\nimport InstalledItemsTable from '../../tables/stock/InstalledItemsTable';\nimport { StockItemTable } from '../../tables/stock/StockItemTable';\nimport StockItemTestResultTable from '../../tables/stock/StockItemTestResultTable';\nimport { StockTrackingTable } from '../../tables/stock/StockTrackingTable';\n\nexport default function StockDetail() {\n  const { id } = useParams();\n\n  const api = useApi();\n  const user = useUserState();\n\n  const globalSettings = useGlobalSettingsState();\n\n  const enableExpiry = useMemo(\n    () => globalSettings.isSet('STOCK_ENABLE_EXPIRY'),\n    [globalSettings]\n  );\n\n  const navigate = useNavigate();\n\n  const [treeOpen, setTreeOpen] = useState(false);\n\n  const {\n    instance: stockitem,\n    refreshInstance,\n    refreshInstancePromise,\n    instanceQuery\n  } = useInstance({\n    endpoint: ApiEndpoints.stock_item_list,\n    pk: id,\n    params: {\n      part_detail: true,\n      location_detail: true,\n      path_detail: true\n    }\n  });\n\n  const { instance: serialNumbers, instanceQuery: serialNumbersQuery } =\n    useInstance({\n      endpoint: ApiEndpoints.stock_serial_info,\n      pk: id\n    });\n\n  const findBySerialNumber = useFindSerialNumberForm({\n    partId: stockitem.part\n  });\n\n  const detailsPanel = useMemo(() => {\n    const data = { ...stockitem };\n    const part = stockitem?.part_detail ?? {};\n\n    data.available_stock = Math.max(0, data.quantity - data.allocated);\n\n    if (instanceQuery.isFetching) {\n      return <Skeleton />;\n    }\n\n    // Top left - core part information\n    const tl: DetailsField[] = [\n      {\n        name: 'part',\n        label: t`Base Part`,\n        type: 'link',\n        model: ModelType.part\n      },\n      {\n        name: 'part_detail.IPN',\n        label: t`IPN`,\n        type: 'text',\n        copy: true,\n        icon: 'part',\n        hidden: !part.IPN\n      },\n      {\n        name: 'part_detail.revision',\n        label: t`Revision`,\n        type: 'string',\n        copy: true,\n        icon: 'revision',\n        hidden: !part.revision\n      },\n      {\n        name: 'status',\n        type: 'status',\n        label: t`Status`,\n        model: ModelType.stockitem\n      },\n      {\n        name: 'status_custom_key',\n        type: 'status',\n        label: t`Custom Status`,\n        model: ModelType.stockitem,\n        icon: 'status',\n        hidden:\n          !stockitem.status_custom_key ||\n          stockitem.status_custom_key == stockitem.status\n      },\n      {\n        type: 'link',\n        name: 'link',\n        label: t`Link`,\n        external: true,\n        copy: true,\n        hidden: !stockitem.link\n      }\n    ];\n\n    // Top right - available stock information\n    const tr: DetailsField[] = [\n      {\n        type: 'text',\n        name: 'serial',\n        label: t`Serial Number`,\n        hidden: !stockitem.serial,\n        value_formatter: () => (\n          <Group gap='xs' justify='space-apart'>\n            <Text>{stockitem.serial}</Text>\n            <Space flex={10} />\n            <Group gap={2} justify='right'>\n              {serialNumbers.previous?.pk && (\n                <Tooltip label={t`Previous serial number`} position='top'>\n                  <Button\n                    p={3}\n                    aria-label='previous-serial-number'\n                    leftSection={<IconArrowLeft />}\n                    variant='transparent'\n                    size='sm'\n                    onClick={() => {\n                      navigate(\n                        getDetailUrl(\n                          ModelType.stockitem,\n                          serialNumbers.previous.pk\n                        )\n                      );\n                    }}\n                  >\n                    {serialNumbers.previous.serial}\n                  </Button>\n                </Tooltip>\n              )}\n              <ActionButton\n                icon={<IconSearch size={18} />}\n                tooltip={t`Find serial number`}\n                tooltipAlignment='top'\n                variant='transparent'\n                onClick={findBySerialNumber.open}\n              />\n              {serialNumbers.next?.pk && (\n                <Tooltip label={t`Next serial number`} position='top'>\n                  <Button\n                    p={3}\n                    aria-label='next-serial-number'\n                    rightSection={<IconArrowRight />}\n                    variant='transparent'\n                    size='sm'\n                    onClick={() => {\n                      navigate(\n                        getDetailUrl(ModelType.stockitem, serialNumbers.next.pk)\n                      );\n                    }}\n                  >\n                    {serialNumbers.next.serial}\n                  </Button>\n                </Tooltip>\n              )}\n            </Group>\n          </Group>\n        )\n      },\n      {\n        type: 'number',\n        name: 'quantity',\n        label: t`Quantity`,\n        unit: part?.units,\n        hidden: !!stockitem.serial && stockitem.quantity == 1\n      },\n      {\n        type: 'number',\n        name: 'available_stock',\n        label: t`Available`,\n        unit: part?.units,\n        icon: 'stock'\n      },\n      {\n        type: 'number',\n        name: 'allocated',\n        label: t`Allocated to Orders`,\n        unit: part?.units,\n        icon: 'tick_off',\n        hidden: !stockitem.allocated\n      },\n      {\n        type: 'text',\n        name: 'batch',\n        label: t`Batch Code`,\n        hidden: !stockitem.batch\n      }\n    ];\n\n    // Bottom left: location information\n    const bl: DetailsField[] = [\n      {\n        name: 'supplier_part',\n        label: t`Supplier Part`,\n        type: 'link',\n        model_field: 'SKU',\n        model: ModelType.supplierpart,\n        hidden: !stockitem.supplier_part\n      },\n      {\n        type: 'link',\n        name: 'location',\n        label: t`Location`,\n        model: ModelType.stocklocation,\n        hidden: !stockitem.location\n      },\n      {\n        type: 'link',\n        name: 'belongs_to',\n        label: t`Installed In`,\n        model_filters: {\n          part_detail: true\n        },\n        model_formatter: (model: any) => {\n          let text = model?.part_detail?.full_name ?? model?.name;\n          if (model.serial && model.quantity == 1) {\n            text += ` # ${model.serial}`;\n          }\n\n          return text;\n        },\n        icon: 'stock',\n        model: ModelType.stockitem,\n        hidden: !stockitem.belongs_to\n      },\n      {\n        type: 'link',\n        name: 'parent',\n        icon: 'sitemap',\n        label: t`Parent Item`,\n        model: ModelType.stockitem,\n        hidden: !stockitem.parent,\n        model_formatter: (model: any) => {\n          return t`Parent stock item`;\n        }\n      },\n      {\n        type: 'link',\n        name: 'consumed_by',\n        label: t`Consumed By`,\n        model: ModelType.build,\n        hidden: !stockitem.consumed_by,\n        icon: 'build',\n        model_field: 'reference'\n      },\n      {\n        type: 'link',\n        name: 'build',\n        label: t`Build Order`,\n        model: ModelType.build,\n        hidden: !stockitem.build,\n        model_field: 'reference'\n      },\n      {\n        type: 'link',\n        name: 'purchase_order',\n        label: t`Purchase Order`,\n        model: ModelType.purchaseorder,\n        hidden: !stockitem.purchase_order,\n        icon: 'purchase_orders',\n        model_field: 'reference'\n      },\n      {\n        type: 'link',\n        name: 'sales_order',\n        label: t`Sales Order`,\n        model: ModelType.salesorder,\n        hidden: !stockitem.sales_order,\n        icon: 'sales_orders',\n        model_field: 'reference'\n      },\n      {\n        type: 'link',\n        name: 'customer',\n        label: t`Customer`,\n        model: ModelType.company,\n        hidden: !stockitem.customer\n      }\n    ];\n\n    // Bottom right - any other information\n    const br: DetailsField[] = [\n      // Expiry date\n      {\n        type: 'date',\n        name: 'expiry_date',\n        label: t`Expiry Date`,\n        hidden: !enableExpiry || !stockitem.expiry_date,\n        icon: 'calendar'\n      },\n      // TODO: Ownership\n      {\n        type: 'text',\n        name: 'purchase_price',\n        label: t`Unit Price`,\n        icon: 'currency',\n        hidden: !stockitem.purchase_price,\n        value_formatter: () => {\n          return formatCurrency(stockitem.purchase_price, {\n            currency: stockitem.purchase_price_currency\n          });\n        }\n      },\n      {\n        type: 'text',\n        name: 'stock_value',\n        label: t`Stock Value`,\n        icon: 'currency',\n        hidden:\n          !stockitem.purchase_price ||\n          stockitem.quantity == 1 ||\n          stockitem.quantity == 0,\n        value_formatter: () => {\n          return formatCurrency(stockitem.purchase_price, {\n            currency: stockitem.purchase_price_currency,\n            multiplier: stockitem.quantity\n          });\n        }\n      },\n      {\n        type: 'text',\n        name: 'packaging',\n        icon: 'part',\n        label: t`Packaging`,\n        hidden: !stockitem.packaging\n      },\n      {\n        type: 'text',\n        name: 'updated',\n        icon: 'calendar',\n        label: t`Last Updated`\n      },\n      {\n        type: 'text',\n        name: 'stocktake',\n        icon: 'calendar',\n        label: t`Last Stocktake`,\n        hidden: !stockitem.stocktake\n      }\n    ];\n\n    return (\n      <ItemDetailsGrid>\n        <Grid grow>\n          <DetailsImage\n            appRole={UserRoles.part}\n            apiPath={ApiEndpoints.part_list}\n            src={\n              stockitem.part_detail?.image ?? stockitem?.part_detail?.thumbnail\n            }\n            pk={stockitem.part}\n          />\n          <Grid.Col span={{ base: 12, sm: 8 }}>\n            <DetailsTable fields={tl} item={data} />\n          </Grid.Col>\n        </Grid>\n        <DetailsTable fields={tr} item={data} />\n        <DetailsTable fields={bl} item={data} />\n        <DetailsTable fields={br} item={data} />\n      </ItemDetailsGrid>\n    );\n  }, [\n    stockitem,\n    serialNumbers,\n    serialNumbersQuery.isFetching,\n    instanceQuery.isFetching,\n    enableExpiry\n  ]);\n\n  const showBuildAllocations: boolean = useMemo(() => {\n    // Determine if \"build allocations\" should be shown for this stock item\n    return (\n      stockitem?.part_detail?.component && // Must be a \"component\"\n      !stockitem?.sales_order && // Must not be assigned to a sales order\n      !stockitem?.belongs_to\n    ); // Must not be installed into another item\n  }, [stockitem]);\n\n  const showSalesAllocations: boolean = useMemo(() => {\n    return stockitem?.part_detail?.salable;\n  }, [stockitem]);\n\n  // API query to determine if this stock item has trackable BOM items\n  const trackedBomItemQuery = useQuery({\n    queryKey: ['tracked-bom-item', stockitem.pk, stockitem.part],\n    queryFn: () => {\n      if (\n        !stockitem.pk ||\n        !stockitem.part ||\n        !stockitem.part_detail?.assembly\n      ) {\n        return false;\n      }\n\n      return api\n        .get(apiUrl(ApiEndpoints.bom_list), {\n          params: {\n            part: stockitem.part,\n            sub_part_trackable: true,\n            limit: 1\n          }\n        })\n        .then((response) => {\n          if (response.status == 200) {\n            return response.data.count > 0;\n          } else {\n            return null;\n          }\n        });\n    }\n  });\n\n  const showInstalledItems: boolean = useMemo(() => {\n    if (stockitem?.installed_items) {\n      // There are installed items in this stock item\n      return true;\n    }\n\n    if (!!trackedBomItemQuery.data) {\n      return trackedBomItemQuery.data;\n    }\n\n    // Fall back to whether this is an assembly or not\n    return stockitem?.part_detail?.assembly;\n  }, [trackedBomItemQuery, stockitem]);\n\n  const stockPanels: PanelType[] = useMemo(() => {\n    return [\n      {\n        name: 'details',\n        label: t`Stock Details`,\n        icon: <IconInfoCircle />,\n        content: detailsPanel\n      },\n      {\n        name: 'tracking',\n        label: t`Stock Tracking`,\n        icon: <IconHistory />,\n        content: stockitem.pk ? (\n          <StockTrackingTable itemId={stockitem.pk} />\n        ) : (\n          <Skeleton />\n        )\n      },\n      {\n        name: 'allocations',\n        label: t`Allocations`,\n        icon: <IconBookmark />,\n        hidden:\n          !stockitem.in_stock ||\n          (!showSalesAllocations && !showBuildAllocations),\n        content: (\n          <Accordion\n            multiple={true}\n            defaultValue={['buildAllocations', 'salesAllocations']}\n          >\n            {showBuildAllocations && (\n              <Accordion.Item value='buildAllocations' key='buildAllocations'>\n                <Accordion.Control>\n                  <StylishText size='lg'>{t`Build Order Allocations`}</StylishText>\n                </Accordion.Control>\n                <Accordion.Panel>\n                  <BuildAllocatedStockTable\n                    stockId={stockitem.pk}\n                    modelField='build'\n                    modelTarget={ModelType.build}\n                    showBuildInfo\n                  />\n                </Accordion.Panel>\n              </Accordion.Item>\n            )}\n            {showSalesAllocations && (\n              <Accordion.Item value='salesAllocations' key='salesAllocations'>\n                <Accordion.Control>\n                  <StylishText size='lg'>{t`Sales Order Allocations`}</StylishText>\n                </Accordion.Control>\n                <Accordion.Panel>\n                  <SalesOrderAllocationTable\n                    stockId={stockitem.pk}\n                    modelField='order'\n                    modelTarget={ModelType.salesorder}\n                    showOrderInfo\n                  />\n                </Accordion.Panel>\n              </Accordion.Item>\n            )}\n          </Accordion>\n        )\n      },\n      {\n        name: 'test-results',\n        label: t`Test Results`,\n        icon: <IconChecklist />,\n        hidden: !stockitem?.part_detail?.testable,\n        content: stockitem?.pk ? (\n          <StockItemTestResultTable\n            itemId={stockitem.pk}\n            partId={stockitem.part}\n          />\n        ) : (\n          <Skeleton />\n        )\n      },\n      {\n        name: 'installed_items',\n        label: t`Installed Items`,\n        icon: <IconBoxPadding />,\n        hidden: !showInstalledItems,\n        content: <InstalledItemsTable stockItem={stockitem} />\n      },\n      {\n        name: 'child_items',\n        label: t`Child Items`,\n        icon: <IconSitemap />,\n        hidden: (stockitem?.child_items ?? 0) == 0,\n        content: stockitem?.pk ? (\n          <StockItemTable\n            tableName='child-stock'\n            params={{ ancestor: stockitem.pk }}\n          />\n        ) : (\n          <Skeleton />\n        )\n      },\n      AttachmentPanel({\n        model_type: ModelType.stockitem,\n        model_id: stockitem.pk\n      }),\n      NotesPanel({\n        model_type: ModelType.stockitem,\n        model_id: stockitem.pk\n      })\n    ];\n  }, [\n    showSalesAllocations,\n    showBuildAllocations,\n    showInstalledItems,\n    stockitem,\n    serialNumbers,\n    serialNumbersQuery,\n    id,\n    user\n  ]);\n\n  const breadcrumbs = useMemo(\n    () => [\n      { name: t`Stock`, url: '/stock' },\n      ...(stockitem.location_path ?? []).map((l: any) => ({\n        name: l.name,\n        url: getDetailUrl(ModelType.stocklocation, l.pk)\n      }))\n    ],\n    [stockitem]\n  );\n\n  const editStockItemFields = useStockFields({\n    create: false,\n    stockItem: stockitem,\n    partId: stockitem.part,\n    modalId: 'edit-stock-item'\n  });\n\n  const editStockItem = useEditApiFormModal({\n    url: ApiEndpoints.stock_item_list,\n    pk: stockitem.pk,\n    title: t`Edit Stock Item`,\n    modalId: 'edit-stock-item',\n    fields: editStockItemFields,\n    onFormSuccess: refreshInstance\n  });\n\n  const duplicateStockItemFields = useStockFields({\n    create: true,\n    modalId: 'duplicate-stock-item'\n  });\n\n  const duplicateStockData = useMemo(() => {\n    const duplicate = {\n      ...stockitem,\n      serial_numbers: stockitem.serial\n    };\n\n    // Omit the \"serial\" field for item creation\n    delete duplicate.serial;\n\n    return duplicate;\n  }, [stockitem]);\n\n  const duplicateStockItem = useCreateApiFormModal({\n    url: ApiEndpoints.stock_item_list,\n    title: t`Add Stock Item`,\n    modalId: 'duplicate-stock-item',\n    fields: duplicateStockItemFields,\n    initialData: {\n      ...duplicateStockData\n    },\n    follow: true,\n    successMessage: null,\n    modelType: ModelType.stockitem,\n    onFormSuccess: (data) => {\n      // Handle case where multiple stock items are created\n      if (Array.isArray(data) && data.length > 0) {\n        if (data.length == 1) {\n          navigate(getDetailUrl(ModelType.stockitem, data[0]?.pk));\n        } else {\n          const n: number = data.length;\n          notifications.show({\n            title: t`Items Created`,\n            message: t`Created ${n} stock items`,\n            color: 'green'\n          });\n        }\n      }\n    }\n  });\n\n  const preDeleteContent = useMemo(() => {\n    // TODO: Fill this out with information on the stock item.\n    // e.g. list of child items which would be deleted, etc\n    return undefined;\n  }, [stockitem]);\n\n  const deleteStockItem = useDeleteApiFormModal({\n    url: ApiEndpoints.stock_item_list,\n    pk: stockitem.pk,\n    title: t`Delete Stock Item`,\n    preFormContent: preDeleteContent,\n    onFormSuccess: () => {\n      // Redirect to the part page\n      navigate(getDetailUrl(ModelType.part, stockitem.part));\n    }\n  });\n\n  const stockOperationProps: StockOperationProps = useMemo(() => {\n    return {\n      items: [stockitem],\n      model: ModelType.stockitem,\n      refresh: () => {\n        const location = stockitem?.location;\n        refreshInstancePromise().then((response) => {\n          if (response.status == 'error') {\n            // If an error occurs refreshing the instance,\n            // the stock likely has likely been depleted\n            if (location) {\n              navigate(getDetailUrl(ModelType.stocklocation, location));\n            } else {\n              navigate(getOverviewUrl(ModelType.stockitem));\n            }\n          }\n        });\n      },\n      filters: {\n        in_stock: true\n      }\n    };\n  }, [stockitem]);\n\n  const stockAdjustActions = useStockAdjustActions({\n    formProps: stockOperationProps,\n    delete: false,\n    assign: !!stockitem.in_stock,\n    return: !!stockitem.consumed_by || !!stockitem.customer,\n    merge: false\n  });\n\n  const serializeStockFields = useStockItemSerializeFields({\n    partId: stockitem.part,\n    trackable: stockitem.part_detail?.trackable,\n    modalId: 'stock-item-serialize'\n  });\n\n  const serializeStockItem = useCreateApiFormModal({\n    url: ApiEndpoints.stock_serialize,\n    pk: stockitem.pk,\n    title: t`Serialize Stock Item`,\n    modalId: 'stock-item-serialize',\n    fields: serializeStockFields,\n    initialData: {\n      quantity: stockitem.quantity,\n      destination: stockitem.location ?? stockitem.part_detail?.default_location\n    },\n    onFormSuccess: (response: any) => {\n      if (response.length >= stockitem.quantity) {\n        // Entire item was serialized\n        // Navigate to the first result\n        navigate(getDetailUrl(ModelType.stockitem, response[0].pk));\n      } else {\n        refreshInstance();\n      }\n    },\n    successMessage: t`Stock item serialized`\n  });\n\n  const orderPartsWizard = OrderPartsWizard({\n    parts: stockitem.part_detail ? [stockitem.part_detail] : []\n  });\n\n  const scanIntoLocation = useBarcodeScanDialog({\n    title: t`Scan Into Location`,\n    modelType: ModelType.stocklocation,\n    callback: async (barcode, response) => {\n      const pk = response.stocklocation.pk;\n\n      return api\n        .post(apiUrl(ApiEndpoints.stock_transfer), {\n          location: pk,\n          items: [\n            {\n              pk: stockitem.pk,\n              quantity: stockitem.quantity\n            }\n          ]\n        })\n        .then(() => {\n          refreshInstance();\n          return {\n            success: t`Scanned stock item into location`\n          };\n        })\n        .catch((error) => {\n          console.log('Error scanning stock item:', error);\n          return {\n            error: t`Error scanning stock item`\n          };\n        });\n    }\n  });\n\n  const stockActions = useMemo(() => {\n    // Can this stock item be transferred to a different location?\n    const canTransfer =\n      user.hasChangeRole(UserRoles.stock) &&\n      !stockitem.sales_order &&\n      !stockitem.belongs_to &&\n      !stockitem.customer &&\n      !stockitem.consumed_by;\n\n    const isBuilding = stockitem.is_building;\n\n    const serial = stockitem.serial;\n    const serialized =\n      serial != null &&\n      serial != undefined &&\n      serial != '' &&\n      stockitem.quantity == 1;\n\n    return [\n      <AdminButton model={ModelType.stockitem} id={stockitem.pk} />,\n      <LocateItemButton stockId={stockitem.pk} />,\n      <BarcodeActionDropdown\n        model={ModelType.stockitem}\n        pk={stockitem.pk}\n        hash={stockitem?.barcode_hash}\n        perm={user.hasChangeRole(UserRoles.stock)}\n        actions={[\n          {\n            name: t`Scan into location`,\n            icon: <InvenTreeIcon icon='location' />,\n            tooltip: t`Scan this item into a location`,\n            onClick: scanIntoLocation.open\n          }\n        ]}\n      />,\n      <PrintingActions\n        modelType={ModelType.stockitem}\n        items={[stockitem.pk]}\n        enableReports\n        enableLabels\n      />,\n      <ActionDropdown\n        tooltip={t`Stock Operations`}\n        icon={<IconPackages />}\n        actions={[\n          ...stockAdjustActions.menuActions,\n          {\n            name: t`Serialize`,\n            tooltip: t`Serialize stock`,\n            hidden:\n              serialized ||\n              stockitem?.quantity < 1 ||\n              stockitem?.part_detail?.trackable != true,\n            icon: <InvenTreeIcon icon='serial' iconProps={{ color: 'blue' }} />,\n            onClick: () => {\n              serializeStockItem.open();\n            }\n          },\n          {\n            name: t`Order`,\n            tooltip: t`Order Stock`,\n            hidden:\n              !user.hasAddRole(UserRoles.purchase_order) ||\n              !stockitem.part_detail?.active ||\n              !stockitem.part_detail?.purchaseable,\n            icon: <IconShoppingCart color='blue' />,\n            onClick: () => {\n              orderPartsWizard.openWizard();\n            }\n          }\n        ]}\n      />,\n      <OptionsActionDropdown\n        tooltip={t`Stock Item Actions`}\n        actions={[\n          DuplicateItemAction({\n            hidden: !user.hasAddRole(UserRoles.stock),\n            onClick: () => duplicateStockItem.open()\n          }),\n          EditItemAction({\n            hidden: !user.hasChangeRole(UserRoles.stock),\n            onClick: () => editStockItem.open()\n          }),\n          DeleteItemAction({\n            hidden: !user.hasDeleteRole(UserRoles.stock),\n            onClick: () => deleteStockItem.open()\n          })\n        ]}\n      />\n    ];\n  }, [id, stockitem, user, stockAdjustActions.menuActions]);\n\n  const stockBadges: ReactNode[] = useMemo(() => {\n    let available = (stockitem?.quantity ?? 0) - (stockitem?.allocated ?? 0);\n    available = Math.max(0, available);\n\n    return instanceQuery.isLoading\n      ? []\n      : [\n          <DetailsBadge\n            color='yellow'\n            label={t`In Production`}\n            visible={stockitem.is_building}\n          />,\n          <DetailsBadge\n            color='blue'\n            label={`${t`Serial Number`}: ${stockitem.serial}`}\n            visible={!!stockitem.serial}\n            key='serial'\n          />,\n          <DetailsBadge\n            color='blue'\n            label={`${t`Quantity`}: ${formatDecimal(stockitem.quantity)}`}\n            visible={!stockitem.serial}\n            key='quantity'\n          />,\n          <DetailsBadge\n            color='yellow'\n            label={`${t`Available`}: ${formatDecimal(available)}`}\n            visible={\n              stockitem.in_stock &&\n              !stockitem.serial &&\n              available != stockitem.quantity\n            }\n            key='available'\n          />,\n          <DetailsBadge\n            color='blue'\n            label={`${t`Batch Code`}: ${stockitem.batch}`}\n            visible={!!stockitem.batch}\n            key='batch'\n          />,\n          <StatusRenderer\n            status={stockitem.status_custom_key || stockitem.status}\n            type={ModelType.stockitem}\n            options={{\n              size: 'lg'\n            }}\n            key='status'\n          />,\n          <DetailsBadge\n            color='yellow'\n            label={t`Stale`}\n            visible={enableExpiry && stockitem.stale && !stockitem.expired}\n            key='stale'\n          />,\n          <DetailsBadge\n            color='orange'\n            label={t`Expired`}\n            visible={enableExpiry && stockitem.expired}\n            key='expired'\n          />,\n          <DetailsBadge\n            color='red'\n            label={t`Unavailable`}\n            visible={stockitem.in_stock == false}\n            key='unavailable'\n          />\n        ];\n  }, [stockitem, instanceQuery, enableExpiry]);\n\n  return (\n    <>\n      {findBySerialNumber.modal}\n      {scanIntoLocation.dialog}\n      <InstanceDetail\n        query={instanceQuery}\n        requiredPermission={ModelType.stockitem}\n      >\n        <Stack>\n          {user.hasViewRole(UserRoles.stock_location) && (\n            <NavigationTree\n              title={t`Stock Locations`}\n              modelType={ModelType.stocklocation}\n              endpoint={ApiEndpoints.stock_location_tree}\n              opened={treeOpen}\n              onClose={() => setTreeOpen(false)}\n              selectedId={stockitem?.location}\n            />\n          )}\n          <PageDetail\n            title={t`Stock Item`}\n            subtitle={stockitem.part_detail?.full_name}\n            imageUrl={stockitem.part_detail?.thumbnail}\n            editAction={editStockItem.open}\n            editEnabled={user.hasChangePermission(ModelType.stockitem)}\n            badges={stockBadges}\n            breadcrumbs={\n              user.hasViewRole(UserRoles.stock_location)\n                ? breadcrumbs\n                : undefined\n            }\n            lastCrumb={[\n              {\n                name: stockitem.name,\n                url: `/stock/item/${stockitem.pk}/`\n              }\n            ]}\n            breadcrumbAction={() => {\n              setTreeOpen(true);\n            }}\n            actions={stockActions}\n          />\n          <PanelGroup\n            pageKey='stockitem'\n            panels={stockPanels}\n            model={ModelType.stockitem}\n            id={stockitem.pk}\n            instance={stockitem}\n          />\n        </Stack>\n      </InstanceDetail>\n      {editStockItem.modal}\n      {duplicateStockItem.modal}\n      {deleteStockItem.modal}\n      {serializeStockItem.modal}\n      {stockAdjustActions.modals.map((modal) => modal.modal)}\n      {orderPartsWizard.wizard}\n    </>\n  );\n}\n"],"names":["__iconNode","IconBoxPadding","createReactComponent","InstalledItemsTable","stockItem","table","useTable","user","useUserState","installItemFields","useStockItemInstallFields","installItem","useCreateApiFormModal","url","apiUrl","ApiEndpoints","stock_install","pk","title","_i18n","_","id","successMessage","fields","selectedRecord","setSelectedRecord","useState","uninstallItemFields","useStockItemUninstallFields","uninstallItem","stock_uninstall","initialData","location","part_detail","default_location","tableColumns","useMemo","PartColumn","part","accessor","switchable","render","record","text","formatDecimal","quantity","serial","StatusColumn","model","ModelType","stockitem","tableActions","jsx","AddItemButton","open","hasChangeRole","UserRoles","stock","is_building","assembly","rowActions","useCallback","tooltip","onClick","icon","IconUnlink","hidden","jsxs","Fragment","modal","InvenTreeTable","stock_item_list","enableSelection","enableLabels","enableReports","modelType","params","belongs_to","Skeleton","StockItemTestResultTable","partId","itemId","api","useApi","globalSettings","useGlobalSettingsState","includeTestStation","isSet","data","testTemplates","useQuery","queryKey","queryFn","get","part_test_template_list","include_inherited","enabled","then","response","useEffect","refreshTable","formatRecords","records","results","map","template","templateId","forEach","find","r","push","template_detail","sort","a","b","idx","findIndex","constructTableColumns","child","sortable","installed","stock_item","undefined","multipleResults","length","Group","RowExpansionIcon","isRowExpanded","Text","fontStyle","test_name","Tooltip","Badge","IconInfoCircle","result","PassFailButton","DescriptionColumn","attachment","AttachmentLink","noContext","NoteColumn","DateColumn","UserColumn","ordering","formatDate","started_datetime","showTime","showSeconds","finished_datetime","expandedRecords","selectedTemplate","setSelectedTemplate","newResultFields","useTestResultFields","editing","editResultFields","newTestModal","stock_test_result_list","selectedTest","setSelectedTest","editTestModal","useEditApiFormModal","onFormSuccess","deleteTestModal","useDeleteApiFormModal","passTest","post","showNotification","message","color","catch","IconCircleCheck","requires_attachment","requires_value","IconCirclePlus","hasAddRole","RowEditAction","RowDeleteAction","hasDeleteRole","tableFilters","name","label","description","rowExpansion","cols","width","RowActions","allowMultiple","expandable","content","DataTable","slice","dataFormatter","enablePagination","user_detail","attachment_detail","StockTrackingTable","navigate","useNavigate","renderDetails","deltas","entries","key","details","stockitem_detail","RenderStockItem","instance","link","item_detail","status","StatusRenderer","type","added","removed","RenderPart","location_detail","RenderStockLocation","buildorder_detail","RenderBuildOrder","purchaseorder_detail","RenderPurchaseOrder","salesorder_detail","RenderSalesOrder","returnorder_detail","RenderReturnOrder","customer_detail","RenderCompany","Table","entry","filters","UserFilter","RenderUser","stock_tracking_list","item","enableDownload","StockDetail","useParams","enableExpiry","treeOpen","setTreeOpen","refreshInstance","refreshInstancePromise","instanceQuery","useInstance","endpoint","path_detail","serialNumbers","serialNumbersQuery","stock_serial_info","findBySerialNumber","useFindSerialNumberForm","detailsPanel","available_stock","Math","max","allocated","isFetching","tl","copy","IPN","revision","status_custom_key","external","tr","value_formatter","Space","previous","Button","IconArrowLeft","getDetailUrl","ActionButton","IconSearch","next","IconArrowRight","unit","units","batch","bl","model_field","supplierpart","supplier_part","stocklocation","model_filters","model_formatter","full_name","parent","build","consumed_by","purchaseorder","purchase_order","salesorder","sales_order","company","customer","br","expiry_date","purchase_price","formatCurrency","currency","purchase_price_currency","multiplier","packaging","stocktake","ItemDetailsGrid","Grid","DetailsImage","part_list","image","thumbnail","base","sm","DetailsTable","showBuildAllocations","component","showSalesAllocations","salable","trackedBomItemQuery","bom_list","sub_part_trackable","limit","count","showInstalledItems","installed_items","stockPanels","IconHistory","IconBookmark","in_stock","Accordion","StylishText","BuildAllocatedStockTable","SalesOrderAllocationTable","IconChecklist","testable","IconSitemap","child_items","StockItemTable","ancestor","AttachmentPanel","model_type","model_id","NotesPanel","breadcrumbs","location_path","l","editStockItemFields","useStockFields","create","modalId","editStockItem","duplicateStockItemFields","duplicateStockData","duplicate","serial_numbers","duplicateStockItem","follow","Array","isArray","n","notifications","show","values","preDeleteContent","deleteStockItem","preFormContent","stockOperationProps","items","refresh","getOverviewUrl","stockAdjustActions","useStockAdjustActions","formProps","delete","assign","return","merge","serializeStockFields","useStockItemSerializeFields","trackable","serializeStockItem","stock_serialize","destination","orderPartsWizard","OrderPartsWizard","parts","scanIntoLocation","useBarcodeScanDialog","callback","barcode","stock_transfer","success","error","console","log","stockActions","serialized","AdminButton","LocateItemButton","BarcodeActionDropdown","barcode_hash","InvenTreeIcon","PrintingActions","ActionDropdown","IconPackages","menuActions","active","purchaseable","IconShoppingCart","openWizard","OptionsActionDropdown","DuplicateItemAction","EditItemAction","DeleteItemAction","stockBadges","available","isLoading","DetailsBadge","size","stale","expired","dialog","InstanceDetail","Stack","hasViewRole","stock_location","NavigationTree","stock_location_tree","PageDetail","hasChangePermission","PanelGroup","modals","wizard"],"mappings":"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","x_google_ignoreList":[0]}