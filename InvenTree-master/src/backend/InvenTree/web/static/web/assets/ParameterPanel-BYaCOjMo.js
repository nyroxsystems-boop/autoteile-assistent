import{ag as F,r as l,ab as i,ao as n,an as v,j as t,b1 as T,ak as m,as as d}from"./index-Db7AGPIq.js";import{S as C}from"./ThemeContext-CxdCkKtz.js";import{a as k,c as S,b as M,d as w,N as x}from"./Filter-BgnAqEQC.js";import{u as R,R as A,d as E,a as y,I as D}from"./InvenTreeTable-DmN557zY.js";import{u as B}from"./UseFilter-bvW27B5e.js";import{D as N,B as f}from"./ColumnRenderers-BUH0stTX.js";import{R as I}from"./PluginUIFeature-DCu8wTdG.js";import"./DesktopAppView-BuH2j218.js";import"./ActionButton-Cv5j5I5R.js";import"./IconChevronDown-CzbIU38Y.js";import"./index-DRtKJP-e.js";import"./QRCode-BaIEIQ2d.js";import"./browser-DSycY7kT.js";import"./IconDotsVertical-D8D3XsjG.js";import"./IconTags-DnGx22aA.js";import"./YesNoButton-BaVgP5u9.js";import"./formatters-B4ehJgEk.js";function G(){const e=R("parameter-templates"),o=F(),a=l.useMemo(()=>({name:{},description:{},units:{},model_type:{},choices:{},checkbox:{},selectionlist:{},enabled:{}}),[]),c=k({url:n.parameter_template_list,title:i._({id:"+ueC+W"}),table:e,fields:l.useMemo(()=>({...a}),[a])}),[r,s]=l.useState(void 0),p=k({url:n.parameter_template_list,title:i._({id:"wnSG3S"}),table:e,fields:l.useMemo(()=>({...a}),[a]),initialData:r}),_=S({url:n.parameter_template_list,pk:r?.pk,title:i._({id:"BXI6AQ"}),table:e}),h=M({url:n.parameter_template_list,pk:r?.pk,title:i._({id:"TEThbN"}),table:e,fields:l.useMemo(()=>({...a}),[a])}),j=l.useCallback(u=>[A({onClick:()=>{s(u),h.open()}}),E({onClick:()=>{s(u),p.open()}}),y({onClick:()=>{s(u),_.open()}})],[o]),b=B({url:v(n.parameter_template_list),method:"OPTIONS",accessor:"data.actions.POST.model_type.choices",transform:u=>({value:u.value,label:u.display_name})}),L=l.useMemo(()=>[{name:"checkbox",label:i._({id:"G1XxbZ"}),description:i._({id:"jaUfxb"})},{name:"has_choices",label:i._({id:"dBda4v"}),description:i._({id:"f1PxeH"})},{name:"has_units",label:i._({id:"YyRdJQ"}),description:i._({id:"jJ6ck0"})},{name:"enabled",label:i._({id:"RxzN1M"}),description:i._({id:"lLUu4O"})},{name:"model_type",label:i._({id:"pLosEx"}),description:i._({id:"39T88o"}),choices:b.choices}],[b.choices]),P=l.useMemo(()=>[{accessor:"name",sortable:!0,switchable:!1},N({}),{accessor:"units",sortable:!0},{accessor:"model_type"},f({accessor:"checkbox"}),{accessor:"choices"},f({accessor:"enabled",title:i._({id:"RxzN1M"})})],[]),q=l.useMemo(()=>[t.jsx(w,{tooltip:i._({id:"+ueC+W"}),onClick:()=>c.open(),hidden:!o.hasAddRole(T.part)},"add")],[o]);return t.jsxs(t.Fragment,{children:[c.modal,h.modal,p.modal,_.modal,t.jsx(D,{url:v(n.parameter_template_list),tableState:e,columns:P,props:{rowActions:j,tableActions:q,tableFilters:L,enableDownload:!0}})]})}function H({props:e}){const o=l.useMemo(()=>({field_type:"string",name:"value",required:!0,value:e.item.value,onValueChange:s=>{e.changeFn(e.idx,"value",s)}}),[e]),a=l.useMemo(()=>({field_type:"string",name:"label",required:!0,value:e.item.label,onValueChange:s=>{e.changeFn(e.idx,"label",s)}}),[e]),c=l.useMemo(()=>({field_type:"string",name:"description",required:!0,value:e.item.description,onValueChange:s=>{e.changeFn(e.idx,"description",s)}}),[e]),r=l.useMemo(()=>({field_type:"boolean",name:"active",required:!0,value:e.item.active,onValueChange:s=>{e.changeFn(e.idx,"active",s)}}),[e]);return t.jsxs(m.Tr,{children:[t.jsx(m.Td,{children:t.jsx(x,{fieldName:"value",fieldDefinition:o})}),t.jsx(m.Td,{children:t.jsx(x,{fieldName:"label",fieldDefinition:a})}),t.jsx(m.Td,{children:t.jsx(x,{fieldName:"description",fieldDefinition:c})}),t.jsx(m.Td,{children:t.jsx(x,{fieldName:"active",fieldDefinition:r})}),t.jsx(m.Td,{children:t.jsx(I,{onClick:()=>e.removeFn(e.idx)})})]},`table-row-${e.item.id??e.idx}`)}function g(){return{name:{},description:{},active:{},locked:{},source_plugin:{},source_string:{},choices:{label:i._({id:"ef6vAZ"}),description:i._({id:"f/qYPq"}),field_type:"table",value:[],headers:[{title:i._({id:"wMHvYH"})},{title:i._({id:"87a/t/"})},{title:i._({id:"Nu4oKW"})},{title:i._({id:"F6pfE9"})}],modelRenderer:e=>t.jsx(H,{props:e}),addRow:()=>({value:"",label:"",description:"",active:!0})}}}function U(){const e=R("selectionlist"),o=F(),a=l.useMemo(()=>[{accessor:"name",sortable:!0},N({sortable:!0}),f({accessor:"active"}),f({accessor:"locked"}),{accessor:"source_plugin",sortable:!0},{accessor:"source_string",sortable:!0},{accessor:"entry_count"}],[]),c=k({url:n.selectionlist_list,title:i._({id:"HCpwcG"}),fields:g(),table:e}),[r,s]=l.useState(void 0),p=M({url:n.selectionlist_list,pk:r,title:i._({id:"n7tNkj"}),fields:g(),table:e}),_=S({url:n.selectionlist_list,pk:r,title:i._({id:"fo+0WX"}),table:e}),h=l.useCallback(b=>[A({hidden:!o.hasChangeRole(T.admin),onClick:()=>{s(b.pk),p.open()}}),y({hidden:!o.hasDeleteRole(T.admin),onClick:()=>{s(b.pk),_.open()}})],[o]),j=l.useMemo(()=>[t.jsx(w,{onClick:()=>c.open(),tooltip:i._({id:"HCpwcG"})},"add-selection-list")],[]);return t.jsxs(t.Fragment,{children:[c.modal,p.modal,_.modal,t.jsx(D,{url:v(n.selectionlist_list),tableState:e,columns:a,props:{rowActions:h,tableActions:j,enableDownload:!0}})]})}function ne(){return t.jsxs(d,{multiple:!0,defaultValue:["parameter-templates"],children:[t.jsxs(d.Item,{value:"parameter-templates",children:[t.jsx(d.Control,{children:t.jsx(C,{size:"lg",children:i._({id:"ciZG57"})})}),t.jsx(d.Panel,{children:t.jsx(G,{})})]},"parameter-templates"),t.jsxs(d.Item,{value:"selection-lists",children:[t.jsx(d.Control,{children:t.jsx(C,{size:"lg",children:i._({id:"2q2/qs"})})}),t.jsx(d.Panel,{children:t.jsx(U,{})})]},"selection-lists")]})}export{ne as default};
//# sourceMappingURL=ParameterPanel-BYaCOjMo.js.map
