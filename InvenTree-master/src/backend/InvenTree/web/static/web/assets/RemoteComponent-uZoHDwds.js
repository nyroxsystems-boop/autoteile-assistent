import{r as o,cE as f,u as g,j as t,aL as x,e as E,q as R,ab as u,bk as j,S as C,aq as S,d as $,a8 as v}from"./index-Db7AGPIq.js";import{A as L}from"./DesktopAppView-BuH2j218.js";import{aL as b,B as P}from"./ThemeContext-CxdCkKtz.js";import{v as _}from"./PluginUIFeature-DCu8wTdG.js";function w({source:n,defaultFunctionName:l,context:e}){const a=o.useRef(null),s=o.useRef(null);o.useEffect(()=>{a.current&&s.current===null&&(s.current=f.createRoot(a.current))},[s]);const[p,d]=o.useState(void 0),c=o.useMemo(()=>{const{getHost:i}=g.getState(),r=new URL(n,i());return r.pathname.includes(":")&&r.pathname.split(":")[1]||l},[n,l]),h=o.useCallback(()=>{if(!s.current)return;const i={...e,reloadContent:h};n&&l?_(n,c).then(r=>{if(r)try{r.length>1?r(a.current,i):s.current?.render(t.jsx(L,{client:R,api:E,children:t.jsx(x,{theme:i.theme,defaultColorScheme:i.colorScheme,children:t.jsx(b,{children:r(i)})})})),d("")}catch(m){d(`${m}`),console.error(m)}else d(`${n} / ${r}`)}).catch(r=>{console.error(`ERR: Failed to load remote plugin function: ${n} /${c}`)}):d(`${u._({id:"wOa7Q9"})} - ${n} /${c}`)},[a.current,s.current,n,l,e]);return o.useEffect(()=>{h()},[c,s.current,e.id,e.model,e.instance,e.user,e.colorScheme,e.locale,e.context]),t.jsx(P,{label:j(`RemoteComponent-${c}`),children:t.jsxs(C,{gap:"xs",children:[p&&t.jsx(S,{color:"red",title:u._({id:"HY5802"}),icon:t.jsx(v,{}),children:t.jsxs($,{children:[u._({id:"IYgnvh"}),": ",p]})}),a&&t.jsx("div",{ref:a})]})})}export{w as R};
//# sourceMappingURL=RemoteComponent-uZoHDwds.js.map
