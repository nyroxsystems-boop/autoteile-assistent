import{ag as w,r as s,ab as o,j as n,aD as k,bb as g,ao as c,b1 as t,an as x}from"./index-Db7AGPIq.js";import{af as D,b as j,a as y,c as F,d as T}from"./Filter-BgnAqEQC.js";import{u as E,R as S,a as v,I as U}from"./InvenTreeTable-DmN557zY.js";import{a as I}from"./ThemeContext-CxdCkKtz.js";function G({companyId:i,params:_}){const a=w(),f=I(),l=E("contact"),C=s.useMemo(()=>{const e=[{accessor:"name",sortable:!0,switchable:!1},{accessor:"phone",switchable:!0,sortable:!1},{accessor:"email",switchable:!0,sortable:!1},{accessor:"role",switchable:!0,sortable:!1}];return i===void 0&&e.unshift({accessor:"company_name",title:o._({id:"7i8j3G"}),sortable:!1,switchable:!0,render:r=>n.jsx(D,{primary:r.company_name,url:k(g.company,r.company),navigate:f})}),e},[]),d=s.useMemo(()=>({company:{},name:{},phone:{},email:{},role:{}}),[]),[u,p]=s.useState(0),m=j({url:c.contact_list,pk:u,title:o._({id:"mQpWAe"}),fields:d,onFormSuccess:e=>l.updateRecord(e)}),b=y({url:c.contact_list,title:o._({id:"M0FgOk"}),initialData:{company:i},fields:d,table:l}),h=F({url:c.contact_list,pk:u,title:o._({id:"0oMKRL"}),table:l}),R=s.useCallback(e=>{const r=a.hasChangeRole(t.purchase_order)||a.hasChangeRole(t.sales_order),M=a.hasDeleteRole(t.purchase_order)||a.hasDeleteRole(t.sales_order);return[S({hidden:!r,onClick:()=>{p(e.pk),m.open()}}),v({hidden:!M,onClick:()=>{p(e.pk),h.open()}})]},[a]),A=s.useMemo(()=>{const e=a.hasAddRole(t.purchase_order)||a.hasAddRole(t.sales_order);return[n.jsx(T,{tooltip:o._({id:"QsNWTM"}),onClick:()=>b.open(),hidden:!e},"add-contact")]},[a]);return n.jsxs(n.Fragment,{children:[b.modal,m.modal,h.modal,n.jsx(U,{url:x(c.contact_list),tableState:l,columns:C,props:{enableDownload:!0,rowActions:R,tableActions:A,params:{..._,company:i}}})]})}export{G as C};
//# sourceMappingURL=ContactTable-e2_54XVE.js.map
