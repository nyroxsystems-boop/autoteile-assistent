import{r as d,j as e,ak as t,c as x,e as I,an as p,ao as u,ab as s,ag as A,N as f,bF as E,ac as g,a8 as N,aq as M,am as o,as as n}from"./index-Db7AGPIq.js";import{v as S,a4 as R,S as _}from"./ThemeContext-CxdCkKtz.js";import{f as w}from"./formatters-B4ehJgEk.js";import{A as C}from"./ActionButton-Cv5j5I5R.js";import{u as L,a as V,I as D}from"./InvenTreeTable-DmN557zY.js";import{a as k,c as y}from"./Filter-BgnAqEQC.js";import{a as B}from"./ColumnRenderers-BUH0stTX.js";import"./DesktopAppView-BuH2j218.js";import"./IconChevronDown-CzbIU38Y.js";import"./index-DRtKJP-e.js";import"./QRCode-BaIEIQ2d.js";import"./browser-DSycY7kT.js";import"./IconDotsVertical-D8D3XsjG.js";import"./IconTags-DnGx22aA.js";import"./YesNoButton-BaVgP5u9.js";function F({keys:a}){const{data:l,isLoading:m}=S({queryKey:["config"],queryFn:async()=>I.get(p(u.config_list)).then(r=>r.data)}),c=d.useMemo(()=>l?a.map(r=>({key:r,value:l.find(h=>h.key===r)})):[],[m,l,a]);return e.jsx("span",{children:e.jsxs(t,{withColumnBorders:!0,withTableBorder:!0,striped:!0,children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{children:e.jsx(x,{id:"EFKJQT"})}),e.jsx(t.Th,{children:e.jsx(x,{id:"wdxz7K"})}),e.jsx(t.Th,{children:e.jsx(x,{id:"+b7T3G"})})]})}),e.jsx(t.Tbody,{children:c.map(r=>e.jsxs(t.Tr,{children:[e.jsx(t.Td,{children:r.key}),e.jsx(t.Td,{children:r.value?.source}),e.jsx(t.Td,{children:w(r.value?.accessed,{showTime:!0})})]},r.key))})]})})}function P({status:a}){switch(a){case"A":return e.jsx(o,{color:"blue",children:s._({id:"x7ymhZ"})});case"S":return e.jsx(o,{color:"blue",children:s._({id:"h69WC6"})});case"F":return e.jsx(o,{color:"red",children:s._({id:"7Bj3x9"})});case"D":return e.jsx(o,{color:"green",children:s._({id:"BTOhSm"})});case"R":return e.jsx(o,{color:"green",children:s._({id:"cQlPDN"})});case"C":return e.jsx(o,{color:"green",children:s._({id:"KNBs+p"})})}return"-"}function Q(){const a=k({url:u.email_test,title:s._({id:"89aQ3n"}),fields:{email:{}},successMessage:s._({id:"Xl929X"}),onFormSuccess:i=>{c.refreshTable()}}),l=A(),m=d.useMemo(()=>[e.jsx(C,{icon:e.jsx(R,{}),tooltip:s._({id:"89aQ3n"}),onClick:()=>a.open()},"test")],[]),c=L("emails","pk"),[r,h]=d.useState(""),j=y({url:u.email_list,pk:r,title:s._({id:"a3N6gf"}),successMessage:s._({id:"p7wv9/"}),table:c}),T=d.useMemo(()=>[{accessor:"subject",title:s._({id:"UJmAAK"}),sortable:!0},{accessor:"to",title:s._({id:"/jQctM"}),sortable:!0},{accessor:"sender",title:s._({id:"HW5fQk"}),sortable:!0},{accessor:"status",title:s._({id:"uAQUqI"}),sortable:!0,render:i=>e.jsxs(f,{justify:"space-between",children:[e.jsx(P,{status:i.status}),i.error_message&&e.jsxs(E,{children:[e.jsx(E.Target,{children:e.jsx(g,{color:"red",variant:"transparent",size:"sm",children:e.jsx(N,{})})}),e.jsx(E.Dropdown,{children:e.jsx(M,{color:"red",title:s._({id:"SlfejT"}),children:i.error_message})})]})]}),switchable:!0},{accessor:"direction",title:s._({id:"MRB7nI"}),sortable:!0,render:i=>i.direction==="incoming"?s._({id:"RAMaAx"}):s._({id:"O0Z2Xr"}),switchable:!0},B({accessor:"timestamp",title:s._({id:"8TMaZI"}),sortable:!0,switchable:!0,extra:{showTime:!0}})],[]),b=d.useCallback(i=>[V({onClick:()=>{h(i.pk),j.open()},hidden:!l.isStaff()})],[l]);return e.jsxs(e.Fragment,{children:[a.modal,j.modal,e.jsx(D,{tableState:c,url:p(u.email_list),columns:T,props:{rowActions:b,enableSearch:!0,enableColumnSwitching:!0,enableSelection:!0,enableBulkDelete:!0,tableActions:m}})]})}function se(){return e.jsxs(n,{multiple:!0,defaultValue:["emails"],children:[e.jsxs(n.Item,{value:"emails",children:[e.jsx(n.Control,{children:e.jsx(_,{size:"lg",children:s._({id:"VKLeoV"})})}),e.jsx(n.Panel,{children:e.jsx(Q,{})})]},"emails"),e.jsxs(n.Item,{value:"settings",children:[e.jsx(n.Control,{children:e.jsx(_,{size:"lg",children:s._({id:"Tz0i8g"})})}),e.jsx(n.Panel,{children:e.jsx(F,{keys:["INVENTREE_EMAIL_BACKEND","INVENTREE_EMAIL_HOST","INVENTREE_EMAIL_PORT","INVENTREE_EMAIL_USERNAME","INVENTREE_EMAIL_PASSWORD","INVENTREE_EMAIL_PREFIX","INVENTREE_EMAIL_TLS","INVENTREE_EMAIL_SSL","INVENTREE_EMAIL_SENDER"]},"email_settings")})]},"settings")]})}export{se as default};
//# sourceMappingURL=EmailManagementPanel-DxF1XC4R.js.map
