{"version":3,"file":"Scan-4sHwWeFY.js","sources":["../../../../../../frontend/node_modules/@mantine/hooks/esm/use-list-state/use-list-state.mjs","../../../../../../frontend/node_modules/@tabler/icons-react/dist/esm/icons/IconNumber.mjs","../../../../../../frontend/src/tables/general/BarcodeScanTable.tsx","../../../../../../frontend/src/pages/Index/Scan.tsx"],"sourcesContent":["'use client';\nimport { useState } from 'react';\n\nfunction useListState(initialValue = []) {\n  const [state, setState] = useState(initialValue);\n  const append = (...items) => setState((current) => [...current, ...items]);\n  const prepend = (...items) => setState((current) => [...items, ...current]);\n  const insert = (index, ...items) => setState((current) => [...current.slice(0, index), ...items, ...current.slice(index)]);\n  const apply = (fn) => setState((current) => current.map((item, index) => fn(item, index)));\n  const remove = (...indices) => setState((current) => current.filter((_, index) => !indices.includes(index)));\n  const pop = () => setState((current) => {\n    const cloned = [...current];\n    cloned.pop();\n    return cloned;\n  });\n  const shift = () => setState((current) => {\n    const cloned = [...current];\n    cloned.shift();\n    return cloned;\n  });\n  const reorder = ({ from, to }) => setState((current) => {\n    const cloned = [...current];\n    const item = current[from];\n    cloned.splice(from, 1);\n    cloned.splice(to, 0, item);\n    return cloned;\n  });\n  const swap = ({ from, to }) => setState((current) => {\n    const cloned = [...current];\n    const fromItem = cloned[from];\n    const toItem = cloned[to];\n    cloned.splice(to, 1, fromItem);\n    cloned.splice(from, 1, toItem);\n    return cloned;\n  });\n  const setItem = (index, item) => setState((current) => {\n    const cloned = [...current];\n    cloned[index] = item;\n    return cloned;\n  });\n  const setItemProp = (index, prop, value) => setState((current) => {\n    const cloned = [...current];\n    cloned[index] = { ...cloned[index], [prop]: value };\n    return cloned;\n  });\n  const applyWhere = (condition, fn) => setState(\n    (current) => current.map((item, index) => condition(item, index) ? fn(item, index) : item)\n  );\n  const filter = (fn) => {\n    setState((current) => current.filter(fn));\n  };\n  return [\n    state,\n    {\n      setState,\n      append,\n      prepend,\n      insert,\n      pop,\n      shift,\n      apply,\n      applyWhere,\n      remove,\n      reorder,\n      swap,\n      setItem,\n      setItemProp,\n      filter\n    }\n  ];\n}\n\nexport { useListState };\n//# sourceMappingURL=use-list-state.mjs.map\n","/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M4 17v-10l7 10v-10\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M15 17h5\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M17.5 10m-2.5 0a2.5 3 0 1 0 5 0a2.5 3 0 1 0 -5 0\", \"key\": \"svg-2\" }]];\nconst IconNumber = createReactComponent(\"outline\", \"number\", \"Number\", __iconNode);\n\nexport { __iconNode, IconNumber as default };\n//# sourceMappingURL=IconNumber.mjs.map\n","import { ActionButton } from '@lib/components/ActionButton';\nimport { type RowAction, RowViewAction } from '@lib/components/RowActions';\nimport type { TableColumn } from '@lib/types/Tables';\nimport { t } from '@lingui/core/macro';\nimport { IconTrash } from '@tabler/icons-react';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport type { BarcodeScanItem } from '../../components/barcodes/BarcodeScanItem';\nimport { RenderInstance } from '../../components/render/Instance';\nimport { useTable } from '../../hooks/UseTable';\nimport { useUserState } from '../../states/UserState';\nimport { InvenTreeTable } from '../InvenTreeTable';\n\n/**\n * A table for showing barcode scan history data on the scan index page\n */\nexport default function BarcodeScanTable({\n  records,\n  onItemsSelected,\n  onItemsDeleted\n}: {\n  records: BarcodeScanItem[];\n  onItemsSelected: (items: string[]) => void;\n  onItemsDeleted: (items: string[]) => void;\n}) {\n  const navigate = useNavigate();\n  const user = useUserState();\n\n  const table = useTable('barcode-scan-results', 'id');\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    return [\n      {\n        accessor: 'instance',\n        title: t`Item`,\n        sortable: false,\n        switchable: false,\n        render: (record) => {\n          if (record.instance) {\n            return (\n              <RenderInstance model={record.model} instance={record.instance} />\n            );\n          } else {\n            return '-';\n          }\n        }\n      },\n      {\n        accessor: 'model',\n        title: t`Model`,\n        sortable: false\n      },\n      {\n        accessor: 'barcode',\n        title: t`Barcode`,\n        sortable: false\n      },\n      {\n        accessor: 'timestamp',\n        title: t`Timestamp`,\n        sortable: false,\n        render: (record) => {\n          return record.timestamp?.toLocaleString();\n        }\n      }\n    ];\n  }, []);\n\n  const rowActions = useCallback((record: BarcodeScanItem) => {\n    const actions: RowAction[] = [];\n\n    if (record.model && record.pk && record.instance) {\n      actions.push(\n        RowViewAction({\n          title: t`View Item`,\n          modelId: record.instance?.pk,\n          modelType: record.model,\n          navigate: navigate,\n          hidden: !user.hasViewPermission(record.model)\n        })\n      );\n    }\n\n    return actions;\n  }, []);\n\n  const tableActions = useMemo(() => {\n    return [\n      <ActionButton\n        disabled={!table.hasSelectedRecords}\n        icon={<IconTrash />}\n        color='red'\n        tooltip={t`Delete selected records`}\n        onClick={() => {\n          onItemsDeleted(table.selectedIds);\n          table.clearSelectedRecords();\n        }}\n      />\n    ];\n  }, [table.hasSelectedRecords, table.selectedIds]);\n\n  useEffect(() => {\n    onItemsSelected(table.selectedIds);\n  }, [table.selectedIds]);\n\n  return (\n    <>\n      <InvenTreeTable\n        tableState={table}\n        tableData={records}\n        columns={tableColumns}\n        props={{\n          enableFilters: false,\n          enableSelection: true,\n          enablePagination: false,\n          enableSearch: false,\n          enableRefresh: false,\n          rowActions: rowActions,\n          tableActions: tableActions\n        }}\n      />\n    </>\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Trans } from '@lingui/react/macro';\nimport {\n  ActionIcon,\n  Alert,\n  Divider,\n  Grid,\n  Group,\n  Paper,\n  Space,\n  Stack,\n  Text\n} from '@mantine/core';\nimport { randomId, useListState, useLocalStorage } from '@mantine/hooks';\nimport {\n  IconAlertCircle,\n  IconNumber,\n  IconQuestionMark\n} from '@tabler/icons-react';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelInformationDict } from '@lib/enums/ModelInformation';\nimport type { ModelType } from '@lib/enums/ModelType';\nimport { apiUrl } from '@lib/functions/Api';\nimport { hideNotification, showNotification } from '@mantine/notifications';\nimport dayjs from 'dayjs';\nimport { api } from '../../App';\nimport { BarcodeInput } from '../../components/barcodes/BarcodeInput';\nimport type { BarcodeScanItem } from '../../components/barcodes/BarcodeScanItem';\nimport { StylishText } from '../../components/items/StylishText';\nimport PageTitle from '../../components/nav/PageTitle';\nimport {\n  notYetImplemented,\n  showApiErrorMessage\n} from '../../functions/notifications';\nimport BarcodeScanTable from '../../tables/general/BarcodeScanTable';\n\nexport default function Scan() {\n  const [history, historyHandlers] = useListState<BarcodeScanItem>([]);\n\n  const [historyStorage, setHistoryStorage] = useLocalStorage<\n    BarcodeScanItem[]\n  >({\n    key: 'scan-history',\n    defaultValue: []\n  });\n\n  const [selection, setSelection] = useState<string[]>([]);\n\n  // Fetch model instance based on scan item\n  const fetchInstance = useCallback(\n    (item: BarcodeScanItem) => {\n      if (!item.model || !item.pk) {\n        return;\n      }\n\n      // Prevent duplicates\n      if (history.find((i) => i.model == item.model && i.pk == item.pk)) {\n        hideNotification('duplicate-barcode');\n\n        showNotification({\n          id: 'duplicate-barcode',\n          title: t`Duplicate`,\n          message: t`Item already scanned`,\n          color: 'orange'\n        });\n        return;\n      }\n\n      const model_info = ModelInformationDict[item.model];\n\n      api\n        .get(apiUrl(model_info.api_endpoint, item.pk))\n        .then((response) => {\n          item.instance = response.data;\n          historyHandlers.append(item);\n        })\n        .catch((error) => {\n          showApiErrorMessage({\n            error: error,\n            title: t`API Error`,\n            message: t`Failed to fetch instance data`\n          });\n        });\n    },\n    [api, history]\n  );\n\n  // Barcode scanning callback function\n  const scanBarcode = useCallback(\n    (barcode: string) => {\n      api\n        .post(apiUrl(ApiEndpoints.barcode), { barcode: barcode })\n        .then((response) => {\n          const data = response?.data ?? {};\n\n          let match = false;\n\n          for (const model_type of Object.keys(ModelInformationDict)) {\n            if (data[model_type]?.pk) {\n              match = true;\n              fetchInstance({\n                id: randomId(),\n                barcode: barcode,\n                data: data,\n                timestamp: dayjs().toDate(),\n                source: 'scan',\n                model: model_type as ModelType,\n                pk: data[model_type]?.pk\n              });\n            }\n          }\n\n          // If no match is found, add an empty result\n          if (!match) {\n            historyHandlers.append({\n              id: randomId(),\n              barcode: barcode,\n              data: data,\n              timestamp: dayjs().toDate(),\n              source: 'scan'\n            });\n          }\n        })\n        .catch((error) => {\n          showApiErrorMessage({\n            error: error,\n            message: t`Failed to scan barcode`,\n            title: t`Scan Error`,\n            field: 'error'\n          });\n        });\n    },\n    [fetchInstance]\n  );\n\n  // save history data to session storage\n  useEffect(() => {\n    if (history.length === 0) return;\n    setHistoryStorage(history);\n  }, [history]);\n\n  // load data from session storage on mount\n  useEffect(() => {\n    historyHandlers.setState(historyStorage);\n  }, [historyStorage]);\n\n  // Items selected for action\n  const selectedItems: BarcodeScanItem[] = useMemo(() => {\n    return history.filter((item) => selection.includes(item.id));\n  }, [selection, history]);\n\n  // selected actions component\n  const SelectedActions = useMemo(() => {\n    const uniqueObjectTypes = new Set(selectedItems.map((item) => item.model));\n\n    if (uniqueObjectTypes.size === 0) {\n      return (\n        <Group gap={0}>\n          <IconQuestionMark color='orange' />\n          <Trans>Selected elements are not known</Trans>\n        </Group>\n      );\n    } else if (uniqueObjectTypes.size > 1) {\n      return (\n        <Group gap={0}>\n          <IconAlertCircle color='orange' />\n          <Trans>Multiple object types selected</Trans>\n        </Group>\n      );\n    }\n\n    return (\n      <>\n        <Text fz='sm' c='dimmed'>\n          <Trans>Actions ... </Trans>\n        </Text>\n        <Group>\n          <ActionIcon\n            onClick={notYetImplemented}\n            title={t`Count`}\n            variant='default'\n          >\n            <IconNumber />\n          </ActionIcon>\n        </Group>\n      </>\n    );\n  }, [selectedItems]);\n\n  return (\n    <>\n      <PageTitle title={t`Barcode Scanning`} />\n      <Group justify='space-between'>\n        <Group justify='left'>\n          <StylishText size='xl'>\n            <Trans>Barcode Scanning</Trans>\n          </StylishText>\n        </Group>\n      </Group>\n      <Space h={'md'} />\n      <Grid maw={'100%'}>\n        <Grid.Col span={4}>\n          <Paper p='sm' shadow='xs'>\n            <Stack gap='xs'>\n              <StylishText size='lg'>{t`Barcode Input`}</StylishText>\n              <Divider />\n              <BarcodeInput onScan={scanBarcode} />\n            </Stack>\n          </Paper>\n          <Paper p='sm' shadow='xs'>\n            <Stack gap='xs'>\n              <StylishText size='lg'>{t`Action`}</StylishText>\n              <Divider />\n              {selection.length === 0 ? (\n                <Alert title={t`No Items Selected`} color='blue'>\n                  <Trans>Scan and select items to perform actions</Trans>\n                </Alert>\n              ) : (\n                <>\n                  <Text>\n                    <Trans>{selection.length} items selected</Trans>\n                  </Text>\n                  {SelectedActions}\n                </>\n              )}\n            </Stack>\n          </Paper>\n        </Grid.Col>\n        <Grid.Col span={8}>\n          <Paper p='sm' shadow='xs'>\n            <Stack gap='xs'>\n              <Group justify='space-between'>\n                <StylishText size='lg'>{t`Scanned Items`}</StylishText>\n              </Group>\n              <Divider />\n              <BarcodeScanTable\n                records={history}\n                onItemsSelected={(ids: string[]) => {\n                  setSelection(ids);\n                }}\n                onItemsDeleted={(ids: string[]) => {\n                  const newHistory = history.filter(\n                    (item) => !ids.includes(item.id)\n                  );\n\n                  historyHandlers.setState(newHistory);\n                  setHistoryStorage(newHistory);\n                }}\n              />\n            </Stack>\n          </Paper>\n        </Grid.Col>\n      </Grid>\n    </>\n  );\n}\n"],"names":["useListState","initialValue","state","setState","useState","items","current","index","cloned","fn","item","condition","indices","_","from","to","fromItem","toItem","prop","value","__iconNode","IconNumber","createReactComponent","BarcodeScanTable","records","onItemsSelected","onItemsDeleted","navigate","useNavigate","user","useUserState","table","useTable","tableColumns","useMemo","accessor","title","_i18n","id","sortable","switchable","render","record","instance","RenderInstance","model","timestamp","toLocaleString","rowActions","useCallback","actions","pk","push","RowViewAction","modelId","modelType","hidden","hasViewPermission","tableActions","jsx","ActionButton","hasSelectedRecords","IconTrash","selectedIds","clearSelectedRecords","useEffect","Fragment","InvenTreeTable","enableFilters","enableSelection","enablePagination","enableSearch","enableRefresh","Scan","history","historyHandlers","historyStorage","setHistoryStorage","useLocalStorage","key","defaultValue","selection","setSelection","fetchInstance","find","i","hideNotification","showNotification","message","color","model_info","ModelInformationDict","api","get","apiUrl","api_endpoint","then","response","data","append","catch","error","showApiErrorMessage","scanBarcode","barcode","post","ApiEndpoints","match","model_type","Object","keys","randomId","dayjs","toDate","source","field","length","selectedItems","filter","includes","SelectedActions","uniqueObjectTypes","Set","map","size","jsxs","Group","IconQuestionMark","_Trans","IconAlertCircle","Text","ActionIcon","notYetImplemented","PageTitle","StylishText","Space","Grid","Paper","Stack","Divider","BarcodeInput","Alert","values","0","ids","newHistory"],"mappings":"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","x_google_ignoreList":[0,1]}