{"version":3,"file":"LocateItemButton-CGQeChN6.js","sources":["../../../../../../frontend/node_modules/@tabler/icons-react/dist/esm/icons/IconRadar.mjs","../../../../../../frontend/src/components/plugins/LocateItemButton.tsx"],"sourcesContent":["/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M21 12h-8a1 1 0 1 0 -1 1v8a9 9 0 0 0 9 -9\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M16 9a5 5 0 1 0 -7 7\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M20.486 9a9 9 0 1 0 -11.482 11.495\", \"key\": \"svg-2\" }]];\nconst IconRadar = createReactComponent(\"outline\", \"radar\", \"Radar\", __iconNode);\n\nexport { __iconNode, IconRadar as default };\n//# sourceMappingURL=IconRadar.mjs.map\n","import { ActionButton } from '@lib/components/ActionButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { apiUrl } from '@lib/functions/Api';\nimport type { ApiFormFieldSet } from '@lib/types/Forms';\nimport { t } from '@lingui/core/macro';\nimport { IconRadar } from '@tabler/icons-react';\nimport { useEffect, useMemo, useState } from 'react';\nimport { useCreateApiFormModal } from '../../hooks/UseForm';\nimport { usePluginsWithMixin } from '../../hooks/UsePlugins';\nimport type { PluginInterface } from './PluginInterface';\n\nexport default function LocateItemButton({\n  stockId,\n  locationId\n}: Readonly<{\n  stockId?: number;\n  locationId?: number;\n}>) {\n  const locatePlugins = usePluginsWithMixin('locate');\n\n  const [selectedPlugin, setSelectedPlugin] = useState<string | undefined>(\n    undefined\n  );\n\n  useEffect(() => {\n    // Ensure that the selected plugin is in the list of available plugins\n    if (selectedPlugin && locatePlugins) {\n      const plugin = locatePlugins.find(\n        (plugin: PluginInterface) => plugin.key === selectedPlugin\n      );\n      if (!plugin) {\n        setSelectedPlugin(undefined);\n      }\n    } else {\n      setSelectedPlugin(locatePlugins[0]?.key ?? undefined);\n    }\n  }, [selectedPlugin, locatePlugins]);\n\n  const locateFields: ApiFormFieldSet = useMemo(() => {\n    return {\n      plugin: {\n        field_type: 'choice',\n        value: selectedPlugin,\n        onValueChange: (value: string) => {\n          setSelectedPlugin(value);\n        },\n        choices: locatePlugins.map((plugin: PluginInterface) => {\n          return {\n            value: plugin.key,\n            display_name: plugin.meta?.human_name ?? plugin.name\n          };\n        })\n      },\n      item: {\n        hidden: true,\n        value: stockId\n      },\n      location: {\n        hidden: true,\n        value: locationId\n      }\n    };\n  }, [stockId, locationId, locatePlugins]);\n\n  const locateForm = useCreateApiFormModal({\n    url: apiUrl(ApiEndpoints.plugin_locate_item),\n    method: 'POST',\n    title: t`Locate Item`,\n    fields: locateFields,\n    successMessage: t`Item location requested`\n  });\n\n  if (!locatePlugins || locatePlugins.length === 0) {\n    return null;\n  }\n\n  if (!stockId && !locationId) {\n    return null;\n  }\n\n  return (\n    <>\n      {locateForm.modal}\n      <ActionButton\n        icon={<IconRadar />}\n        variant='outline'\n        size='lg'\n        tooltip={t`Locate Item`}\n        onClick={locateForm.open}\n        tooltipAlignment='bottom'\n      />\n    </>\n  );\n}\n"],"names":["__iconNode","IconRadar","createReactComponent","LocateItemButton","stockId","locationId","locatePlugins","usePluginsWithMixin","selectedPlugin","setSelectedPlugin","useState","undefined","useEffect","find","plugin","key","locateFields","useMemo","field_type","value","onValueChange","choices","map","display_name","meta","human_name","name","item","hidden","location","locateForm","useCreateApiFormModal","url","apiUrl","ApiEndpoints","plugin_locate_item","method","title","_i18n","_","id","fields","successMessage","length","jsxs","Fragment","modal","jsx","ActionButton","open"],"mappings":"mNAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,EAAa,CAAC,CAAC,OAAQ,CAAE,EAAK,4CAA6C,IAAO,OAAO,CAAE,EAAG,CAAC,OAAQ,CAAE,EAAK,uBAAwB,IAAO,QAAS,EAAG,CAAC,OAAQ,CAAE,EAAK,qCAAsC,IAAO,OAAO,CAAE,CAAC,EAChOC,EAAYC,EAAqB,UAAW,QAAS,QAASF,CAAU,ECC9E,SAAwBG,EAAiB,CACvCC,QAAAA,EACAC,WAAAA,CAID,EAAG,CACF,MAAMC,EAAgBC,EAAoB,QAAQ,EAE5C,CAACC,EAAgBC,CAAiB,EAAIC,EAAAA,SAC1CC,MACF,EAEAC,EAAAA,UAAU,IAAM,CAEVJ,GAAkBF,EACLA,EAAcO,KAC1BC,GAA4BA,EAAOC,MAAQP,CAC9C,GAEEC,EAAkBE,MAAS,EAG7BF,EAAkBH,EAAc,CAAC,GAAGS,KAAOJ,MAAS,CAExD,EAAG,CAACH,EAAgBF,CAAa,CAAC,EAElC,MAAMU,EAAgCC,EAAAA,QAAQ,KACrC,CACLH,OAAQ,CACNI,WAAY,SACZC,MAAOX,EACPY,cAAgBD,GAAkB,CAChCV,EAAkBU,CAAK,CACzB,EACAE,QAASf,EAAcgB,IAAKR,IACnB,CACLK,MAAOL,EAAOC,IACdQ,aAAcT,EAAOU,MAAMC,YAAcX,EAAOY,IAAAA,EAEnD,CAAA,EAEHC,KAAM,CACJC,OAAQ,GACRT,MAAOf,CAAAA,EAETyB,SAAU,CACRD,OAAQ,GACRT,MAAOd,CAAAA,CACT,GAED,CAACD,EAASC,EAAYC,CAAa,CAAC,EAEjCwB,EAAaC,EAAsB,CACvCC,IAAKC,EAAOC,EAAaC,kBAAkB,EAC3CC,OAAQ,OACRC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAa,EACpBC,OAAQzB,EACR0B,eAAcJ,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAyB,CAAC,CAC3C,EAMD,MAJI,CAAClC,GAAiBA,EAAcqC,SAAW,GAI3C,CAACvC,GAAW,CAACC,EACR,KAIPuC,EAAAA,KAAAC,WAAA,CACGf,SAAAA,CAAAA,EAAWgB,MACZC,EAAAA,IAACC,EAAA,CACC,KAAMD,EAAAA,IAAC9C,EAAA,CAAA,CAAS,EAChB,QAAQ,UACR,KAAK,KACL,QAAQqC,EAAAC,EAAC,CAAAC,GAAA,QAAA,CAAa,EACtB,QAASV,EAAWmB,KACpB,iBAAiB,QAAA,CAAQ,CAAA,EAE7B,CAEJ","x_google_ignoreList":[0]}