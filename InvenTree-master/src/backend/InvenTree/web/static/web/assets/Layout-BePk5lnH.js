import{K as ie,aO as gt,aP as mt,aQ as ft,aR as xt,aS as W,aT as B,j as e,aU as St,a4 as oe,M as se,r as u,aV as _t,V as We,ad as jt,aW as bt,aX as vt,U as kt,aY as yt,aZ as Et,a_ as Ct,a$ as wt,b0 as At,u as Be,a as ce,az as pe,ag as H,ab as r,b1 as j,aC as G,aa as V,ac as M,b2 as It,b3 as v,N as w,d as T,b4 as Rt,b5 as ye,c as z,b6 as Nt,S as re,aj as Ae,b7 as Vt,A as Ie,b8 as F,b9 as Re,ba as Mt,bb as y,bc as Fe,al as q,b as Ne,e as X,an as J,ao as Y,aq as de,a7 as zt,C as Qe,bd as $e,a8 as Ke,aD as Lt,$ as Tt,g as Ze,be as ge,as as le,ay as Dt,bf as Ee,bg as Ot,bh as Ge,av as Pt,ah as Ht,bi as Ce,bj as Ut,ar as ae,ai as Wt,bk as Bt}from"./index-Db7AGPIq.js";import{k as qe,I as P,n as Ve,o as Xe,p as Ft,q as Qt,a as Q,r as $t,S as Me,t as Pe,v as me,B as ze,w as ue,x as Kt,y as Zt,z as Gt,A as qt,C as Xt,u as Je,O as Jt,j as Yt}from"./ThemeContext-CxdCkKtz.js";import{a as Ye,s as es,l as ts,d as ss,D as ns,A as is,g as He}from"./links-PrAtDKSR.js";import{I as os,a as rs,b as as}from"./IconChevronDown-CzbIU38Y.js";import{u as ls,R as cs,S as ds,A as us}from"./Filter-BgnAqEQC.js";import{u as hs,c as ps,P as gs}from"./PluginUIFeature-DCu8wTdG.js";import{u as ms}from"./UsePluginUIFeature-BQYZssYs.js";import{A as fs}from"./Alerts-BDuxLv_A.js";import{L as we,N as xs}from"./DesktopAppView-BuH2j218.js";import{I as Ss,a as _s}from"./IconSun-DtEUHkRS.js";import{u as js,I as bs}from"./UseInstanceName-A7fBB8O5.js";import{I as et}from"./IconBellCheck-DTWWTko0.js";import{g as vs}from"./ModelType-DSs66IM7.js";import{I as ks}from"./IconAlertCircle-DEV3UHRn.js";import"./ActionButton-Cv5j5I5R.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"M7 9a2 2 0 1 1 2 -2v10a2 2 0 1 1 -2 -2h10a2 2 0 1 1 -2 2v-10a2 2 0 1 1 2 2h-10",key:"svg-0"}]],Es=ie("outline","command","Command",ys);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]],ws=ie("outline","logout","Logout",Cs);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z",key:"svg-0"}]],Is=ie("outline","pointer","Pointer",As);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]],Ns=ie("outline","table-export","TableExport",Rs);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h2.5",key:"svg-1"}],["path",{d:"M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M19.001 15.5v1.5",key:"svg-3"}],["path",{d:"M19.001 21v1.5",key:"svg-4"}],["path",{d:"M22.032 17.25l-1.299 .75",key:"svg-5"}],["path",{d:"M17.27 20l-1.3 .75",key:"svg-6"}],["path",{d:"M15.97 17.25l1.3 .75",key:"svg-7"}],["path",{d:"M20.733 20l1.3 .75",key:"svg-8"}]],tt=ie("outline","user-cog","UserCog",Vs),Ms=()=>gt({opened:!1,empty:!1,selected:-1,listId:"",query:"",registeredActions:new Set}),zs=t=>mt(t);function ee(t,s){const i=s.getState();s.setState({...i,...t(s.getState())})}function st(t){ee(()=>({opened:!0,selected:-1}),t)}function nt(t){ee(()=>({opened:!1}),t)}function it(t){ee(s=>({opened:!s.opened,selected:s.opened?s.selected:-1}),t)}function ot(t,s){s.updateState(i=>({...i,selected:t}))}function Ls(t,s){s.updateState(i=>({...i,listId:t}))}function he(t,s=document){const i=s.querySelector(t);if(i)return i;const o=s instanceof ShadowRoot?s.host.children:s.children;for(let l=0;l<o.length;l+=1){const n=o[l];if(n.shadowRoot){const d=he(t,n.shadowRoot);if(d)return d}const a=he(t,n);if(a)return a}return null}function fe(t,s){const i=s.getState(),o=i.listId?he(`#${i.listId}`):null,l=o?.querySelector("[data-selected]"),n=o?.querySelectorAll("[data-action]")??[],a=t===-1?n.length-1:t===n.length?0:t,d=ft(a,0,n.length-1);return l?.removeAttribute("data-selected"),n[d]?.scrollIntoView({block:"nearest"}),n[d]?.setAttribute("data-selected","true"),ot(d,s),d}function Ts(t){return fe(t.getState().selected+1,t)}function Ds(t){return fe(t.getState().selected-1,t)}function Os(t){const s=t.getState();he(`#${s.listId} [data-selected]`)?.click()}function Ps(t,s){const i=s.getState();return i.registeredActions.add(t),()=>{i.registeredActions.delete(t)}}function Hs(t,s){ee(()=>({query:t}),s),Promise.resolve().then(()=>{fe(0,s),ee(i=>({empty:i.query.trim().length>0&&i.registeredActions.size===0||!1}),s)})}function Us({clearQuery:t},s){s.updateState(i=>({...i,selected:-1,query:t?"":i.query,empty:t?!1:i.empty}))}const L={open:st,close:nt,toggle:it,updateState:ee,setSelectedAction:ot,setListId:Ls,selectAction:fe,selectNextAction:Ts,selectPreviousAction:Ds,triggerSelectedAction:Os,registerAction:Ps,setQuery:Hs,clearSpotlightState:Us};function rt(){const t=Ms();return[t,{open:()=>st(t),close:()=>nt(t),toggle:()=>it(t)}]}const[at,xe]=rt(),{open:Hn,close:Un,toggle:Wn}=xe;function lt(t){const s=t;return s.group!==void 0&&Array.isArray(s.actions)}function Ws(t){return Array.isArray(t)?t.map(s=>s.trim()).join(",").toLowerCase().trim():typeof t=="string"?t.toLowerCase().trim():""}function Bs(t){return t.reduce((s,i)=>"actions"in i?[...s,...i.actions.map(o=>({...o,group:i.group}))]:[...s,i],[])}function Fs(t){const s={},i=[];return t.forEach(o=>{o.group?(s[o.group]||(s[o.group]={pushed:!1,data:{group:o.group,actions:[]}}),s[o.group].data.actions.push(o),s[o.group].pushed||(s[o.group].pushed=!0,i.push(s[o.group].data))):i.push(o)}),i}const Qs=(t,s)=>{const i=t.trim().toLowerCase(),o=[[],[]];return Bs(s).forEach(n=>{n.label?.toLowerCase().includes(i)?o[0].push(n):(n.description?.toLowerCase().includes(i)||Ws(n.keywords).includes(i))&&o[1].push(n)}),Fs(o.flat())};function ct(t,s){if(!Array.isArray(t))return[];let i=0;return t.reduce((o,l)=>{if(i>=s)return o;if(lt(l)){const n=ct(l.actions,s-i);o.push({group:l.group,actions:n}),i+=n.length}else o.push(l),i+=1;return o},[])}const[$s,te]=xt("Spotlight component was not found in tree");var D={root:"m_d2b315db",content:"m_3cd250e0",body:"m_d2abce9b",search:"m_f366a061",actionsList:"m_6e463822",action:"m_d49bb8ef",actionBody:"m_3d475731",actionSection:"m_832642f6",actionLabel:"m_6c2a1345",actionDescription:"m_a6d9d78d",empty:"m_82f78f74",footer:"m_ddcaf054",actionsGroup:"m_5a3e5f7b"};const Ks={dimmedSections:!0,highlightQuery:!1},ne=W((t,s)=>{const i=B("SpotlightAction",Ks,t),{className:o,style:l,classNames:n,styles:a,id:d,description:p,label:c,leftSection:f,rightSection:h,children:g,dimmedSections:b,highlightQuery:x,highlightColor:A,closeSpotlightOnTrigger:_,onClick:N,onMouseDown:I,keywords:$,vars:U,...E}=i,C=te(),m={classNames:n,styles:a},S=x&&typeof c=="string"?e.jsx(St,{component:"span",highlight:C.query,color:A,...C.getStyles("actionLabel",m),children:c}):e.jsx("span",{...C.getStyles("actionLabel",m),children:c});return e.jsx(oe,{ref:s,"data-action":!0,...C.getStyles("action",{className:o,style:l,...m}),...E,onMouseDown:k=>{k.preventDefault(),I?.(k)},onClick:k=>{N?.(k),(_??C.closeOnActionTrigger)&&L.close(C.store)},tabIndex:-1,children:g||e.jsxs(e.Fragment,{children:[f&&e.jsx(se,{component:"span",mod:{position:"left",dimmed:b},...C.getStyles("actionSection",m),children:f}),e.jsxs("span",{...C.getStyles("actionBody",m),children:[S,e.jsx("span",{...C.getStyles("actionDescription",m),children:p})]}),h&&e.jsx(se,{component:"span",mod:{position:"right",dimmed:b},...C.getStyles("actionSection",m),children:h})]})})});ne.classes=D;ne.displayName="@mantine/spotlight/SpotlightAction";const Se=W((t,s)=>{const{className:i,style:o,styles:l,classNames:n,label:a,children:d,...p}=B("SpotlightActionsGroup",null,t),c=te();return e.jsx(se,{...c.getStyles("actionsGroup",{className:i,style:o,classNames:n,styles:l}),ref:s,...p,__vars:{"--spotlight-label":`'${a?.replace(/'/g,"\\'")}'`},children:d})});Se.classes=D;Se.displayName="@mantine/core/SpotlightActionsGroup";const _e=W((t,s)=>{const{className:i,style:o,id:l,children:n,vars:a,classNames:d,styles:p,...c}=B("SpotlightActionsList",null,t),f=te(),h=`mantine-${u.useId().replace(/:/g,"")}`,g=l||h;return u.useEffect(()=>(L.setListId(g,f.store),()=>L.setListId("",f.store)),[]),e.jsx(_t.Autosize,{...f.getStyles("actionsList",{className:i,style:o,classNames:d,styles:p}),ref:s,type:"scroll",scrollbarSize:"var(--spotlight-actions-list-padding)",offsetScrollbars:"y",id:g,...c,children:n})});_e.classes=D;_e.displayName="@mantine/spotlight/SpotlightActionsList";const je=W((t,s)=>{const{className:i,style:o,classNames:l,styles:n,...a}=B("SpotlightEmpty",null,t),d=te();return e.jsx(se,{ref:s,...d.getStyles("empty",{classNames:l,styles:n,className:i,style:o}),...a})});je.classes=D;je.displayName="@mantine/spotlight/SpotlightEmpty";const Le=W((t,s)=>{const{className:i,style:o,classNames:l,styles:n,...a}=B("SpotlightFooter",null,t),d=te();return e.jsx(se,{ref:s,...d.getStyles("footer",{className:i,classNames:l,style:o,styles:n}),...a})});Le.classes=D;Le.displayName="@mantine/spotlight/SpotlightFooter";function Zs(t,s){if(!t)return[];const i=()=>L.open(s);return Array.isArray(t)?t.map(o=>[o,i]):[[t,i]]}const Gs={size:600,yOffset:80,zIndex:We("max"),overlayProps:{backgroundOpacity:.35,blur:7},transitionProps:{duration:200,transition:"pop"},store:at,clearQueryOnClose:!0,closeOnActionTrigger:!0,shortcut:"mod + K",maxHeight:400},be=W((t,s)=>{const i=B("SpotlightRoot",Gs,t),{classNames:o,className:l,style:n,styles:a,unstyled:d,vars:p,store:c,children:f,query:h,onQueryChange:g,transitionProps:b,clearQueryOnClose:x,shortcut:A,tagsToIgnore:_,triggerOnContentEditable:N,disabled:I,onSpotlightOpen:$,onSpotlightClose:U,forceOpened:E,closeOnActionTrigger:C,maxHeight:m,scrollable:S,attributes:k,...O}=i,K=jt(),{opened:ke,query:ut}=zs(c),ht=typeof h=="string"?h:ut,De=Oe=>{g?.(Oe),L.setQuery(Oe,c)},pt=bt({name:"Spotlight",classes:D,props:i,className:l,style:n,classNames:o,styles:a,unstyled:d,attributes:k});return qe(Zs(A,c),_,N),vt(()=>{ke?$?.():U?.()},[ke]),I?null:e.jsx($s,{value:{getStyles:pt,query:ht,setQuery:De,store:c,closeOnActionTrigger:C},children:e.jsx(kt,{ref:s,...O,withCloseButton:!1,opened:ke||!!E,padding:0,onClose:()=>L.close(c),className:l,style:n,classNames:Ct({theme:K,classNames:[D,o],props:i,stylesCtx:void 0}),styles:Et({theme:K,styles:a,props:i,stylesCtx:void 0}),transitionProps:{...b,onExited:()=>{x&&De(""),L.clearSpotlightState({clearQuery:x},c),b?.onExited?.()}},__vars:{"--spotlight-max-height":S?yt(m):void 0},__staticSelector:"Spotlight","data-scrollable":S||void 0,children:f})})});be.classes=D;be.displayName="@mantine/spotlight/SpotlightRoot";const qs={size:"lg"},ve=W((t,s)=>{const{classNames:i,styles:o,onKeyDown:l,onChange:n,vars:a,value:d,...p}=B("SpotlightSearch",qs,t),c=te(),f=c.getStyles("search"),[h,g]=u.useState(!1),b=x=>{l?.(x),!h&&(x.nativeEvent.code==="ArrowDown"&&(x.preventDefault(),L.selectNextAction(c.store)),x.nativeEvent.code==="ArrowUp"&&(x.preventDefault(),L.selectPreviousAction(c.store)),(x.nativeEvent.code==="Enter"||x.nativeEvent.code==="NumpadEnter")&&(x.preventDefault(),L.triggerSelectedAction(c.store)))};return e.jsx(wt,{ref:s,classNames:[{input:f.className},i],styles:[{input:f.style},o],...p,value:d??c.query,onChange:x=>{c.setQuery(x.currentTarget.value),n?.(x)},onKeyDown:b,onCompositionStart:()=>g(!0),onCompositionEnd:()=>g(!1)})});ve.classes=D;ve.displayName="@mantine/spotlight/SpotlightSearch";const Xs={size:600,yOffset:80,limit:1/0,zIndex:We("max"),overlayProps:{backgroundOpacity:.35,blur:7},transitionProps:{duration:200,transition:"pop"},store:at,filter:Qs,clearQueryOnClose:!0,closeOnActionTrigger:!0,shortcut:"mod + K"},R=W((t,s)=>{const i=B("Spotlight",Xs,t),{searchProps:o,filter:l,query:n,onQueryChange:a,actions:d,nothingFound:p,highlightQuery:c,limit:f,...h}=i,[g,b]=At({value:n,defaultValue:"",finalValue:"",onChange:a}),x=ct(l(g,d),f).map(A=>{if(lt(A)){const _=A.actions.map(({id:N,...I})=>e.jsx(ne,{highlightQuery:c,...I},N));return e.jsx(Se,{label:A.group,children:_},A.group)}return e.jsx(ne,{highlightQuery:c,...A},A.id)});return e.jsxs(be,{...h,query:g,onQueryChange:b,ref:s,children:[e.jsx(ve,{...o}),e.jsxs(_e,{children:[x,x.length===0&&p&&e.jsx(je,{children:p})]})]})});R.classes=D;R.displayName="@mantine/spotlight/Spotlight";R.Search=ve;R.ActionsList=_e;R.Action=ne;R.Empty=je;R.ActionsGroup=Se;R.Footer=Le;R.Root=be;R.open=xe.open;R.close=xe.close;R.toggle=xe.toggle;function Js(t){return Qt({modal:"qr",innerProps:{navigate:t}})}function Ys(t){const s=Be(ce(n=>n.setNavigationOpen)),i=pe(),o=H();return u.useMemo(()=>{const n=[{id:"dashboard",label:r._({id:"7p5kLi"}),description:r._({id:"kwda2l"}),onClick:()=>t("/"),leftSection:e.jsx(P,{size:"1.2rem"})},{id:"documentation",label:r._({id:"TvY/XA"}),description:r._({id:"hqbo9J"}),onClick:()=>{window.location.href=ss.faq},leftSection:e.jsx(P,{size:"1.2rem"})},{id:"about",label:r._({id:"iDxamh"}),description:r._({id:"gfhzPz"}),onClick:()=>Ye(),leftSection:e.jsx(P,{size:"1.2rem"})},{id:"server-info",label:r._({id:"mHGdhG"}),description:r._({id:"Ckl0UI"}),onClick:()=>es(),leftSection:e.jsx(P,{size:"1.2rem"})},{id:"license-info",label:r._({id:"I/Xnkt"}),description:r._({id:"L23uA9"}),onClick:()=>ts(),leftSection:e.jsx(P,{size:"1.2rem"})},{id:"navigation",label:r._({id:"rmlxV1"}),description:r._({id:"xIiHCw"}),onClick:()=>s(!0),leftSection:e.jsx(Is,{size:"1.2rem"})},{id:"scan",label:r._({id:"I+FvbD"}),description:r._({id:"9j/kJy"}),onClick:()=>Js(t),leftSection:e.jsx(os,{size:"1.2rem"})},{id:"user-settings",label:r._({id:"ekfzWq"}),description:r._({id:"WAOl9x"}),onClick:()=>t("/settings/user"),leftSection:e.jsx(tt,{size:"1.2rem"})}];return o?.hasViewRole(j.purchase_order)&&n.push({id:"purchase-orders",label:r._({id:"85Yvr2"}),description:r._({id:"Mvem48"}),onClick:()=>t(G.purchaseorder.url_overview),leftSection:e.jsx(P,{size:"1.2rem"})}),o?.hasViewRole(j.sales_order)&&n.push({id:"sales-orders",label:r._({id:"B1TL+X"}),description:r._({id:"oD7kGT"}),onClick:()=>t(G.salesorder.url_overview),leftSection:e.jsx(P,{size:"1.2rem"})}),i.isSet("RETURNORDER_ENABLED")&&o?.hasViewRole(j.return_order)&&n.push({id:"return-orders",label:r._({id:"LlTg8M"}),description:r._({id:"Fpb/1B"}),onClick:()=>t(G.returnorder.url_overview),leftSection:e.jsx(P,{size:"1.2rem"})}),o?.hasViewRole(j.build)&&n.push({id:"builds",label:r._({id:"RCVhIP"}),description:r._({id:"K89zV/"}),onClick:()=>t(G.build.url_overview),leftSection:e.jsx(P,{size:"1.2rem"})}),o?.isStaff()&&n.push({id:"system-settings",label:r._({id:"zNkWa6"}),description:r._({id:"WDitFV"}),onClick:()=>t("/settings/system"),leftSection:e.jsx(Ve,{size:"1.2rem"})}),o?.isStaff()&&n.push({id:"admin-center",label:r._({id:"uTLn08"}),description:r._({id:"txYotp"}),onClick:()=>t("/settings/admin"),leftSection:e.jsx(Xe,{size:"1.2rem"})}),o?.isStaff()&&n.push({id:"plugin-settings",label:r._({id:"ohUJJM"}),description:r._({id:"XvVnvm"}),onClick:()=>t("/settings/admin/plugin"),leftSection:e.jsx(Ft,{size:"1.2rem"})}),n},[t,s,i,o])}var en="_1jb1pko0",tn="_1jb1pko1",sn="_1jb1pko2",nn="_1jb1pko3",dt="_1jb1pko7",on="_1jb1pko8",rn="_1jb1pko9",an="_1jb1pkoa",ln="_1jb1pkog";function cn(){return e.jsx("div",{className:tn})}function dn(){return e.jsx(V,{position:"bottom-end",label:r._({id:"FcOU0s"}),children:e.jsx(M,{onClick:()=>yn.open(),variant:"transparent","aria-label":"open-spotlight",children:e.jsx(Es,{})})})}function un(){const t=Q(),[s,i]=H(ce(n=>[n.user,n.username])),{colorScheme:o,toggleColorScheme:l}=It();return e.jsx(e.Fragment,{children:e.jsxs(v,{width:260,position:"bottom-end",children:[e.jsx(v.Target,{children:e.jsx(oe,{className:nn,children:e.jsxs(w,{gap:7,children:[i()?e.jsx(T,{fw:500,size:"sm",style:{lineHeight:1},mr:3,children:i()}):e.jsx(Rt,{height:20,width:40,radius:ye.radiusDefault}),e.jsx(rs,{})]})})}),e.jsxs(v.Dropdown,{children:[e.jsx(v.Label,{children:e.jsx(z,{id:"Tz0i8g"})}),e.jsx(v.Item,{leftSection:e.jsx(tt,{}),component:we,to:"/settings/user",children:e.jsx(z,{id:"ekfzWq"})}),s?.is_staff&&e.jsx(v.Item,{leftSection:e.jsx(Ve,{}),component:we,to:"/settings/system",children:e.jsx(z,{id:"zNkWa6"})}),s?.is_staff&&e.jsx(v.Item,{leftSection:e.jsx(Xe,{}),component:we,to:"/settings/admin",children:e.jsx(z,{id:"uTLn08"})}),s?.is_staff&&e.jsx(v.Divider,{}),e.jsx(v.Item,{onClick:l,leftSection:o==="dark"?e.jsx(Ss,{}):e.jsx(_s,{}),c:o==="dark"?ye.colors.yellow[4]:ye.colors.blue[6],children:e.jsx(z,{id:"4i3x9F"})}),e.jsx(v.Item,{onClick:()=>Ye(),leftSection:e.jsx($t,{}),children:e.jsx(z,{id:"iDxamh"})}),e.jsx(v.Divider,{}),e.jsx(v.Item,{leftSection:e.jsx(ws,{}),onClick:()=>{Nt(t)},children:e.jsx(z,{id:"nOhz3x"})})]})]})})}const hn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='400'%3e%3cg%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2.676'%3e%3cpath%20fill='%23ddbc91'%20d='M200%20199.906v193.196l166.305-96.016V103.139Z'/%3e%3cpath%20fill='%23d9b383'%20d='M200%20199.906v193.196L33.695%20297.086V103.139Z'/%3e%3cpath%20fill='%23ddbc91'%20d='M366.305%20103.139%20200%20199.906%2033.695%20103.14%20200%206.899z'/%3e%3cg%20fill='%23f3f4e4'%3e%3cpath%20d='M75.27%20127.109v145.46L200%20344.583l124.73-72.012V127.109L200%20199.684Z'/%3e%3cpath%20d='M324.73%20127.11%20200%20199.684%2075.27%20127.109%20200%2054.93Z'/%3e%3c/g%3e%3cpath%20fill='%23d9dbbc'%20d='M200%2054.929v144.756L75.27%20272.569V127.11z'/%3e%3cpath%20fill='%23eaeccf'%20d='M200%2054.929v144.756l124.73%2072.884V127.11z'/%3e%3cpath%20fill='%2390a8d8'%20d='M200%20199.901V296.5l83.153-48.008v-96.973zm0%200V296.5l-83.153-48.008v-96.973zm83.153-48.383L200%20199.9l-83.153-48.383L200%20103.398Z'/%3e%3c/g%3e%3cg%20fill='%2390a8d8'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%3e%3cpath%20d='M-546.667%20443.959v216.54l186.4-107.618V335.499Zm0%200v216.54l-186.4-107.618V335.499Z'/%3e%3cpath%20d='m-360.266%20335.499-186.4%20108.46-186.401-108.46%20186.4-107.87z'/%3e%3c/g%3e%3cg%20fill='%2390a8d8'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%3e%3cpath%20d='M-546.667%20227.419v216.54l186.4-107.619V118.96Zm0%200v216.54l-186.4-107.619V118.96Z'/%3e%3cpath%20d='m-360.266%20118.959-186.4%20108.46-186.401-108.46%20186.4-107.87z'/%3e%3c/g%3e%3cpath%20fill='%23ddbc91'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M-546.667%2010.879v216.54l186.4-107.619V-97.58Z'/%3e%3cpath%20fill='%23d9b383'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2.676'%20d='M-546.667%2010.879v216.54l-186.4-107.619V-97.58Z'/%3e%3cpath%20fill='%23ddbc91'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='m-360.266-97.581-186.4%20108.46-186.401-108.46%20186.4-107.87z'/%3e%3cg%20fill='%23f3f4e4'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.058'%3e%3cpath%20stroke-width='3'%20d='M-686.466-70.715V92.321l139.798%2080.714%20139.801-80.714V-70.715l-139.8%2081.346z'/%3e%3cpath%20stroke-width='2.999'%20d='m-406.866-70.715-139.8%2081.345-139.801-81.345%20139.8-80.902Z'/%3e%3c/g%3e%3cpath%20fill='%23d9dbbc'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M-546.667-151.617V10.63l-139.8%2081.692V-70.715z'/%3e%3cpath%20fill='%23eaeccf'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M-546.667-151.617V10.63l139.8%2081.692V-70.715z'/%3e%3cg%20fill='%2390a8d8'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2.999'%3e%3cpath%20d='M-546.667%2010.873v108.27l93.2-53.81v-108.69zm0%200v108.27l-93.2-53.81v-108.69z'/%3e%3cpath%20d='m-453.466-43.357-93.2%2054.23-93.201-54.23%2093.2-53.935Z'/%3e%3c/g%3e%3cpath%20fill='none'%20d='M-787.948-253.366h482.56v946.733h-482.56z'/%3e%3c/svg%3e";u.forwardRef((t,s)=>e.jsx("div",{ref:s,...t,children:e.jsx(xs,{to:"/",children:e.jsx(M,{size:28,variant:"transparent",children:e.jsx(Te,{})})})}));const Te=()=>e.jsx("img",{src:hn,alt:r._({id:"DVAy0b"}),height:28});function pn({openDrawer:t}){return e.jsx(oe,{onClick:()=>t(),"aria-label":"navigation-menu",children:e.jsx(Te,{})})}function Z({title:t,links:s,beforeClick:i}){const o=Q(),l=u.useMemo(()=>s.filter(n=>!n.hidden),[s]);return l.length==0?null:e.jsx(e.Fragment,{children:e.jsxs(re,{gap:"xs",children:[e.jsx(Ae,{}),e.jsx(Me,{size:"md",children:t}),e.jsx(Ae,{}),e.jsx(Vt,{cols:{base:1,"400px":2},type:"container",spacing:0,p:3,children:l.map(n=>e.jsx(V,{label:n.description,hidden:!n.description,children:n.link&&n.external?e.jsx(Ie,{href:n.link,children:e.jsxs(w,{wrap:"nowrap",children:[n.external&&e.jsx(Pe,{icon:n.icon??"link",iconProps:{size:"14"}}),e.jsx(T,{fw:500,p:5,children:n.title})]})}):e.jsx(oe,{onClick:a=>{n.link?(i?.(),F(n.link,o,a)):n.action&&(i?.(),n.action())},children:e.jsxs(w,{wrap:"nowrap",children:[n.icon&&e.jsx(Pe,{icon:n.icon,iconProps:{size:"14"}}),e.jsx(T,{fw:500,p:5,children:n.title})]})})},`menu-link-tooltip-${n.id}`))})]})})}const Ue=[];function gn({opened:t,close:s}){return e.jsx(Re,{opened:t,onClose:s,size:"lg",withCloseButton:!1,classNames:{body:ln},children:e.jsx(mn,{closeFunc:s})})}function mn({closeFunc:t}){const s=H(),i=pe(),[o,l]=u.useState(0),n=u.useRef(null),{height:a}=Mt(),d=js();u.useEffect(()=>{n.current!=null&&l(a-n.current.clientHeight-65)});const p=u.useMemo(()=>[{id:"home",title:r._({id:"7p5kLi"}),link:"/",icon:"dashboard"},{id:"parts",title:r._({id:"pmRbKZ"}),hidden:!s.hasViewPermission(y.part),link:"/part",icon:"part"},{id:"stock",title:r._({id:"blbbPS"}),link:"/stock",hidden:!s.hasViewPermission(y.stockitem),icon:"stock"},{id:"build",title:r._({id:"3ctapx"}),link:"/manufacturing/",hidden:!s.hasViewRole(j.build),icon:"build"},{id:"purchasing",title:r._({id:"UOTpFa"}),link:"/purchasing/",hidden:!s.hasViewRole(j.purchase_order),icon:"purchase_orders"},{id:"sales",title:r._({id:"mUv9U4"}),link:"/sales/",hidden:!s.hasViewRole(j.sales_order),icon:"sales_orders"},{id:"users",title:r._({id:"Sxm8rQ"}),link:"/core/index/users",icon:"user"},{id:"groups",title:r._({id:"zhrjek"}),link:"/core/index/groups",icon:"group"}],[s]),c=u.useMemo(()=>[{id:"barcode",title:r._({id:"fNvDwV"}),link:"/scan",icon:"barcode",hidden:!i.isSet("BARCODE_ENABLE")}],[s,i]),f=u.useMemo(()=>[{id:"notifications",title:r._({id:"iDNBZe"}),link:"/notifications",icon:"notification"},{id:"user-settings",title:r._({id:"ekfzWq"}),link:"/settings/user",icon:"user"},{id:"system-settings",title:r._({id:"zNkWa6"}),link:"/settings/system",icon:"system",hidden:!s.isStaff()},{id:"admin-center",title:r._({id:"uTLn08"}),link:"/settings/admin",icon:"admin",hidden:!s.isStaff()}],[s]),h=u.useMemo(()=>ns(),[]),g=u.useMemo(()=>is(i,s),[]);return e.jsxs(Fe,{direction:"column",mih:"100vh",p:16,children:[e.jsxs(w,{wrap:"nowrap",children:[e.jsx(Te,{}),e.jsx(Me,{size:"xl",children:d})]}),e.jsx(q,{h:"xs"}),e.jsxs(Ne,{className:dt,p:0,children:[e.jsx(Z,{title:r._({id:"UxKoFf"}),links:p,beforeClick:t}),e.jsx(Z,{title:r._({id:"Tz0i8g"}),links:f,beforeClick:t}),e.jsx(Z,{title:r._({id:"7L01XJ"}),links:c,beforeClick:t}),e.jsx(q,{h:"md"}),Ue.length>0?e.jsx(Z,{title:r._({id:"ohUJJM"}),links:Ue,beforeClick:t}):e.jsx(e.Fragment,{})]}),e.jsxs("div",{ref:n,children:[e.jsx(q,{h:"md"}),e.jsx(Z,{title:r._({id:"TvY/XA"}),links:h,beforeClick:t}),e.jsx(q,{h:"md"}),e.jsx(Z,{title:r._({id:"uyJsf6"}),links:g,beforeClick:t})]})]})}function fn({notification:t,onRead:s}){const i=Q();let o=t.target?.link;const l=t.target?.model_type,n=t.target?.model_id;if(l){const a=G[l];a?.url_detail&&n?o=Lt(l,n):a?.url_overview&&(o=a.url_overview)}return e.jsx(Tt,{p:"xs",shadow:"xs",children:e.jsxs(w,{justify:"space-between",wrap:"nowrap",children:[e.jsx(V,{label:t.message,position:"bottom-end",hidden:!t.message,children:e.jsxs(re,{gap:2,children:[e.jsx(Ie,{href:o?`/${Ze()}${o}`:"#",underline:"hover",target:"_blank",onClick:a=>{o&&s(),o.startsWith("/")&&F(o,i,a)},children:e.jsx(T,{size:"sm",children:t.name})}),e.jsx(T,{size:"xs",children:t.age_human})]})}),e.jsx(V,{label:r._({id:"+s1J8k"}),position:"bottom-end",children:e.jsx(M,{variant:"transparent",onClick:s,children:e.jsx(et,{})})})]})})}function xn({opened:t,onClose:s}){const{isLoggedIn:i}=H(),o=Q(),l=me({enabled:t&&i(),queryKey:["notifications",t],queryFn:async()=>X.get(J(Y.notifications_list),{params:{read:!1,limit:10,ordering:"-creation"}}).then(p=>p.data),refetchOnMount:!1}),n=u.useMemo(()=>(l.data?.results?.length??0)>0,[l.data]),a=u.useCallback(()=>{X.get(J(Y.notifications_readall),{params:{read:!1}}).catch(p=>{}).then(p=>{l.refetch()})},[]),d=u.useCallback(p=>{X.patch(J(Y.notifications_list,p.pk),{read:!0}).then(()=>{l.refetch()}).catch(()=>{l.refetch()})},[]);return e.jsx(Re,{opened:t,size:"md",position:"right",onClose:s,withCloseButton:!1,styles:{header:{width:"100%"},title:{width:"100%"}},title:e.jsxs(w,{justify:"space-between",wrap:"nowrap",children:[e.jsx(Me,{size:"lg",children:r._({id:"iDNBZe"})}),e.jsxs(w,{justify:"end",wrap:"nowrap",children:[e.jsx(V,{label:r._({id:"onllUU"}),children:e.jsx(M,{variant:"transparent",onClick:()=>{a()},children:e.jsx(et,{})})}),e.jsx(V,{label:r._({id:"/WA/tl"}),children:e.jsx(M,{onClick:p=>{s(),F("/notifications/unread",o,p)},variant:"transparent",children:e.jsx(as,{})})})]})]}),children:e.jsx(ze,{label:"NotificationDrawer",children:e.jsxs(re,{gap:"xs",children:[e.jsx(Ae,{}),!l.isFetching&&!l.isLoading&&!l.isError&&!n&&e.jsx(de,{color:"green",icon:e.jsx(zt,{}),children:e.jsx(T,{size:"sm",children:r._({id:"t2pqHO"})})}),n&&l.data?.results?.map(p=>e.jsx(fn,{notification:p,onRead:()=>d(p)},`notification-${p.pk}`)),l.isFetching&&e.jsx(Qe,{children:e.jsx($e,{size:"sm"})}),l.isError&&e.jsx(de,{color:"red",title:r._({id:"SlfejT"}),icon:e.jsx(Ke,{}),children:e.jsx(T,{size:"sm",children:r._({id:"KEHQO1"})})})]})})})}function Sn({searchText:t,query:s,navigate:i,onClose:o,onRemove:l,onResultClick:n}){const a=u.useMemo(()=>vs(s.model),[s.model]),d=u.useMemo(()=>s.overviewUrl?s.overviewUrl:a.url_overview,[s,a]),p=u.useCallback(c=>{if(Ot(c),d){const f=`${d}?search=${t}`;Ge(c)||o(),F(f,i,c)}else Pt({title:r._({id:"FXAptz"}),message:r._({id:"RPZ4Cq"}),color:"red",icon:e.jsx(Ke,{})})},[d,t]);return s.results.count==0?null:e.jsxs(le.Item,{value:s.model,children:[e.jsx(le.Control,{component:"div",children:e.jsxs(w,{justify:"space-between",children:[e.jsxs(w,{justify:"left",gap:5,wrap:"nowrap",children:[e.jsx(V,{label:r._({id:"XN9Er0"}),position:"top-start",children:e.jsx(M,{size:"sm",variant:"transparent",radius:"xs","aria-label":`view-all-results-${s.searchKey??s.model}`,disabled:!d,onClick:p,children:e.jsx(Ns,{})})}),e.jsx(T,{size:"lg",children:s.title??a.label_multiple}),e.jsxs(T,{size:"sm",style:{fontStyle:"italic"},children:[" ","- ",s.results.count," ",e.jsx(z,{id:"mO8KLE"})]})]}),e.jsxs(w,{justify:"right",wrap:"nowrap",children:[e.jsx(V,{label:r._({id:"8OvYje"}),position:"top-end",children:e.jsx(M,{size:"sm",color:"red",variant:"transparent",radius:"xs","aria-label":`remove-search-group-${s.model}`,onClick:()=>l(s.model),children:e.jsx(Zt,{})})}),e.jsx(q,{})]})]})}),e.jsx(le.Panel,{children:e.jsx(re,{"aria-label":`search-group-results-${s.model}`,children:s.results.results.map(c=>e.jsx(Ie,{underline:"never",onClick:f=>n(s.model,c.pk,f),children:e.jsx(cs,{instance:c,model:s.model})},`result-${s.model}-${c.pk}`))})})]},s.model)}function _n({opened:t,onClose:s}){const[i,o]=u.useState(""),[l]=ls(i,500),n=H(),a=ge(),[d,p]=u.useState(!1),[c,f]=u.useState(!1),[h,g]=u.useState(!1);u.useEffect(()=>{p(a.isSet("SEARCH_REGEX",!1)),f(a.isSet("SEARCH_WHOLE",!1)),g(a.isSet("SEARCH_NOTES",!1))},[a.isSet("SEARCH_REGEX",!1),a.isSet("SEARCH_WHOLE",!1),a.isSet("SEARCH_NOTES",!1)]);const b=u.useMemo(()=>[{model:y.part,parameters:{active:a.isSet("SEARCH_HIDE_INACTIVE_PARTS")?!0:void 0},enabled:n.hasViewRole(j.part)&&a.isSet("SEARCH_PREVIEW_SHOW_PARTS")},{model:y.supplierpart,parameters:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0},enabled:n.hasViewRole(j.part)&&n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS")},{model:y.manufacturerpart,parameters:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0},enabled:n.hasViewRole(j.part)&&n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS")},{model:y.partcategory,parameters:{},enabled:n.hasViewRole(j.part_category)&&a.isSet("SEARCH_PREVIEW_SHOW_CATEGORIES")},{model:y.stockitem,parameters:{part_detail:!0,location_detail:!0,in_stock:a.isSet("SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK")?!0:void 0},enabled:n.hasViewRole(j.stock)&&a.isSet("SEARCH_PREVIEW_SHOW_STOCK")},{model:y.stocklocation,parameters:{},enabled:n.hasViewRole(j.stock_location)&&a.isSet("SEARCH_PREVIEW_SHOW_LOCATIONS")},{model:y.build,parameters:{part_detail:!0},enabled:n.hasViewRole(j.build)&&a.isSet("SEARCH_PREVIEW_SHOW_BUILD_ORDERS")},{model:y.company,overviewUrl:"/purchasing/index/suppliers",searchKey:"supplier",title:r._({id:"9RecCt"}),parameters:{},enabled:n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_COMPANIES")},{model:y.company,overviewUrl:"/purchasing/index/manufacturers",searchKey:"manufacturer",title:r._({id:"E0ub4Q"}),parameters:{},enabled:n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_COMPANIES")},{model:y.company,overviewUrl:"/sales/index/customers",searchKey:"customer",title:r._({id:"NihQNk"}),parameters:{},enabled:n.hasViewRole(j.sales_order)&&a.isSet("SEARCH_PREVIEW_SHOW_COMPANIES")},{model:y.purchaseorder,parameters:{supplier_detail:!0,outstanding:a.isSet("SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS")?!0:void 0},enabled:n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS")},{model:y.salesorder,parameters:{customer_detail:!0,outstanding:a.isSet("SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS")?!0:void 0},enabled:n.hasViewRole(j.sales_order)&&a.isSet("SEARCH_PREVIEW_SHOW_SALES_ORDERS")},{model:y.salesordershipment,parameters:{},enabled:n.hasViewRole(j.sales_order)&&a.isSet("SEARCH_PREVIEW_SHOW_SALES_ORDER_SHIPMENTS")},{model:y.returnorder,parameters:{customer_detail:!0,outstanding:a.isSet("SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS")?!0:void 0},enabled:n.hasViewRole(j.return_order)&&a.isSet("SEARCH_PREVIEW_SHOW_RETURN_ORDERS")}],[n,a]),x=u.useMemo(()=>b.filter(m=>m.enabled),[b]);u.useEffect(()=>{_.refetch()},[l]);const _=me({queryKey:["search",l,d,c,h],queryFn:async()=>{if(!l)return[];const m={offset:0,limit:a.getSetting("SEARCH_PREVIEW_RESULTS","10"),search:l,search_regex:d,search_whole:c,search_notes:h};return x.forEach(S=>{const k=S.searchKey||S.model;m[k]=S.parameters}),X.post(J(Y.api_search),m).then(S=>S.data)}}),[N,I]=u.useState([]);u.useEffect(()=>{if(_.data){let m=x.filter(S=>(S.searchKey??S.model)in _.data);for(const S in _.data){const k=m.find(O=>(O.searchKey??O.model)==S);k&&(k.results=_.data[S])}m=m.filter(S=>S.results.count>0),I(m)}else I([])},[_.data]);function $(m){I(N.filter(S=>S.model!=m))}function U(){o(""),s()}const E=Q();function C(m,S,k){const O=G[m];if(O.url_detail==null)return;Ge(k)||U();const K=O.url_detail.replace(":pk",S.toString());F(K,E,k)}return e.jsx(Re,{opened:t,size:"xl",onClose:U,position:"right",withCloseButton:!1,styles:{header:{width:"100%"},title:{width:"100%"}},title:e.jsxs(w,{justify:"space-between",gap:1,wrap:"nowrap",children:[e.jsx(Dt,{"aria-label":"global-search-input",placeholder:r._({id:"Dwt0g3"}),value:i,onChange:m=>o(m.currentTarget.value),leftSection:e.jsx(ue,{size:"0.8rem"}),rightSection:i&&e.jsx(bs,{color:"red",onClick:()=>o("")}),styles:{root:{width:"100%"}}}),e.jsx(V,{label:r._({id:"C0TDNl"}),position:"bottom-end",children:e.jsx(M,{size:"lg",variant:"transparent",onClick:()=>_.refetch(),children:e.jsx(Kt,{})})}),e.jsxs(v,{position:"bottom-end",children:[e.jsx(v.Target,{children:e.jsx(V,{label:r._({id:"9UYKcs"}),position:"bottom-end",children:e.jsx(M,{size:"lg",variant:"transparent",children:e.jsx(Ve,{})})})}),e.jsxs(v.Dropdown,{children:[e.jsx(v.Label,{children:r._({id:"9UYKcs"})}),e.jsx(v.Item,{children:e.jsx(Ee,{label:r._({id:"roauu/"}),checked:c,onChange:m=>f(m.currentTarget.checked)})}),e.jsx(v.Item,{children:e.jsx(Ee,{label:r._({id:"qkCZlJ"}),checked:d,onChange:m=>p(m.currentTarget.checked)})}),e.jsx(v.Item,{children:e.jsx(Ee,{label:r._({id:"74yzDd"}),checked:h,onChange:m=>g(m.currentTarget.checked)})})]})]})]}),children:e.jsxs(ze,{label:"SearchDrawer",children:[_.isFetching&&e.jsx(Qe,{children:e.jsx($e,{})}),!_.isFetching&&!_.isError&&e.jsx(re,{gap:"md",children:e.jsx(le,{multiple:!0,defaultValue:x.map(m=>m.model),children:N.map((m,S)=>e.jsx(Sn,{searchText:l,query:m,navigate:E,onClose:U,onRemove:k=>$(k),onResultClick:(k,O,K)=>C(k,O,K)},S))})}),_.isError&&e.jsx(de,{color:"red",radius:"sm",variant:"light",title:r._({id:"SlfejT"}),icon:e.jsx(ks,{size:"1rem"}),children:e.jsx(z,{id:"hJCuaV"})}),l&&!_.isFetching&&!_.isError&&N.length==0&&e.jsx(de,{color:"blue",radius:"sm",variant:"light",title:r._({id:"MA3x23"}),icon:e.jsx(ue,{size:"1rem"}),children:e.jsx(z,{id:"dTtbrX"})})]})})}function jn(){const[t,s]=Be(ce(E=>[E.setNavigationOpen,E.navigationOpen])),[i]=Ht(ce(E=>[E.server])),[o,{open:l,close:n}]=Ce(s),[a,{open:d,close:p}]=Ce(!1);qe([["/",()=>{d()}],["mod+/",()=>{d()}]]);const[c,{open:f,close:h}]=Ce(!1),{isLoggedIn:g}=H(),[b,x]=u.useState(0),A=pe(),_=ge(),N=u.useMemo(()=>i.customize?.navbar_message,[i.customize]),I=Gt(),$=me({queryKey:["notification-count",I],enabled:g()&&I==="visible",queryFn:async()=>!g()||I!="visible"?null:X.get(J(Y.notifications_list),{params:{read:!1,limit:1}}).then(E=>(x(E?.data?.count??0),E.data??null)),refetchInterval:60*1e3,refetchOnMount:!0});u.useEffect(()=>{s!==o&&t(o)},[o]),u.useEffect(()=>{s!==o&&(s?l():n())},[s]);const U=u.useMemo(()=>_.isSet("STICKY_HEADER",!0)?{position:"sticky",zIndex:10,top:0}:{},[_]);return e.jsxs("div",{className:en,style:U,children:[e.jsx(_n,{opened:a,onClose:p}),e.jsx(gn,{opened:o,close:n}),e.jsx(xn,{opened:c,onClose:()=>{$.refetch(),h()}}),e.jsx(Ne,{className:sn,size:"100%",children:e.jsxs(w,{justify:"space-between",children:[e.jsxs(w,{children:[e.jsx(pn,{openDrawer:l}),e.jsx(bn,{})]}),N&&e.jsx(T,{children:e.jsx("span",{dangerouslySetInnerHTML:{__html:N}})}),e.jsxs(w,{children:[e.jsx(V,{position:"bottom-end",label:r._({id:"A1taO8"}),children:e.jsx(M,{onClick:d,variant:"transparent","aria-label":"open-search",children:e.jsx(ue,{})})}),_.isSet("SHOW_SPOTLIGHT")&&e.jsx(dn,{}),A.isSet("BARCODE_ENABLE")&&e.jsx(ds,{}),e.jsx(Ut,{radius:"lg",size:"18",label:b,color:"red",disabled:b<=0,inline:!0,children:e.jsx(V,{position:"bottom-end",label:r._({id:"iDNBZe"}),children:e.jsx(M,{onClick:f,variant:"transparent","aria-label":"open-notifications",children:e.jsx(qt,{})})})}),e.jsx(fs,{}),e.jsx(un,{})]})]})})]})}function bn(){const t=H(),s=Q(),o=Xt(":tabName/*")?.params.tabName,l=He(t),n=ge(),a=u.useMemo(()=>n.isSet("ICONS_IN_NAVBAR",!1),[n]),d=ms({featureType:"navigation",context:{}}),p=u.useMemo(()=>{const c=[];return He(t).forEach(h=>{h.role&&!t.hasViewRole(h.role)||c.push(e.jsx(ae.Tab,{value:h.name,leftSection:a&&h.icon&&e.jsx(M,{variant:"transparent",children:h.icon}),onClick:g=>F(`/${h.name}`,s,g),children:e.jsx(oe,{component:"a",href:Wt(`/${Ze()}/${h.name}`),children:h.title})},h.name))}),d.forEach(h=>{c.push(e.jsx(ae.Tab,{value:h.options.title,onClick:g=>F(h.options.options.url,s,g),children:h.options.title},h.options.key))}),c},[d,l,t,a]);return e.jsx(ae,{defaultValue:"home",classNames:{root:on,list:rn,tab:an},value:o,children:e.jsx(ae.List,{children:p.map(c=>c)})})}const vn=({children:t})=>{const s=Je(),{isLoggedIn:i}=H();return i()?t:e.jsx(Yt,{to:"/logged-in",state:{redirectUrl:s.pathname,queryParams:s.search,anchor:s.hash}})},[kn,yn]=rt();function Bn(){const t=Q(),s=Je(),i=H(),o=ge(),l=pe(),n=u.useMemo(()=>l.isSet("ENABLE_PLUGINS_INTERFACE"),[l]),a=hs(),d=Ys(t),[p,c]=u.useState(d),f=me({enabled:n,queryKey:["plugin-actions",n,i],refetchOnMount:!0,queryFn:async()=>{if(!n)return Promise.resolve([]);const g=J(Y.plugin_ui_features_list,void 0,{feature_type:gs.spotlight_action});return X.get(g).then(b=>b.data)}}),h=u.useMemo(()=>f?.data?.map(g=>{const b={...a,context:g.context};return{id:Bt(`a-${g.plugin_name}-${g.key}`),label:g.title,description:g.description,leftSection:g.icon&&e.jsx(us,{name:g.icon}),onClick:()=>{ps(g.source,"executeAction",b)}}})??[],[f?.data,a]);return u.useEffect(()=>{c([...d,...h])},[d.length,h.length,s]),e.jsx(vn,{children:e.jsxs(Fe,{direction:"column",mih:"100vh",children:[e.jsx(jn,{}),e.jsx(Ne,{className:dt,size:"100%",children:e.jsx(ze,{label:"layout",children:e.jsx(Jt,{})})}),e.jsx(q,{h:"xl"}),e.jsx(cn,{}),o.isSet("SHOW_SPOTLIGHT")&&e.jsx(R,{actions:p,store:kn,highlightQuery:!0,searchProps:{leftSection:e.jsx(ue,{size:"1.2rem"}),placeholder:r._({id:"YIix5Y"})},shortcut:["mod + K"],nothingFound:r._({id:"cNfZ4r"})})]})})}export{vn as ProtectedRoute,Bn as default,yn as firstSpotlight,kn as firstStore};
//# sourceMappingURL=Layout-BePk5lnH.js.map
