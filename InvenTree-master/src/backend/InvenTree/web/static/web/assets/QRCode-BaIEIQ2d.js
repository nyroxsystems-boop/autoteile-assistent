import{r as o,j as e,M as m,bW as Q,b4 as R,az as S,ab as n,S as j,aj as c,aq as y,c as h,N as g,d as k,cU as E,aw as B,e as f,an as p,ao as b,aF as T,O as q}from"./index-Db7AGPIq.js";import{v as A,ap as _,at as v,ay as w}from"./ThemeContext-CxdCkKtz.js";import{Q as M}from"./browser-DSycY7kT.js";const H=({data:s,ecl:t="Q",margin:a=1})=>{const[l,i]=o.useState();return o.useEffect(()=>{if(!s)return i(void 0);M.toString(s,{errorCorrectionLevel:t,type:"svg",margin:a}).then(r=>{i(`data:image/svg+xml;utf8,${encodeURIComponent(r)}`)})},[s,t]),e.jsx(m,{children:l?e.jsx(Q,{src:l,alt:"QR Code"}):e.jsx(R,{height:500})})},F=({mdl_prop:s,showEclSelector:t=!0,ecl:a="Q",...l})=>{const i=S(),[r,d]=o.useState(a);o.useEffect(()=>{a&&d(a)},[a]);const{data:x}=A({queryKey:["qr-code",s.model,s.pk],queryFn:async()=>f.post(p(b.barcode_generate),{model:s.model,pk:s.pk}).then(u=>u.data?.barcode??"").catch(u=>"")}),C=o.useMemo(()=>[{value:"L",label:n._({id:"vAoQxm"})},{value:"M",label:n._({id:"xuqOBP"})},{value:"Q",label:n._({id:"cxfKe+"})},{value:"H",label:n._({id:"rgHRyZ"})}],[]);return e.jsxs(j,{children:[e.jsx(c,{}),s.hash?e.jsx(y,{variant:"outline",color:"red",title:n._({id:"/FLHWb"}),children:e.jsx(h,{id:"AjTb8p"})}):null,e.jsx(H,{data:x,ecl:r,...l}),e.jsx(c,{}),x&&i.getSetting("BARCODE_SHOW_TEXT","false")&&e.jsxs(g,{justify:t?"space-between":"center",align:"flex-start",px:16,children:[e.jsxs(j,{gap:4,pt:2,children:[e.jsx(k,{size:"sm",fw:500,children:e.jsx(h,{id:"vDT9iq"})}),e.jsxs(g,{children:[e.jsx(E,{children:x}),e.jsx(_,{value:x})]})]}),t&&e.jsx(B,{allowDeselect:!1,label:n._({id:"md4cw+"}),value:r,onChange:u=>d(u),data:C})]})]})},L=({mdl_prop:s})=>{const[t,a]=o.useState(""),l=o.useCallback(i=>{f.post(p(b.barcode_link),{[s.model]:s.pk,barcode:i}).then(r=>{a(""),v.closeAll(),location.reload()}).catch(r=>{const d=T({error:r,field:"error",defaultMessage:n._({id:"59QdRH"})});a(d)})},[]);return e.jsxs(j,{gap:"xs",children:[e.jsx(c,{}),e.jsx(w,{onScan:l,actionText:n._({id:"yzF66j"}),error:t})]})},U=({mdl_prop:s})=>{function t(){f.post(p(b.barcode_unlink),{[s.model]:s.pk}).then(a=>{v.closeAll(),location.reload()})}return e.jsx(m,{children:e.jsxs(j,{gap:"sm",children:[e.jsx(c,{}),e.jsx(k,{children:e.jsx(h,{id:"GZnnMw"})}),e.jsx(c,{}),e.jsx(g,{grow:!0,children:e.jsx(q,{color:"red",onClick:t,children:e.jsx(h,{id:"ut1J8k"})})})]})})};export{F as I,L as Q,U as a,H as b};
//# sourceMappingURL=QRCode-BaIEIQ2d.js.map
