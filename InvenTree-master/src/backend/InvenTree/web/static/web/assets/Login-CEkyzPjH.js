import{r as y,K as m,bi as V,j as e,N as u,aa as k,ab as i,ac as b,ah as _,a as j,C as $,d as x,ay as A,M as D,c as h,O as w,Q as U,al as W,u as C,aw as B,a7 as G,aj as S,ak as p,cV as X,cW as Y,cX as J,bd as K,A as Q,cY as q}from"./index-Db7AGPIq.js";import{a as Z,d as ee}from"./DesktopAppView-BuH2j218.js";import{L as se,C as te}from"./LanguageSelect-DFoTUXf2.js";import{A as ne}from"./AuthenticationForm--2xlwUH6.js";import{A as z}from"./ActionButton-Cv5j5I5R.js";import{Wrapper as F}from"./Layout-BuNgm92z.js";import{u as ae}from"./use-form-CbMMN0f0.js";import{aw as ie,aB as re,r as T,a as oe,u as le}from"./ThemeContext-CxdCkKtz.js";import{I as ce}from"./IconPlugConnected-DCM5QR4X.js";import"./IconSun-DtEUHkRS.js";import"./IconBrandGithub-BTOpLaos.js";import"./Alerts-BDuxLv_A.js";import"./links-PrAtDKSR.js";function E(t=[!1,!0]){const[[l],s]=y.useReducer((a,n)=>{const c=n instanceof Function?n(a[0]):n,d=Math.abs(a.indexOf(c));return a.slice(d).concat(a.slice(0,d))},t);return[l,s]}/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M4 13h5",key:"svg-0"}],["path",{d:"M12 16v-8h3a2 2 0 0 1 2 2v1a2 2 0 0 1 -2 2h-3",key:"svg-1"}],["path",{d:"M20 8v8",key:"svg-2"}],["path",{d:"M9 16v-5.5a2.5 2.5 0 0 0 -5 0v5.5",key:"svg-3"}]],he=m("outline","api","Api",de);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M9 6.371c0 4.418 -2.239 6.629 -5 6.629",key:"svg-0"}],["path",{d:"M4 6.371h7",key:"svg-1"}],["path",{d:"M5 9c0 2.144 2.252 3.908 6 4",key:"svg-2"}],["path",{d:"M12 20l4 -9l4 9",key:"svg-3"}],["path",{d:"M19.1 18h-6.2",key:"svg-4"}],["path",{d:"M6.694 3l.793 .582",key:"svg-5"}]],xe=m("outline","language","Language",ue);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M19 22.5a4.75 4.75 0 0 1 3.5 -3.5a4.75 4.75 0 0 1 -3.5 -3.5a4.75 4.75 0 0 1 -3.5 3.5a4.75 4.75 0 0 1 3.5 3.5",key:"svg-0"}],["path",{d:"M3 7a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-1"}],["path",{d:"M12 20h-6a3 3 0 0 1 -3 -3v-2a3 3 0 0 1 3 -3h10.5",key:"svg-2"}],["path",{d:"M7 8v.01",key:"svg-3"}],["path",{d:"M7 16v.01",key:"svg-4"}]],pe=m("outline","server-spark","ServerSpark",ge);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 12m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-1"}],["path",{d:"M7 8l0 .01",key:"svg-2"}],["path",{d:"M7 16l0 .01",key:"svg-3"}]],N=m("outline","server","Server",je);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-2"}]],ve=m("outline","square-plus","SquarePlus",me);function fe(){const[t,l]=V();return e.jsxs(u,{justify:"center",style:{border:t===!0?"1px dashed":"",margin:t===!0?2:12,padding:t===!0?8:0},"aria-label":"Open language options",children:[e.jsx(k,{label:i._({id:"k/sb6z"}),children:e.jsx(b,{onClick:()=>l.toggle(),size:"lg",variant:"transparent","aria-label":"Language toggle",children:e.jsx(xe,{})})}),t&&e.jsx(u,{children:e.jsx(se,{})})]})}function ye({hostname:t,toggleHostEdit:l}){const[s]=_(j(a=>[a.server]));return e.jsx($,{mx:"md",children:e.jsxs(u,{children:[e.jsx(te,{}),e.jsx(fe,{}),window.INVENTREE_SETTINGS.show_server_selector&&e.jsx(k,{label:t,children:e.jsx(b,{size:"lg",variant:"transparent",onClick:l,children:e.jsx(N,{})})}),e.jsxs(x,{c:"dimmed",children:[s.version," | ",s.apiVersion]})]})})}function ke({data:t,saveOptions:l}){const s=ae({initialValues:t});function a(c){const d=s.values;delete d[c],s.setValues(d)}const n=Object.entries(s.values).map(([c])=>e.jsx(u,{mt:"xs",children:s.values[c]!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(A,{placeholder:i._({id:"Ai2U7L"}),withAsterisk:!0,style:{flex:1},...s.getInputProps(`${c}.host`)}),e.jsx(A,{placeholder:i._({id:"6YtxFj"}),withAsterisk:!0,style:{flex:1},...s.getInputProps(`${c}.name`)}),e.jsx(b,{color:"red",onClick:()=>{a(c)},variant:"default",children:e.jsx(ie,{})})]})},c));return e.jsx("form",{onSubmit:s.onSubmit(l),children:e.jsxs(D,{style:{maxWidth:500},mx:"auto",children:[n.length>0?e.jsxs(u,{mb:"xs",children:[e.jsx(x,{fw:500,size:"sm",style:{flex:1},children:e.jsx(h,{id:"Ai2U7L"})}),e.jsx(x,{fw:500,size:"sm",style:{flex:1},children:e.jsx(h,{id:"6YtxFj"})})]}):e.jsx(x,{c:"dimmed",ta:"center",children:e.jsx(h,{id:"yWMzcH"})}),n,e.jsxs(u,{mt:"md",children:[e.jsxs(w,{onClick:()=>s.setFieldValue(`${U()}`,{name:"",host:""}),children:[e.jsx(ve,{}),e.jsx(h,{id:"UYWLpE"})]}),e.jsx(W,{style:{flex:1}}),e.jsx(w,{type:"submit",children:e.jsx(h,{id:"tfDRzk"})})]})]})})}function _e({hostKey:t,ChangeHost:l,setHostEdit:s}){const[a,n]=E([!1,!0]),[c,d,g]=C(j(o=>[o.setHost,o.setHostList,o.hostList])),M=Object.keys(g).map(o=>({value:o,label:g[o]?.name}));function v(o){d(o),o[t]===void 0&&c("",""),n()}return e.jsxs(F,{titleText:i._({id:"/PzyUK"}),smallPadding:!0,children:[e.jsxs(u,{gap:"xs",justify:"space-between",wrap:"nowrap",children:[e.jsx(B,{style:{width:"100%"},value:t,onChange:l,data:M,disabled:a}),e.jsxs(u,{gap:"xs",wrap:"nowrap",children:[e.jsx(k,{label:i._({id:"AA2j+t"}),position:"top",children:e.jsx(z,{variant:"transparent",disabled:a,onClick:n,icon:e.jsx(re,{})})}),e.jsx(k,{label:i._({id:"sKRtVy"}),position:"top",children:e.jsx(z,{variant:"transparent",onClick:s,disabled:a,icon:e.jsx(G,{}),color:"green"})})]})]}),a?e.jsxs(e.Fragment,{children:[e.jsx(S,{my:"sm"}),e.jsx(x,{children:e.jsx(h,{id:"AA2j+t"})}),e.jsx(ke,{data:g,saveOptions:v})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{my:"sm"}),e.jsx(be,{hostList:g,hostKey:t})]})]})}function be({hostList:t,hostKey:l}){const[s]=_(j(n=>[n.server])),a=[{key:"server",label:i._({id:"sGH11W"}),value:t[l]?.host,icon:e.jsx(N,{})},{key:"name",label:i._({id:"6YtxFj"}),value:s.instance,icon:e.jsx(T,{})},{key:"version",label:i._({id:"eE0JZ4"}),value:s.version,icon:e.jsx(T,{})},{key:"api",label:i._({id:"8XeFzA"}),value:s.apiVersion,icon:e.jsx(he,{})},{key:"plugins",label:i._({id:"ohUJJM"}),value:s.plugins_enabled?i._({id:"RxzN1M"}):i._({id:"E/QGRL"}),icon:e.jsx(ce,{}),color:s.plugins_enabled?"green":"red"},{key:"worker",label:i._({id:"3J7l5w"}),value:s.worker_running?i._({id:"RiQMUh"}):i._({id:"NnvXp5"}),icon:e.jsx(pe,{}),color:s.worker_running?"green":"red"}];return e.jsx(p,{striped:!0,p:"xs",children:e.jsx(p.Tbody,{children:a.map(n=>e.jsxs(p.Tr,{p:2,children:[e.jsx(p.Td,{children:e.jsx(b,{size:"xs",variant:"transparent",color:n.color,children:n.icon})}),e.jsx(p.Td,{children:e.jsx(x,{size:"sm",children:n.label})}),e.jsx(p.Td,{children:e.jsx(x,{size:"sm",children:n.value})})]},n.key))})})}function Oe(){const[t,l,s]=C(j(r=>[r.hostKey,r.setHost,r.hostList])),[a,n]=_(j(r=>[r.server,r.fetchServerApiState])),[c,d]=y.useState(!1),g=s[t]===void 0?i._({id:"bX1aQ5"}):s[t]?.name,[M,v]=E([!1,!0]),o=oe(),L=le(),[f]=Z(),[H,O]=_(j(r=>[r.sso_registration_enabled,r.registration_enabled])),P=O()||H()||!1,R=y.useMemo(()=>{const r=a.customize?.login_message;return r==null?null:e.jsxs(e.Fragment,{children:[e.jsx(S,{my:"md"}),e.jsx(x,{children:e.jsx("span",{dangerouslySetInnerHTML:{__html:r}})})]})},[a.customize]);function I(r){r!==null&&(l(s[r]?.host,r),q(),n())}return y.useEffect(()=>{t===""&&I(ee),X(o,L?.state,!0),f.has("login")&&f.has("password")&&(d(!0),Y(f.get("login")??"",f.get("password")??"",o).then(()=>{J(o,L?.state)}))},[]),e.jsx(e.Fragment,{children:M?e.jsx(_e,{hostKey:t,ChangeHost:I,setHostEdit:v}):e.jsxs(e.Fragment,{children:[e.jsx(F,{titleText:i._({id:"z0t9bb"}),smallPadding:!0,children:c?e.jsxs(e.Fragment,{children:[e.jsx(u,{justify:"center",children:e.jsx(K,{})}),e.jsx(h,{id:"wIGnZX"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{}),P&&e.jsxs(x,{ta:"center",size:"xs",mt:"md",children:[e.jsx(h,{id:"ln9/n9"})," ",e.jsx(Q,{component:"button",type:"button",c:"dimmed",size:"xs",onClick:()=>o("/register"),children:e.jsx(h,{id:"fgLNSM"})})]}),R," "]})}),e.jsx(ye,{hostname:g,toggleHostEdit:v})]})})}export{Oe as default};
//# sourceMappingURL=Login-CEkyzPjH.js.map
