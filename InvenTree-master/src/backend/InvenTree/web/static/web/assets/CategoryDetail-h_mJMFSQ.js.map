{"version":3,"file":"CategoryDetail-h_mJMFSQ.js","sources":["../../../../../../frontend/src/tables/part/ParametricPartTable.tsx","../../../../../../frontend/src/tables/part/PartCategoryTable.tsx","../../../../../../frontend/src/pages/part/CategoryDetail.tsx"],"sourcesContent":["import { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { TableColumn } from '@lib/types/Tables';\nimport { t } from '@lingui/core/macro';\nimport { useMemo } from 'react';\nimport { DescriptionColumn, PartColumn } from '../ColumnRenderers';\nimport ParametricDataTable from '../general/ParametricDataTable';\n\nexport default function ParametricPartTable({\n  categoryId\n}: Readonly<{\n  categoryId?: any;\n}>) {\n  const customFilters: TableFilter[] = useMemo(() => {\n    return [\n      {\n        name: 'active',\n        label: t`Active`,\n        description: t`Show active parts`\n      },\n      {\n        name: 'locked',\n        label: t`Locked`,\n        description: t`Show locked parts`\n      },\n      {\n        name: 'assembly',\n        label: t`Assembly`,\n        description: t`Show assembly parts`\n      }\n    ];\n  }, []);\n\n  const customColumns: TableColumn[] = useMemo(() => {\n    return [\n      PartColumn({\n        part: '',\n        switchable: false\n      }),\n      DescriptionColumn({\n        defaultVisible: false\n      }),\n      {\n        accessor: 'IPN',\n        sortable: true,\n        defaultVisible: false\n      },\n      {\n        accessor: 'total_in_stock',\n        sortable: true\n      }\n    ];\n  }, []);\n\n  return (\n    <ParametricDataTable\n      modelType={ModelType.part}\n      endpoint={ApiEndpoints.part_list}\n      customColumns={customColumns}\n      customFilters={customFilters}\n      queryParams={{\n        category: categoryId,\n        cascade: true,\n        category_detail: true\n      }}\n    />\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Group, Tooltip } from '@mantine/core';\nimport { IconBell } from '@tabler/icons-react';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { AddItemButton } from '@lib/components/AddItemButton';\nimport { type RowAction, RowEditAction } from '@lib/components/RowActions';\nimport { YesNoButton } from '@lib/components/YesNoButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { TableColumn } from '@lib/types/Tables';\nimport { ActionDropdown } from '../../components/items/ActionDropdown';\nimport { ApiIcon } from '../../components/items/ApiIcon';\nimport { partCategoryFields } from '../../forms/PartForms';\nimport { InvenTreeIcon } from '../../functions/icons';\nimport {\n  useBulkEditApiFormModal,\n  useCreateApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { useTable } from '../../hooks/UseTable';\nimport { useUserState } from '../../states/UserState';\nimport { DescriptionColumn } from '../ColumnRenderers';\nimport { InvenTreeTable } from '../InvenTreeTable';\n\n/**\n * PartCategoryTable - Displays a table of part categories\n */\nexport function PartCategoryTable({ parentId }: Readonly<{ parentId?: any }>) {\n  const table = useTable('partcategory');\n  const user = useUserState();\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    return [\n      {\n        accessor: 'name',\n        sortable: true,\n        switchable: false,\n        render: (record: any) => (\n          <Group gap='xs' wrap='nowrap' justify='space-between'>\n            <Group gap='xs' wrap='nowrap'>\n              {record.icon && <ApiIcon name={record.icon} />}\n              {record.name}\n            </Group>\n            <Group gap='xs' justify='flex-end' wrap='nowrap'>\n              {record.starred && (\n                <Tooltip\n                  label={t`You are subscribed to notifications for this category`}\n                >\n                  <IconBell color='green' size={16} />\n                </Tooltip>\n              )}\n            </Group>\n          </Group>\n        )\n      },\n      DescriptionColumn({}),\n      {\n        accessor: 'pathstring',\n        sortable: false\n      },\n      {\n        accessor: 'structural',\n        sortable: true,\n        defaultVisible: false,\n        render: (record: any) => {\n          return <YesNoButton value={record.structural} />;\n        }\n      },\n      {\n        accessor: 'part_count',\n        sortable: true\n      }\n    ];\n  }, []);\n\n  const tableFilters: TableFilter[] = useMemo(() => {\n    return [\n      {\n        name: 'cascade',\n        label: t`Include Subcategories`,\n        description: t`Include subcategories in results`\n      },\n      {\n        name: 'structural',\n        label: t`Structural`,\n        description: t`Show structural categories`\n      },\n      {\n        name: 'starred',\n        label: t`Subscribed`,\n        description: t`Show categories to which the user is subscribed`\n      }\n    ];\n  }, []);\n\n  const newCategoryFields = partCategoryFields({ create: true });\n\n  const newCategory = useCreateApiFormModal({\n    url: ApiEndpoints.category_list,\n    title: t`New Part Category`,\n    fields: newCategoryFields,\n    focus: 'name',\n    initialData: {\n      parent: parentId\n    },\n    follow: true,\n    modelType: ModelType.partcategory,\n    table: table\n  });\n\n  const [selectedCategory, setSelectedCategory] = useState<number>(-1);\n\n  const editCategoryFields = partCategoryFields({ create: false });\n\n  const editCategory = useEditApiFormModal({\n    url: ApiEndpoints.category_list,\n    pk: selectedCategory,\n    title: t`Edit Part Category`,\n    fields: editCategoryFields,\n    onFormSuccess: (record: any) => table.updateRecord(record)\n  });\n\n  const setParent = useBulkEditApiFormModal({\n    url: ApiEndpoints.category_list,\n    items: table.selectedIds,\n    title: t`Set Parent Category`,\n    fields: {\n      parent: {}\n    },\n    onFormSuccess: table.refreshTable\n  });\n\n  const tableActions = useMemo(() => {\n    const can_add = user.hasAddRole(UserRoles.part_category);\n    const can_edit = user.hasChangeRole(UserRoles.part_category);\n\n    return [\n      <ActionDropdown\n        tooltip={t`Category Actions`}\n        icon={<InvenTreeIcon icon='category' />}\n        disabled={!table.hasSelectedRecords}\n        actions={[\n          {\n            name: t`Set Parent`,\n            icon: <InvenTreeIcon icon='category' />,\n            tooltip: t`Set parent category for the selected items`,\n            hidden: !can_edit,\n            disabled: !table.hasSelectedRecords,\n            onClick: () => {\n              setParent.open();\n            }\n          }\n        ]}\n      />,\n      <AddItemButton\n        key='add-part-category'\n        tooltip={t`Add Part Category`}\n        onClick={() => newCategory.open()}\n        hidden={!can_add}\n      />\n    ];\n  }, [user, table.hasSelectedRecords]);\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      const can_edit = user.hasChangeRole(UserRoles.part_category);\n\n      return [\n        RowEditAction({\n          hidden: !can_edit,\n          onClick: () => {\n            setSelectedCategory(record.pk);\n            editCategory.open();\n          }\n        })\n      ];\n    },\n    [user]\n  );\n\n  return (\n    <>\n      {newCategory.modal}\n      {editCategory.modal}\n      {setParent.modal}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.category_list)}\n        tableState={table}\n        columns={tableColumns}\n        props={{\n          enableDownload: true,\n          enableSelection: true,\n          params: {\n            parent: parentId,\n            top_level: parentId === undefined ? true : undefined\n          },\n          tableFilters: tableFilters,\n          tableActions: tableActions,\n          rowActions: rowActions,\n          modelType: ModelType.partcategory\n        }}\n      />\n    </>\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Group, LoadingOverlay, Skeleton, Stack, Text } from '@mantine/core';\nimport {\n  IconCategory,\n  IconInfoCircle,\n  IconListCheck,\n  IconListDetails,\n  IconPackages,\n  IconSitemap,\n  IconTable\n} from '@tabler/icons-react';\nimport { useMemo, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { getDetailUrl } from '@lib/functions/Navigation';\nimport { useLocalStorage } from '@mantine/hooks';\nimport AdminButton from '../../components/buttons/AdminButton';\nimport StarredToggleButton from '../../components/buttons/StarredToggleButton';\nimport {\n  type DetailsField,\n  DetailsTable\n} from '../../components/details/Details';\nimport { ItemDetailsGrid } from '../../components/details/ItemDetails';\nimport {\n  DeleteItemAction,\n  EditItemAction,\n  OptionsActionDropdown\n} from '../../components/items/ActionDropdown';\nimport { ApiIcon } from '../../components/items/ApiIcon';\nimport InstanceDetail from '../../components/nav/InstanceDetail';\nimport NavigationTree from '../../components/nav/NavigationTree';\nimport { PageDetail } from '../../components/nav/PageDetail';\nimport type { PanelType } from '../../components/panels/Panel';\nimport { PanelGroup } from '../../components/panels/PanelGroup';\nimport SegmentedControlPanel from '../../components/panels/SegmentedControlPanel';\nimport { partCategoryFields } from '../../forms/PartForms';\nimport {\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { useInstance } from '../../hooks/UseInstance';\nimport { useUserState } from '../../states/UserState';\nimport ParametricPartTable from '../../tables/part/ParametricPartTable';\nimport { PartCategoryTable } from '../../tables/part/PartCategoryTable';\nimport PartCategoryTemplateTable from '../../tables/part/PartCategoryTemplateTable';\nimport { PartListTable } from '../../tables/part/PartTable';\nimport { StockItemTable } from '../../tables/stock/StockItemTable';\n\n/**\n * Detail view for a single PartCategory instance.\n *\n * Note: If no category ID is supplied, this acts as the top-level part category page\n */\nexport default function CategoryDetail() {\n  const { id: _id } = useParams();\n  const id = useMemo(\n    () => (!Number.isNaN(Number.parseInt(_id || '')) ? _id : undefined),\n    [_id]\n  );\n\n  const navigate = useNavigate();\n  const user = useUserState();\n\n  const [treeOpen, setTreeOpen] = useState(false);\n\n  const {\n    instance: category,\n    refreshInstance,\n    instanceQuery\n  } = useInstance({\n    endpoint: ApiEndpoints.category_list,\n    hasPrimaryKey: true,\n    pk: id,\n    params: {\n      path_detail: true\n    }\n  });\n\n  const detailsPanel = useMemo(() => {\n    if (id && instanceQuery.isFetching) {\n      return <Skeleton />;\n    }\n\n    const left: DetailsField[] = [\n      {\n        type: 'text',\n        name: 'name',\n        label: t`Name`,\n        copy: true,\n        value_formatter: () => (\n          <Group gap='xs'>\n            {category.icon && <ApiIcon name={category.icon} />}\n            {category.name}\n          </Group>\n        )\n      },\n      {\n        type: 'text',\n        name: 'pathstring',\n        label: t`Path`,\n        icon: 'sitemap',\n        copy: true,\n        hidden: !id\n      },\n      {\n        type: 'text',\n        name: 'description',\n        label: t`Description`,\n        copy: true\n      },\n      {\n        type: 'link',\n        name: 'parent',\n        model_field: 'name',\n        icon: 'location',\n        label: t`Parent Category`,\n        model: ModelType.partcategory,\n        hidden: !category?.parent\n      },\n      {\n        type: 'boolean',\n        name: 'starred',\n        icon: 'notification',\n        label: t`Subscribed`\n      }\n    ];\n\n    const right: DetailsField[] = [\n      {\n        type: 'text',\n        name: 'part_count',\n        label: t`Parts`,\n        icon: 'part',\n        value_formatter: () => category?.part_count || '0'\n      },\n      {\n        type: 'text',\n        name: 'subcategories',\n        label: t`Subcategories`,\n        icon: 'sitemap',\n        hidden: !category?.subcategories\n      },\n      {\n        type: 'boolean',\n        name: 'structural',\n        label: t`Structural`,\n        icon: 'sitemap'\n      },\n      {\n        type: 'link',\n        name: 'parent_default_location',\n        label: t`Parent default location`,\n        model: ModelType.stocklocation,\n        hidden: !category.parent_default_location || category.default_location\n      },\n      {\n        type: 'link',\n        name: 'default_location',\n        label: t`Default location`,\n        model: ModelType.stocklocation,\n        hidden: !category.default_location\n      }\n    ];\n\n    return (\n      <ItemDetailsGrid>\n        {id && category?.pk ? (\n          <DetailsTable item={category} fields={left} />\n        ) : (\n          <Text>{t`Top level part category`}</Text>\n        )}\n        {id && category?.pk && <DetailsTable item={category} fields={right} />}\n      </ItemDetailsGrid>\n    );\n  }, [category, instanceQuery]);\n\n  const editCategory = useEditApiFormModal({\n    url: ApiEndpoints.category_list,\n    pk: id,\n    title: t`Edit Part Category`,\n    fields: partCategoryFields({}),\n    onFormSuccess: refreshInstance\n  });\n\n  const deleteOptions = useMemo(() => {\n    return [\n      {\n        value: 'false',\n        display_name: t`Move items to parent category`\n      },\n      {\n        value: 'true',\n        display_name: t`Delete items`\n      }\n    ];\n  }, []);\n\n  const deleteCategory = useDeleteApiFormModal({\n    url: ApiEndpoints.category_list,\n    pk: id,\n    title: t`Delete Part Category`,\n    fields: {\n      delete_parts: {\n        label: t`Parts Action`,\n        description: t`Action for parts in this category`,\n        choices: deleteOptions,\n        required: true,\n        field_type: 'choice'\n      },\n      delete_child_categories: {\n        label: t`Child Categories Action`,\n        description: t`Action for child categories in this category`,\n        choices: deleteOptions,\n        required: true,\n        field_type: 'choice'\n      }\n    },\n    onFormSuccess: () => {\n      if (category.parent) {\n        navigate(getDetailUrl(ModelType.partcategory, category.parent));\n      } else {\n        navigate('/part/');\n      }\n    }\n  });\n\n  const categoryActions = useMemo(() => {\n    return [\n      <AdminButton\n        key='admin'\n        model={ModelType.partcategory}\n        id={category.pk}\n      />,\n      <StarredToggleButton\n        key='starred_change'\n        instance={category}\n        model={ModelType.partcategory}\n        successFunction={() => {\n          refreshInstance();\n        }}\n      />,\n      <OptionsActionDropdown\n        key='category-actions'\n        tooltip={t`Category Actions`}\n        actions={[\n          EditItemAction({\n            hidden: !id || !user.hasChangeRole(UserRoles.part_category),\n            tooltip: t`Edit Part Category`,\n            onClick: () => editCategory.open()\n          }),\n          DeleteItemAction({\n            hidden: !id || !user.hasDeleteRole(UserRoles.part_category),\n            tooltip: t`Delete Part Category`,\n            onClick: () => deleteCategory.open()\n          })\n        ]}\n      />\n    ];\n  }, [id, user, category.pk, category.starred]);\n\n  const [partsView, setPartsView] = useLocalStorage<string>({\n    key: 'category-parts-view',\n    defaultValue: 'table'\n  });\n\n  const panels: PanelType[] = useMemo(\n    () => [\n      {\n        name: 'details',\n        label: t`Category Details`,\n        icon: <IconInfoCircle />,\n        content: detailsPanel\n      },\n      {\n        name: 'subcategories',\n        label: id ? t`Subcategories` : t`Part Categories`,\n        icon: <IconSitemap />,\n        content: <PartCategoryTable parentId={id} />\n      },\n      SegmentedControlPanel({\n        name: 'parts',\n        label: t`Parts`,\n        icon: <IconCategory />,\n        selection: partsView,\n        onChange: setPartsView,\n        options: [\n          {\n            value: 'table',\n            label: t`Table View`,\n            icon: <IconTable />,\n            content: (\n              <PartListTable\n                props={{\n                  params: {\n                    category: id\n                  }\n                }}\n              />\n            )\n          },\n          {\n            value: 'parametric',\n            label: t`Parametric View`,\n            icon: <IconListDetails />,\n            content: <ParametricPartTable categoryId={id} />\n          }\n        ]\n      }),\n      {\n        name: 'stockitem',\n        label: t`Stock Items`,\n        icon: <IconPackages />,\n        hidden: !id,\n        content: (\n          <StockItemTable\n            params={{\n              category: id\n            }}\n            allowAdd={false}\n            tableName='category-stockitems'\n          />\n        )\n      },\n      {\n        name: 'category_parameters',\n        label: t`Category Parameters`,\n        icon: <IconListCheck />,\n        hidden: !id || !category.pk,\n        content: <PartCategoryTemplateTable categoryId={category?.pk} />\n      }\n    ],\n    [category, id, partsView]\n  );\n\n  const breadcrumbs = useMemo(\n    () => [\n      { name: t`Parts`, url: '/part' },\n      ...(category.path ?? []).map((c: any) => ({\n        name: c.name,\n        url: getDetailUrl(ModelType.partcategory, c.pk),\n        icon: c.icon ? <ApiIcon name={c.icon} /> : undefined\n      }))\n    ],\n    [category]\n  );\n\n  return (\n    <>\n      {editCategory.modal}\n      {deleteCategory.modal}\n      <InstanceDetail\n        query={instanceQuery}\n        requiredRole={UserRoles.part_category}\n      >\n        <Stack gap='xs'>\n          <LoadingOverlay visible={instanceQuery.isFetching} />\n          <NavigationTree\n            modelType={ModelType.partcategory}\n            title={t`Part Categories`}\n            endpoint={ApiEndpoints.category_tree}\n            opened={treeOpen}\n            onClose={() => {\n              setTreeOpen(false);\n            }}\n            selectedId={category?.pk}\n          />\n          <PageDetail\n            title={(category?.name ?? id) ? t`Part Category` : t`Parts`}\n            subtitle={category?.description}\n            icon={category?.icon && <ApiIcon name={category?.icon} />}\n            breadcrumbs={breadcrumbs}\n            breadcrumbAction={() => {\n              setTreeOpen(true);\n            }}\n            actions={categoryActions}\n            editAction={editCategory.open}\n            editEnabled={\n              !!category?.pk && user.hasChangePermission(ModelType.partcategory)\n            }\n          />\n          <PanelGroup\n            pageKey='partcategory'\n            panels={panels}\n            model={ModelType.partcategory}\n            instance={category}\n            reloadInstance={refreshInstance}\n            id={category.pk ?? null}\n          />\n        </Stack>\n      </InstanceDetail>\n    </>\n  );\n}\n"],"names":["ParametricPartTable","categoryId","customFilters","useMemo","name","label","_i18n","_","id","description","customColumns","PartColumn","part","switchable","DescriptionColumn","defaultVisible","accessor","sortable","jsx","ParametricDataTable","ModelType","ApiEndpoints","part_list","category","cascade","category_detail","PartCategoryTable","parentId","table","useTable","user","useUserState","tableColumns","render","record","jsxs","Group","icon","ApiIcon","starred","Tooltip","IconBell","YesNoButton","structural","tableFilters","newCategoryFields","partCategoryFields","create","newCategory","useCreateApiFormModal","url","category_list","title","fields","focus","initialData","parent","follow","modelType","partcategory","selectedCategory","setSelectedCategory","useState","editCategoryFields","editCategory","useEditApiFormModal","pk","onFormSuccess","updateRecord","setParent","useBulkEditApiFormModal","items","selectedIds","refreshTable","tableActions","can_add","hasAddRole","UserRoles","part_category","can_edit","hasChangeRole","ActionDropdown","InvenTreeIcon","hasSelectedRecords","tooltip","hidden","disabled","onClick","open","AddItemButton","rowActions","useCallback","RowEditAction","Fragment","modal","InvenTreeTable","apiUrl","enableDownload","enableSelection","params","top_level","undefined","CategoryDetail","_id","useParams","Number","isNaN","parseInt","navigate","useNavigate","treeOpen","setTreeOpen","instance","refreshInstance","instanceQuery","useInstance","endpoint","hasPrimaryKey","path_detail","detailsPanel","isFetching","Skeleton","left","type","copy","value_formatter","model_field","model","right","part_count","subcategories","stocklocation","parent_default_location","default_location","ItemDetailsGrid","DetailsTable","Text","deleteOptions","value","display_name","deleteCategory","useDeleteApiFormModal","delete_parts","choices","required","field_type","delete_child_categories","getDetailUrl","categoryActions","AdminButton","StarredToggleButton","OptionsActionDropdown","EditItemAction","DeleteItemAction","hasDeleteRole","partsView","setPartsView","useLocalStorage","key","defaultValue","panels","IconInfoCircle","content","IconSitemap","SegmentedControlPanel","IconCategory","selection","onChange","options","IconTable","PartListTable","IconListDetails","IconPackages","StockItemTable","IconListCheck","PartCategoryTemplateTable","breadcrumbs","path","map","c","InstanceDetail","Stack","LoadingOverlay","NavigationTree","category_tree","PageDetail","hasChangePermission","PanelGroup"],"mappings":"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"}