import{K as i,j as e,aa as L,ab as s,O as I,c2 as F,bi as P,ah as M,a as B,ag as R,r as N,N as m,aj as z,S as k,ay as _,c0 as v,cZ as A,A as w,c,bd as C,aq as E,d as $,cW as G,c_ as d,cX as O,av as q,c$ as K,d0 as D,e as V,an as Z,ao as X}from"./index-Db7AGPIq.js";import{I as U}from"./IconBrandGithub-BTOpLaos.js";import{e as W}from"./Alerts-BDuxLv_A.js";import{u as y}from"./use-form-CbMMN0f0.js";import{a as S,u as Q}from"./ThemeContext-CxdCkKtz.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M6 7.5l-4 9.5h4l6 -15z",key:"svg-0"}],["path",{d:"M22 20l-7 -15l-3 7l4 5l-8 3z",key:"svg-1"}]],J=i("outline","brand-azure","BrandAzure",Y);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M3.648 4a.64 .64 0 0 0 -.64 .744l3.14 14.528c.07 .417 .43 .724 .852 .728h10a.644 .644 0 0 0 .642 -.539l3.35 -14.71a.641 .641 0 0 0 -.64 -.744l-16.704 -.007z",key:"svg-0"}],["path",{d:"M14 15h-4l-1 -6h6z",key:"svg-1"}]],ee=i("outline","brand-bitbucket","BrandBitbucket",H);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M8 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-0"}],["path",{d:"M14 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M15.5 17c0 1 1.5 3 2 3c1.5 0 2.833 -1.667 3.5 -3c.667 -1.667 .5 -5.833 -1.5 -11.5c-1.457 -1.015 -3 -1.34 -4.5 -1.5l-.972 1.923a11.913 11.913 0 0 0 -4.053 0l-.975 -1.923c-1.5 .16 -3.043 .485 -4.5 1.5c-2 5.667 -2.167 9.833 -1.5 11.5c.667 1.333 2 3 3.5 3c.5 0 2 -2 2 -3",key:"svg-2"}],["path",{d:"M7 16.5c3.5 1 6.5 1 10 0",key:"svg-3"}]],ae=i("outline","brand-discord","BrandDiscord",se);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3",key:"svg-0"}]],ie=i("outline","brand-facebook","BrandFacebook",te);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M7 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M17 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}]],ne=i("outline","brand-flickr","BrandFlickr",oe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M21 14l-9 7l-9 -7l3 -11l3 7h6l3 -7z",key:"svg-0"}]],le=i("outline","brand-gitlab","BrandGitlab",re);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M20.945 11a9 9 0 1 1 -3.284 -5.997l-2.655 2.392a5.5 5.5 0 1 0 2.119 6.605h-4.125v-3h7.945z",key:"svg-0"}]],de=i("outline","brand-google","BrandGoogle",ce);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M12 8c2.648 0 5.028 .826 6.675 2.14a2.5 2.5 0 0 1 2.326 4.36c0 3.59 -4.03 6.5 -9 6.5c-4.875 0 -8.845 -2.8 -9 -6.294l-1 -.206a2.5 2.5 0 0 1 2.326 -4.36c1.646 -1.313 4.026 -2.14 6.674 -2.14z",key:"svg-0"}],["path",{d:"M12 8l1 -5l6 1",key:"svg-1"}],["path",{d:"M19 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["circle",{cx:"9",cy:"13",r:".5",fill:"currentColor",key:"svg-3"}],["circle",{cx:"15",cy:"13",r:".5",fill:"currentColor",key:"svg-4"}],["path",{d:"M10 17c.667 .333 1.333 .5 2 .5s1.333 -.167 2 -.5",key:"svg-5"}]],ge=i("outline","brand-reddit","BrandReddit",ue);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M4 5v11a1 1 0 0 0 1 1h2v4l4 -4h5.584c.266 0 .52 -.105 .707 -.293l2.415 -2.414c.187 -.188 .293 -.442 .293 -.708v-8.585a1 1 0 0 0 -1 -1h-14a1 1 0 0 0 -1 1z",key:"svg-0"}],["path",{d:"M16 8l0 4",key:"svg-1"}],["path",{d:"M12 8l0 4",key:"svg-2"}]],he=i("outline","brand-twitch","BrandTwitch",pe);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z",key:"svg-0"}]],_e=i("outline","brand-twitter","BrandTwitter",me);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M21 12h-13l3 -3",key:"svg-1"}],["path",{d:"M11 15l-3 -3",key:"svg-2"}]],xe=i("outline","login","Login",be),je={google:e.jsx(de,{}),github:e.jsx(U,{}),facebook:e.jsx(ie,{}),discord:e.jsx(ae,{}),twitter:e.jsx(_e,{}),bitbucket:e.jsx(ee,{}),flickr:e.jsx(ne,{}),gitlab:e.jsx(le,{}),reddit:e.jsx(ge,{}),twitch:e.jsx(he,{}),microsoft:e.jsx(J,{})};function T({provider:a}){return e.jsx(L,{label:s._({id:"pQOGQK"}),children:e.jsx(I,{leftSection:fe(a),radius:"xl",component:"a",onClick:()=>F(a),children:a.name})})}function fe(a){return je[a.id]||e.jsx(xe,{})}function Me(){const a=y({initialValues:{username:"",password:"",code:""}}),b=y({initialValues:{email:""}}),[l,u]=P(!0),[g,j,p]=M(B(t=>[t.auth_config,t.sso_enabled,t.password_forgotten_enabled])),h=S(),f=Q(),{isLoggedIn:o}=R(),[x,n]=N.useState(!1);function r(){n(!0),l===!0?G(a.values.username,a.values.password,h,a.values.code).then(t=>{n(!1),o()?(d({title:s._({id:"6cPKtu"}),message:s._({id:"uKMMk4"})}),O(h,f?.state)):t||d({title:s._({id:"4GKuCs"}),message:s._({id:"tnaYa/"}),success:!1})}).catch(()=>{q({title:s._({id:"4GKuCs"}),message:s._({id:"tnaYa/"}),color:"red"})}):K(b.values.email).then(t=>{n(!1),t?.status==="ok"?d({title:s._({id:"XAIcYu"}),message:s._({id:"R2JMfc"})}):d({title:s._({id:"MMJM0z"}),message:s._({id:"tnaYa/"}),success:!1})})}return e.jsxs(e.Fragment,{children:[j()?e.jsxs(e.Fragment,{children:[e.jsx(m,{grow:!0,mb:"md",mt:"md",children:g?.socialaccount.providers.map(t=>e.jsx(T,{provider:t},t.id))}),e.jsx(z,{label:s._({id:"zTZjMy"}),labelPosition:"center",my:"lg"})]}):null,e.jsxs("form",{onSubmit:a.onSubmit(()=>{}),children:[l?e.jsxs(k,{gap:0,children:[e.jsx(_,{required:!0,label:s._({id:"7sNhEz"}),"aria-label":"login-username",placeholder:s._({id:"k1RkIL"}),...a.getInputProps("username")}),e.jsx(v,{required:!0,label:s._({id:"8ZsakT"}),"aria-label":"login-password",placeholder:s._({id:"9TO8nT"}),...a.getInputProps("password")}),e.jsx(A,{children:e.jsx(_,{name:"TOTP",...a.getInputProps("code"),hidden:!0})}),p()===!0&&e.jsx(m,{justify:"space-between",mt:"0",children:e.jsx(w,{component:"button",type:"button",c:"dimmed",size:"xs",onClick:()=>h("/reset-password"),children:e.jsx(c,{id:"RfwZxd"})})})]}):e.jsx(k,{children:e.jsx(_,{required:!0,label:s._({id:"O3oNi5"}),description:s._({id:"Wr5sDQ"}),placeholder:"email@example.org",...b.getInputProps("email")})}),e.jsxs(m,{justify:"space-between",mt:"xl",children:[e.jsx(w,{component:"button",type:"button",c:"dimmed",size:"xs",onClick:()=>u.toggle(),children:l?e.jsx(c,{id:"7ZOmjI"}):e.jsx(c,{id:"vZk5Sm"})}),e.jsx(I,{type:"submit",disabled:x,onClick:r,children:x?e.jsx(C,{size:"sm"}):e.jsx(e.Fragment,{children:l?e.jsx(c,{id:"ADVQ46"}):e.jsx(c,{id:"i/TzEU"})})})]})]})]})}function Be(){const a=y({initialValues:{username:"",email:"",password:"",password2:""}}),b=S(),[l,u,g]=M(B(o=>[o.auth_config,o.registration_enabled,o.sso_registration_enabled])),[j,p]=N.useState(!1);async function h(){if(a.values.password!==a.values.password2){a.setFieldError("password2",s._({id:"lpIMne"}));return}p(!0);const{password2:o,...x}=a.values;await D(),V.post(Z(X.auth_signup),x,{headers:{Authorization:""}}).then(n=>{n?.status===200&&(p(!1),d({title:s._({id:"EoCs7m"}),message:s._({id:"n2c6Ul"})}),b("/home"))}).catch(n=>{if(n.response?.status===400){p(!1);const r={};for(const t of n.response.data.errors)r[t.param]||(r[t.param]=[]),r[t.param].push(t.message);for(const t in r)a.setFieldError(t,r[t]);d({title:s._({id:"ccnxuA"}),message:s._({id:"SxviKF"}),success:!1})}})}const f=u()&&g();return e.jsxs(e.Fragment,{children:[u()&&e.jsxs("form",{onSubmit:a.onSubmit(()=>{}),children:[e.jsxs(k,{gap:0,children:[e.jsx(_,{required:!0,label:s._({id:"7sNhEz"}),"aria-label":"register-username",placeholder:s._({id:"k1RkIL"}),...a.getInputProps("username")}),e.jsx(_,{required:!0,label:s._({id:"O3oNi5"}),"aria-label":"register-email",description:s._({id:"kXXdWU"}),placeholder:"email@example.org",...a.getInputProps("email")}),e.jsx(v,{required:!0,label:s._({id:"8ZsakT"}),"aria-label":"register-password",placeholder:s._({id:"9TO8nT"}),...a.getInputProps("password")}),e.jsx(v,{required:!0,label:s._({id:"NK5XEe"}),"aria-label":"register-password-repeat",placeholder:s._({id:"R1OtIL"}),...a.getInputProps("password2")})]}),e.jsx(m,{justify:"space-between",mt:"xl",children:e.jsx(I,{type:"submit",disabled:j,onClick:h,fullWidth:!0,children:e.jsx(c,{id:"fgLNSM"})})})]}),f&&e.jsx(z,{label:s._({id:"IES56a"}),labelPosition:"center",my:"lg"}),g()&&e.jsx(m,{grow:!0,mb:"md",mt:"md",children:l?.socialaccount.providers.map(o=>e.jsx(T,{provider:o},o.id))}),!u()&&!g()&&e.jsxs(E,{title:s._({id:"l+/XTD"}),color:"orange",children:[e.jsx($,{children:s._({id:"0nrVnP"})}),W("INVE-W11")]})]})}export{Me as A,Be as R};
//# sourceMappingURL=AuthenticationForm--2xlwUH6.js.map
