{"version":3,"file":"PartTable-Bj-hT2fm.js","sources":["../../../../../../frontend/src/tables/part/PartTable.tsx"],"sourcesContent":["import {\n  type RowAction,\n  RowDuplicateAction,\n  RowEditAction\n} from '@lib/components/RowActions';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { ApiFormFieldSet } from '@lib/types/Forms';\nimport type { TableColumn } from '@lib/types/Tables';\nimport type { InvenTreeTableProps } from '@lib/types/Tables';\nimport { t } from '@lingui/core/macro';\nimport { Group, Text } from '@mantine/core';\nimport {\n  IconFileUpload,\n  IconPackageImport,\n  IconPlus,\n  IconShoppingCart\n} from '@tabler/icons-react';\nimport { type ReactNode, useCallback, useMemo, useState } from 'react';\nimport ImporterDrawer from '../../components/importer/ImporterDrawer';\nimport { ActionDropdown } from '../../components/items/ActionDropdown';\nimport ImportPartWizard from '../../components/wizards/ImportPartWizard';\nimport OrderPartsWizard from '../../components/wizards/OrderPartsWizard';\nimport { formatDecimal, formatPriceRange } from '../../defaults/formatters';\nimport { dataImporterSessionFields } from '../../forms/ImporterForms';\nimport { usePartFields } from '../../forms/PartForms';\nimport { InvenTreeIcon } from '../../functions/icons';\nimport {\n  useBulkEditApiFormModal,\n  useCreateApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { usePluginsWithMixin } from '../../hooks/UsePlugins';\nimport { useTable } from '../../hooks/UseTable';\nimport { useGlobalSettingsState } from '../../states/SettingsStates';\nimport { useUserState } from '../../states/UserState';\nimport {\n  CategoryColumn,\n  DefaultLocationColumn,\n  DescriptionColumn,\n  LinkColumn,\n  PartColumn\n} from '../ColumnRenderers';\nimport { InvenTreeTable } from '../InvenTreeTable';\nimport { TableHoverCard } from '../TableHoverCard';\n\n/**\n * Construct a list of columns for the part table\n */\nfunction partTableColumns(): TableColumn[] {\n  return [\n    PartColumn({\n      part: '',\n      accessor: 'name'\n    }),\n    {\n      accessor: 'IPN',\n      sortable: true\n    },\n    {\n      accessor: 'revision',\n      sortable: true\n    },\n    {\n      accessor: 'units',\n      sortable: true\n    },\n    DescriptionColumn({}),\n    CategoryColumn({\n      accessor: 'category_detail'\n    }),\n    DefaultLocationColumn({\n      accessor: 'default_location_detail'\n    }),\n    {\n      accessor: 'total_in_stock',\n      sortable: true,\n\n      render: (record) => {\n        const extra: ReactNode[] = [];\n\n        const stock = record?.total_in_stock ?? 0;\n        const allocated =\n          (record?.allocated_to_build_orders ?? 0) +\n          (record?.allocated_to_sales_orders ?? 0);\n        const available = Math.max(0, stock - allocated);\n        const min_stock = record?.minimum_stock ?? 0;\n\n        let text = String(formatDecimal(stock));\n\n        let color: string | undefined = undefined;\n\n        if (min_stock > stock) {\n          extra.push(\n            <Text key='min-stock' c='orange'>\n              {`${t`Minimum stock`}: ${formatDecimal(min_stock)}`}\n            </Text>\n          );\n\n          color = 'orange';\n        }\n\n        if (record.ordering > 0) {\n          extra.push(\n            <Text key='on-order'>{`${t`On Order`}: ${formatDecimal(record.ordering)}`}</Text>\n          );\n        }\n\n        if (record.building) {\n          extra.push(\n            <Text key='building'>{`${t`Building`}: ${formatDecimal(record.building)}`}</Text>\n          );\n        }\n\n        if (record.allocated_to_build_orders > 0) {\n          extra.push(\n            <Text key='bo-allocations'>\n              {`${t`Build Order Allocations`}: ${formatDecimal(record.allocated_to_build_orders)}`}\n            </Text>\n          );\n        }\n\n        if (record.allocated_to_sales_orders > 0) {\n          extra.push(\n            <Text key='so-allocations'>\n              {`${t`Sales Order Allocations`}: ${formatDecimal(record.allocated_to_sales_orders)}`}\n            </Text>\n          );\n        }\n\n        if (available != stock) {\n          extra.push(\n            <Text key='available'>\n              {t`Available`}: {formatDecimal(available)}\n            </Text>\n          );\n        }\n\n        if (record.external_stock > 0) {\n          extra.push(\n            <Text key='external'>\n              {t`External stock`}: {formatDecimal(record.external_stock)}\n            </Text>\n          );\n        }\n\n        if (stock <= 0) {\n          color = 'red';\n          text = t`No stock`;\n        } else if (available <= 0) {\n          color = 'orange';\n        } else if (available < min_stock) {\n          color = 'yellow';\n        }\n\n        return (\n          <TableHoverCard\n            value={\n              <Group gap='xs' justify='left' wrap='nowrap'>\n                <Text c={color}>{text}</Text>\n                {record.units && (\n                  <Text size='xs' c={color}>\n                    [{record.units}]\n                  </Text>\n                )}\n              </Group>\n            }\n            title={t`Stock Information`}\n            extra={extra}\n          />\n        );\n      }\n    },\n    {\n      accessor: 'price_range',\n      title: t`Price Range`,\n      sortable: true,\n      ordering: 'pricing_max',\n      defaultVisible: false,\n      render: (record: any) =>\n        formatPriceRange(record.pricing_min, record.pricing_max)\n    },\n    LinkColumn({})\n  ];\n}\n\n/**\n * Construct a set of filters for the part table\n */\nfunction partTableFilters(): TableFilter[] {\n  return [\n    {\n      name: 'active',\n      label: t`Active`,\n      description: t`Filter by part active status`,\n      type: 'boolean'\n    },\n    {\n      name: 'locked',\n      label: t`Locked`,\n      description: t`Filter by part locked status`,\n      type: 'boolean'\n    },\n    {\n      name: 'assembly',\n      label: t`Assembly`,\n      description: t`Filter by assembly attribute`,\n      type: 'boolean'\n    },\n    {\n      name: 'bom_valid',\n      label: t`BOM Valid`,\n      description: t`Filter by parts with a valid BOM`,\n      type: 'boolean'\n    },\n    {\n      name: 'cascade',\n      label: t`Include Subcategories`,\n      description: t`Include parts in subcategories`,\n      type: 'boolean'\n    },\n    {\n      name: 'component',\n      label: t`Component`,\n      description: t`Filter by component attribute`,\n      type: 'boolean'\n    },\n    {\n      name: 'testable',\n      label: t`Testable`,\n      description: t`Filter by testable attribute`,\n      type: 'boolean'\n    },\n    {\n      name: 'trackable',\n      label: t`Trackable`,\n      description: t`Filter by trackable attribute`,\n      type: 'boolean'\n    },\n    {\n      name: 'has_units',\n      label: t`Has Units`,\n      description: t`Filter by parts which have units`,\n      type: 'boolean'\n    },\n    {\n      name: 'has_ipn',\n      label: t`Has IPN`,\n      description: t`Filter by parts which have an internal part number`,\n      type: 'boolean'\n    },\n    {\n      name: 'has_stock',\n      label: t`Has Stock`,\n      description: t`Filter by parts which have stock`,\n      type: 'boolean'\n    },\n    {\n      name: 'low_stock',\n      label: t`Low Stock`,\n      description: t`Filter by parts which have low stock`,\n      type: 'boolean'\n    },\n    {\n      name: 'purchaseable',\n      label: t`Purchaseable`,\n      description: t`Filter by parts which are purchaseable`,\n      type: 'boolean'\n    },\n    {\n      name: 'salable',\n      label: t`Salable`,\n      description: t`Filter by parts which are salable`,\n      type: 'boolean'\n    },\n    {\n      name: 'virtual',\n      label: t`Virtual`,\n      description: t`Filter by parts which are virtual`,\n      type: 'choice',\n      choices: [\n        { value: 'true', label: t`Virtual` },\n        { value: 'false', label: t`Not Virtual` }\n      ]\n    },\n    {\n      name: 'is_template',\n      label: t`Is Template`,\n      description: t`Filter by parts which are templates`,\n      type: 'boolean'\n    },\n    {\n      name: 'is_variant',\n      label: t`Is Variant`,\n      description: t`Filter by parts which are variants`,\n      type: 'boolean'\n    },\n    {\n      name: 'is_revision',\n      label: t`Is Revision`,\n      description: t`Filter by parts which are revisions`\n    },\n    {\n      name: 'has_revisions',\n      label: t`Has Revisions`,\n      description: t`Filter by parts which have revisions`\n    },\n    {\n      name: 'has_pricing',\n      label: t`Has Pricing`,\n      description: t`Filter by parts which have pricing information`,\n      type: 'boolean'\n    },\n    {\n      name: 'unallocated_stock',\n      label: t`Available Stock`,\n      description: t`Filter by parts which have available stock`,\n      type: 'boolean'\n    },\n    {\n      name: 'starred',\n      label: t`Subscribed`,\n      description: t`Filter by parts to which the user is subscribed`,\n      type: 'boolean'\n    }\n  ];\n}\n\n/**\n * PartListTable - Displays a list of parts, based on the provided parameters\n * @param {Object} params - The query parameters to pass to the API\n * @returns\n */\nexport function PartListTable({\n  enableImport = true,\n  basePartInstance,\n  props,\n  defaultPartData\n}: Readonly<{\n  enableImport?: boolean;\n  props?: InvenTreeTableProps;\n  basePartInstance?: any;\n  defaultPartData?: any;\n}>) {\n  const tableColumns = useMemo(() => partTableColumns(), []);\n  const tableFilters = useMemo(() => partTableFilters(), []);\n\n  const table = useTable('part-list');\n  const user = useUserState();\n  const globalSettings = useGlobalSettingsState();\n\n  const [importOpened, setImportOpened] = useState<boolean>(false);\n\n  const [selectedSession, setSelectedSession] = useState<number | undefined>(\n    undefined\n  );\n\n  const importSessionFields = useMemo(() => {\n    const fields = dataImporterSessionFields({\n      modelType: ModelType.part\n    });\n\n    // Override default field values with provided fields\n    fields.field_defaults.value = {\n      ...props?.params,\n      ...defaultPartData\n    };\n\n    return fields;\n  }, [defaultPartData, props?.params]);\n\n  const importParts = useCreateApiFormModal({\n    url: ApiEndpoints.import_session_list,\n    title: t`Import Parts`,\n    fields: importSessionFields,\n    onFormSuccess: (response: any) => {\n      setSelectedSession(response.pk);\n      setImportOpened(true);\n    }\n  });\n\n  const initialPartData = useMemo(() => {\n    return defaultPartData ?? props?.params ?? {};\n  }, [defaultPartData, props?.params]);\n\n  const newPartFields = usePartFields({\n    create: true,\n    duplicatePartInstance: basePartInstance\n  });\n\n  const newPart = useCreateApiFormModal({\n    url: ApiEndpoints.part_list,\n    title: t`Add Part`,\n    fields: newPartFields,\n    initialData: initialPartData,\n    follow: true,\n    modelType: ModelType.part\n  });\n\n  const [selectedPart, setSelectedPart] = useState<any>({});\n\n  const editPart = useEditApiFormModal({\n    url: ApiEndpoints.part_list,\n    pk: selectedPart.pk,\n    title: t`Edit Part`,\n    fields: usePartFields({ create: false }),\n    onFormSuccess: table.refreshTable\n  });\n\n  const createPartFields = usePartFields({ create: true });\n\n  const duplicatePartFields: ApiFormFieldSet = useMemo(() => {\n    return {\n      ...createPartFields,\n      duplicate: {\n        children: {\n          part: {\n            value: selectedPart.pk,\n            hidden: true\n          },\n          copy_image: {\n            value: true\n          },\n          copy_bom: {\n            value:\n              selectedPart.assembly && globalSettings.isSet('PART_COPY_BOM'),\n            hidden: !selectedPart.assembly\n          },\n          copy_notes: {\n            value: true\n          },\n          copy_parameters: {\n            value: globalSettings.isSet('PART_COPY_PARAMETERS')\n          },\n          copy_tests: {\n            value: selectedPart.testable,\n            hidden: !selectedPart.testable\n          }\n        }\n      }\n    };\n  }, [createPartFields, globalSettings, selectedPart]);\n\n  const duplicatePart = useCreateApiFormModal({\n    url: ApiEndpoints.part_list,\n    title: t`Add Part`,\n    fields: duplicatePartFields,\n    initialData: {\n      ...selectedPart,\n      active: true,\n      locked: false\n    },\n    follow: false,\n    modelType: ModelType.part,\n    onFormSuccess: table.refreshTable\n  });\n\n  const setCategory = useBulkEditApiFormModal({\n    url: ApiEndpoints.part_list,\n    items: table.selectedIds,\n    title: t`Set Category`,\n    fields: {\n      category: {}\n    },\n    onFormSuccess: table.refreshTable\n  });\n\n  const orderPartsWizard = OrderPartsWizard({ parts: table.selectedRecords });\n\n  const supplierPlugins = usePluginsWithMixin('supplier');\n  const importPartWizard = ImportPartWizard({\n    categoryId: initialPartData.category\n  });\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      const can_edit = user.hasChangePermission(ModelType.part);\n      const can_add = user.hasAddPermission(ModelType.part);\n\n      return [\n        RowEditAction({\n          hidden: !can_edit,\n          onClick: () => {\n            setSelectedPart(record);\n            editPart.open();\n          }\n        }),\n        RowDuplicateAction({\n          hidden: !can_add,\n          onClick: () => {\n            setSelectedPart(record);\n            duplicatePart.open();\n          }\n        })\n      ];\n    },\n    [user, editPart, duplicatePart]\n  );\n\n  const tableActions = useMemo(() => {\n    return [\n      <ActionDropdown\n        tooltip={t`Part Actions`}\n        icon={<InvenTreeIcon icon='part' />}\n        disabled={!table.hasSelectedRecords}\n        position='bottom-start'\n        actions={[\n          {\n            name: t`Set Category`,\n            icon: <InvenTreeIcon icon='category' />,\n            tooltip: t`Set category for selected parts`,\n            hidden: !user.hasChangeRole(UserRoles.part),\n            disabled: !table.hasSelectedRecords,\n            onClick: () => {\n              setCategory.open();\n            }\n          },\n          {\n            name: t`Order Parts`,\n            icon: <IconShoppingCart color='blue' />,\n            tooltip: t`Order selected parts`,\n            hidden: !user.hasAddRole(UserRoles.purchase_order),\n            onClick: () => {\n              orderPartsWizard.openWizard();\n            }\n          }\n        ]}\n      />,\n      <ActionDropdown\n        key='add-parts-actions'\n        tooltip={t`Add Parts`}\n        position='bottom-start'\n        icon={<IconPlus />}\n        hidden={!user.hasAddRole(UserRoles.part)}\n        actions={[\n          {\n            name: t`Create Part`,\n            icon: <IconPlus />,\n            tooltip: t`Create a new part`,\n            onClick: () => newPart.open()\n          },\n          {\n            name: t`Import from File`,\n            icon: <IconFileUpload />,\n            tooltip: t`Import parts from a file`,\n            onClick: () => importParts.open(),\n            hidden: !enableImport\n          },\n          {\n            name: t`Import from Supplier`,\n            icon: <IconPackageImport />,\n            tooltip: t`Import parts from a supplier plugin`,\n            hidden: !enableImport || supplierPlugins.length === 0,\n            onClick: () => importPartWizard.openWizard()\n          }\n        ]}\n      />\n    ];\n  }, [user, enableImport, table.hasSelectedRecords, supplierPlugins]);\n\n  return (\n    <>\n      {newPart.modal}\n      {duplicatePart.modal}\n      {editPart.modal}\n      {setCategory.modal}\n      {importParts.modal}\n      {orderPartsWizard.wizard}\n      {importPartWizard.wizard}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.part_list)}\n        tableState={table}\n        columns={tableColumns}\n        props={{\n          ...props,\n          enableDownload: true,\n          modelType: ModelType.part,\n          tableFilters: tableFilters,\n          tableActions: tableActions,\n          rowActions: rowActions,\n          enableSelection: true,\n          enableReports: true,\n          enableLabels: true,\n          params: {\n            ...props?.params,\n            category_detail: true,\n            location_detail: true\n          }\n        }}\n      />\n      <ImporterDrawer\n        sessionId={selectedSession ?? -1}\n        opened={selectedSession != undefined && importOpened}\n        onClose={() => {\n          setSelectedSession(undefined);\n          setImportOpened(false);\n          table.refreshTable();\n        }}\n      />\n    </>\n  );\n}\n"],"names":["partTableColumns","PartColumn","part","accessor","sortable","DescriptionColumn","CategoryColumn","DefaultLocationColumn","render","record","extra","stock","total_in_stock","allocated","allocated_to_build_orders","allocated_to_sales_orders","available","Math","max","min_stock","minimum_stock","text","String","formatDecimal","color","push","jsx","Text","_i18n","_","id","ordering","building","external_stock","TableHoverCard","jsxs","Group","units","title","defaultVisible","formatPriceRange","pricing_min","pricing_max","LinkColumn","partTableFilters","name","label","description","type","choices","value","PartListTable","enableImport","basePartInstance","props","defaultPartData","tableColumns","useMemo","tableFilters","table","useTable","user","useUserState","globalSettings","useGlobalSettingsState","importOpened","setImportOpened","useState","selectedSession","setSelectedSession","undefined","importSessionFields","fields","dataImporterSessionFields","modelType","ModelType","field_defaults","params","importParts","useCreateApiFormModal","url","ApiEndpoints","import_session_list","onFormSuccess","response","pk","initialPartData","newPartFields","usePartFields","create","duplicatePartInstance","newPart","part_list","initialData","follow","selectedPart","setSelectedPart","editPart","useEditApiFormModal","refreshTable","createPartFields","duplicatePartFields","duplicate","children","hidden","copy_image","copy_bom","assembly","isSet","copy_notes","copy_parameters","copy_tests","testable","duplicatePart","active","locked","setCategory","useBulkEditApiFormModal","items","selectedIds","category","orderPartsWizard","OrderPartsWizard","parts","selectedRecords","supplierPlugins","usePluginsWithMixin","importPartWizard","ImportPartWizard","categoryId","rowActions","useCallback","can_edit","hasChangePermission","can_add","hasAddPermission","RowEditAction","onClick","open","RowDuplicateAction","tableActions","ActionDropdown","InvenTreeIcon","hasSelectedRecords","icon","tooltip","hasChangeRole","UserRoles","disabled","IconShoppingCart","hasAddRole","purchase_order","openWizard","IconPlus","IconFileUpload","IconPackageImport","length","Fragment","modal","wizard","InvenTreeTable","apiUrl","enableDownload","enableSelection","enableReports","enableLabels","category_detail","location_detail","ImporterDrawer"],"mappings":"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"}