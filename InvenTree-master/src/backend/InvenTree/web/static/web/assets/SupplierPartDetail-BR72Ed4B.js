import{ag as M,ao as o,r as l,j as t,b4 as n,bb as i,ab as a,by as f,an as N,b1 as s,S as F,aD as w}from"./index-Db7AGPIq.js";import{b as R,c as T,a as U,f as y}from"./Filter-BgnAqEQC.js";import{A as K}from"./AdminButton-BR7cWvGK.js";import{I as $,D as d,a as q}from"./InstanceDetail-CF-uHhEW.js";import{D as m}from"./DetailsBadge-rxZ_XzUd.js";import{D as Q,A as X,N as z}from"./NotesPanel-BpiQDImp.js";import{B,O,b as Y,E as G,D as W}from"./InvenTreeTable-DmN557zY.js";import{P as J}from"./PageDetail-Bm50kpyR.js";import{P as Z}from"./PanelGroup-Bif3iIGQ.js";import{P as L}from"./ParametersPanel-CrcKbDM0.js";import{u as V}from"./CompanyForms-CIJgkbDe.js";import{u as H}from"./UseInstance-BPJQEWDW.js";import{P as ee}from"./PurchaseOrderTable-D3f1t8t_.js";import{S as ae}from"./SupplierPriceBreakTable-CGDnETRm.js";import{S as te}from"./StockItemTable-CHHhSxX_.js";import{E as re,a as ie,r as pe,G as se,F as oe,M as le}from"./ThemeContext-CxdCkKtz.js";import"./DesktopAppView-BuH2j218.js";import"./ActionButton-Cv5j5I5R.js";import"./index-DRtKJP-e.js";import"./YesNoButton-BaVgP5u9.js";import"./formatters-B4ehJgEk.js";import"./ModelType-DSs66IM7.js";import"./GenericErrorPage-D-1fKCA7.js";import"./NotFound-CsJ_VLc_.js";import"./PermissionDenied-BDbEipg4.js";import"./use-hover-Cq0v4QX_.js";import"./index-Chjiymov.js";import"./AttachmentLink-D_UWVUZG.js";import"./IconChevronDown-CzbIU38Y.js";import"./QRCode-BaIEIQ2d.js";import"./browser-DSycY7kT.js";import"./IconDotsVertical-D8D3XsjG.js";import"./IconTags-DnGx22aA.js";import"./PageTitle-B4iaHXKM.js";import"./PluginUIFeature-DCu8wTdG.js";import"./RemoteComponent-uZoHDwds.js";import"./ParameterTable-CGnscd1r.js";import"./ImporterForms-D2fp0CPO.js";import"./IconCircleDashedCheck-DnGBn8Eq.js";import"./CommonForms-DKQecQmS.js";import"./IconUsers-Dr_Sln9A.js";import"./ColumnRenderers-BUH0stTX.js";import"./IconAt-rYwKGkPn.js";import"./OrderPartsWizard-BcMgRjfh.js";import"./IconAddressBook-CdNRMeyy.js";import"./UseStockAdjustActions-BrgagWbF.js";function aa(){const{id:g}=re(),p=M(),x=ie(),{instance:e,instanceQuery:c,refreshInstance:_}=H({endpoint:o.supplier_part_list,pk:g,hasPrimaryKey:!0,params:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0}}),P=l.useMemo(()=>{if(c.isFetching)return t.jsx(n,{});const r=e??{};r.manufacturer=r.manufacturer_detail?.pk,r.MPN=r.manufacturer_part_detail?.MPN,r.manufacturer_part=r.manufacturer_part_detail?.pk;const E=[{type:"link",name:"part",label:a._({id:"GNd5ad"}),model:i.part,hidden:!e.part},{type:"string",name:"part_detail.IPN",label:a._({id:"3wXEsN"}),copy:!0,hidden:!r.part_detail?.IPN,icon:"serial"},{type:"string",name:"part_detail.description",label:a._({id:"5ZWiLz"}),copy:!0,icon:"info",hidden:!r.part_detail?.description},{type:"link",external:!0,name:"link",label:a._({id:"0R4wMK"}),copy:!0,hidden:!e.link},{type:"string",name:"note",label:a._({id:"KiJn9B"}),copy:!0,hidden:!e.note}],A=[{type:"link",name:"supplier",label:a._({id:"PYTEl0"}),model:i.company,icon:"suppliers",hidden:!e.supplier},{type:"string",name:"SKU",label:a._({id:"y90mqQ"}),copy:!0,icon:"reference"},{type:"string",name:"description",label:a._({id:"Nu4oKW"}),copy:!0,hidden:!r.description},{type:"link",name:"manufacturer",label:a._({id:"+m9/3S"}),model:i.company,icon:"manufacturers",hidden:!r.manufacturer},{type:"link",name:"manufacturer_part",model_field:"MPN",label:a._({id:"bisS0I"}),model:i.manufacturerpart,icon:"reference",hidden:!r.manufacturer_part}],v=[{type:"string",name:"packaging",label:a._({id:"pD/Ew0"}),copy:!0,hidden:!r.packaging},{type:"string",name:"pack_quantity",label:a._({id:"J9LTXQ"}),copy:!0,hidden:!r.pack_quantity,icon:"packages"}],C=[{type:"number",name:"in_stock",label:a._({id:"zn38D/"}),copy:!0,icon:"stock"},{type:"number",name:"on_order",label:a._({id:"0lg3zX"}),copy:!0,icon:"purchase_orders"},{type:"number",name:"available",label:a._({id:"WrzEdW"}),hidden:!r.availability_updated,copy:!0,icon:"packages"},{type:"date",name:"availability_updated",label:a._({id:"Qeo1xd"}),copy:!0,hidden:!r.availability_updated,icon:"calendar"}];return t.jsxs($,{children:[t.jsxs(f,{grow:!0,children:[t.jsx(Q,{appRole:s.part,src:e?.part_detail?.image,apiPath:N(o.part_list,e?.part_detail?.pk),pk:e?.part_detail?.pk}),t.jsx(f.Col,{span:8,children:t.jsx(d,{title:a._({id:"sQRZ1+"}),fields:E,item:r})})]}),t.jsx(d,{title:a._({id:"PYTEl0"}),fields:A,item:r}),t.jsx(d,{title:a._({id:"pD/Ew0"}),fields:v,item:r}),t.jsx(d,{title:a._({id:"lXkUEV"}),fields:C,item:r})]})},[e,c.isFetching]),j=l.useMemo(()=>[{name:"details",label:a._({id:"F+J5VC"}),icon:t.jsx(pe,{}),content:P},{name:"stock",label:a._({id:"b447qM"}),icon:t.jsx(se,{}),content:e?.pk?t.jsx(te,{tableName:"supplier-stock",allowAdd:!1,params:{supplier_part:e.pk}}):t.jsx(n,{})},{name:"purchaseorders",label:a._({id:"85Yvr2"}),icon:t.jsx(oe,{}),content:e?.pk?t.jsx(ee,{supplierId:e.supplier,supplierPartId:e.pk}):t.jsx(n,{})},{name:"pricing",label:a._({id:"OQkyYP"}),icon:t.jsx(le,{}),content:e?.pk?t.jsx(ae,{supplierPart:e}):t.jsx(n,{})},L({model_type:i.supplierpart,model_id:e?.pk}),X({model_type:i.supplierpart,model_id:e?.pk}),z({model_type:i.supplierpart,model_id:e?.pk})],[e]),D=l.useMemo(()=>[t.jsx(K,{model:i.supplierpart,id:e.pk}),t.jsx(B,{model:i.supplierpart,pk:e.pk,hash:e.barcode_hash,perm:p.hasChangeRole(s.purchase_order)}),t.jsx(O,{tooltip:a._({id:"XIY/fv"}),actions:[Y({hidden:!p.hasAddRole(s.purchase_order),onClick:()=>h.open()}),G({hidden:!p.hasChangeRole(s.purchase_order),onClick:()=>u.open()}),W({hidden:!p.hasDeleteRole(s.purchase_order),onClick:()=>k.open()})]})],[p,e]),b=V({}),u=R({url:o.supplier_part_list,pk:e?.pk,title:a._({id:"qZstuw"}),fields:b,onFormSuccess:_}),k=T({url:o.supplier_part_list,pk:e?.pk,title:a._({id:"9Qoago"}),onFormSuccess:()=>{x(w(i.part,e.part))}}),h=U({url:o.supplier_part_list,title:a._({id:"EREF+D"}),fields:b,initialData:{...e},follow:!0,modelType:i.supplierpart}),I=l.useMemo(()=>[{name:a._({id:"UOTpFa"}),url:"/purchasing/"},{name:e?.supplier_detail?.name??a._({id:"PYTEl0"}),url:`/purchasing/supplier/${e?.supplier_detail?.pk??""}`}],[e]),S=l.useMemo(()=>[t.jsx(m,{label:a._({id:"NoNwIX"}),color:"red",visible:e.active==!1}),t.jsx(m,{label:`${a._({id:"zn38D/"})}: ${y(e.in_stock)}`,color:"green",visible:e?.active&&e?.in_stock&&e?.in_stock>0},"in_stock"),t.jsx(m,{label:a._({id:"COcNhC"}),color:"red",visible:e.active&&e.in_stock==0},"no_stock"),t.jsx(m,{label:`${a._({id:"0lg3zX"})}: ${y(e.on_order)}`,color:"blue",visible:e.on_order>0},"on_order")],[e]);return t.jsxs(t.Fragment,{children:[k.modal,h.modal,u.modal,t.jsx(q,{query:c,requiredRole:s.purchase_order,children:t.jsxs(F,{gap:"xs",children:[t.jsx(J,{title:a._({id:"nne72x"}),subtitle:`${e.SKU} - ${e?.part_detail?.name}`,breadcrumbs:I,lastCrumb:[{name:e.SKU,url:`/purchasing/supplier-part/${e.pk}/`}],badges:S,actions:D,imageUrl:e?.part_detail?.thumbnail,editAction:u.open,editEnabled:p.hasChangePermission(i.supplierpart)}),t.jsx(Z,{pageKey:"supplierpart",panels:j,instance:e,reloadInstance:_,model:i.supplierpart,id:e.pk})]})})]})}export{aa as default};
//# sourceMappingURL=SupplierPartDetail-BR72Ed4B.js.map
