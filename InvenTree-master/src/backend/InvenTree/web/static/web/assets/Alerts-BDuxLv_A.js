import{ab as o,j as s,aq as x,S as _,N as f,a8 as u,a7 as h,ag as p,ah as S,a as j,az as k,r as d,b3 as c,aa as E,ac as I}from"./index-Db7AGPIq.js";import{d as b}from"./links-PrAtDKSR.js";function w(){const e=p(),[n]=S(j(i=>[i.server])),a=k(),[r,l]=d.useState([]),t=d.useMemo(()=>N(n,a).filter(i=>!r.includes(i.key)),[n,r,a]),g=d.useMemo(()=>t.some(i=>i.error),[t]);function m(i){l([...r,i])}return e.isStaff()&&t.length>0?s.jsxs(c,{withinPortal:!0,position:"bottom-end",children:[s.jsx(c.Target,{children:s.jsx(E,{position:"bottom-end",label:o._({id:"s4BX3A"}),children:s.jsx(I,{variant:"transparent","aria-label":"open-alerts",color:g?"red":"orange",children:s.jsx(u,{})})})}),s.jsx(c.Dropdown,{children:t.map(i=>s.jsx(c.Item,{children:s.jsx(A,{alert:i,closeAlert:m})},`alert-item-${i.key}`))})]}):null}function A({alert:e,closeAlert:n}){return s.jsx(x,{withCloseButton:!!n,color:e.condition?e.error?"red":"orange":"green",icon:e.condition?s.jsx(u,{}):s.jsx(h,{}),title:s.jsxs(f,{gap:"xs",children:[e.code&&`${e.code}: `,e.title]}),onClose:n?()=>n(e.key):void 0,children:s.jsxs(_,{gap:"xs",children:[!e.condition&&o._({id:"eUQA5e"}),e.condition&&e.message,e.condition&&e.code&&R(e.code)]})})}function N(e,n,a=!1){const r=Number.parseInt(n.getSetting("_PENDING_MIGRATIONS"))??0;return[{key:"debug",title:o._({id:"gri3Lv"}),code:"INVE-W4",message:o._({id:"+6qJ+8"}),condition:e?.debug_mode||!1},{key:"worker",title:o._({id:"/XqPnF"}),code:"INVE-W5",message:o._({id:"Kz2rIR"}),condition:!e?.worker_running},{key:"restart",title:o._({id:"Bb2P0T"}),code:"INVE-W6",message:o._({id:"ewxV3O"}),condition:n.isSet("SERVER_RESTART_REQUIRED")},{key:"email",title:o._({id:"K4BV4V"}),code:"INVE-W7",message:o._({id:"gGrqca"}),condition:!e?.email_configured},{key:"migrations",title:o._({id:"2uXaRL"}),code:"INVE-W8",message:o._({id:"5aV8JX"}),condition:r>0}].filter(t=>a||t.condition)}function R(e){return s.jsx("a",{href:`${b.errorcodes}#${e.toLowerCase()}`,target:"_blank",rel:"noreferrer",children:o._({id:"XTZa21",values:{code:e}})})}export{w as A,A as S,R as e,N as g};
//# sourceMappingURL=Alerts-BDuxLv_A.js.map
