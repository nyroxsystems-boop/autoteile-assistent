{"version":3,"file":"BuildLineTable-BpYYPAMV.js","sources":["../../../../../../frontend/node_modules/@tabler/icons-react/dist/esm/icons/IconWand.mjs","../../../../../../frontend/src/tables/part/PartTestResultTable.tsx","../../../../../../frontend/src/tables/build/BuildLineTable.tsx"],"sourcesContent":["/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M6 21l15 -15l-3 -3l-15 15l3 3\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M15 6l3 3\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\", \"key\": \"svg-3\" }]];\nconst IconWand = createReactComponent(\"outline\", \"wand\", \"Wand\", __iconNode);\n\nexport { __iconNode, IconWand as default };\n//# sourceMappingURL=IconWand.mjs.map\n","import { t } from '@lingui/core/macro';\nimport { ActionIcon, Badge, Group, Text, Tooltip } from '@mantine/core';\nimport { IconCirclePlus } from '@tabler/icons-react';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  type ReactNode,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState\n} from 'react';\n\nimport { PassFailButton } from '@lib/components/YesNoButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { apiUrl } from '@lib/functions/Api';\nimport { cancelEvent } from '@lib/functions/Events';\nimport { AddItemButton } from '@lib/index';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { ApiFormFieldSet } from '@lib/types/Forms';\nimport type { TableColumn } from '@lib/types/Tables';\nimport type { UseFormReturn } from 'react-hook-form';\nimport { RenderUser } from '../../components/render/User';\nimport { useApi } from '../../contexts/ApiContext';\nimport { formatDate } from '../../defaults/formatters';\nimport { useTestResultFields } from '../../forms/StockForms';\nimport { useCreateApiFormModal } from '../../hooks/UseForm';\nimport { useTable } from '../../hooks/UseTable';\nimport { LocationColumn, PartColumn } from '../ColumnRenderers';\nimport {\n  BatchFilter,\n  HasBatchCodeFilter,\n  InStockFilter,\n  IsSerializedFilter,\n  SerialFilter,\n  SerialGTEFilter,\n  SerialLTEFilter,\n  StatusFilterOptions\n} from '../Filter';\nimport { InvenTreeTable } from '../InvenTreeTable';\nimport { TableHoverCard } from '../TableHoverCard';\n\n/**\n * A table which displays all \"test results\" for the outputs generated by a build order.\n */\nexport default function PartTestResultTable({\n  buildId,\n  partId\n}: Readonly<{\n  buildId?: number;\n  partId: number;\n}>) {\n  const tableName = useMemo(() => {\n    if (buildId) {\n      return 'build-test-results';\n    } else {\n      return 'part-test-results';\n    }\n  }, [buildId]);\n\n  const table = useTable(tableName);\n  const api = useApi();\n\n  // Fetch the test templates required for this build order\n  const { data: testTemplates } = useQuery({\n    queryKey: ['build-test-templates', partId, buildId],\n    queryFn: async () => {\n      if (!partId) {\n        return [];\n      }\n\n      return api\n        .get(apiUrl(ApiEndpoints.part_test_template_list), {\n          params: {\n            part: partId,\n            include_inherited: true,\n            enabled: true,\n            required: true\n          }\n        })\n        .then((res) => res.data);\n    }\n  });\n\n  // Reload the table data whenever the set of templates changes\n  useEffect(() => {\n    table.refreshTable();\n  }, [testTemplates]);\n\n  const [selectedOutput, setSelectedOutput] = useState<number>(0);\n  const [selectedTemplate, setSelectedTemplate] = useState<number | undefined>(\n    undefined\n  );\n\n  const testResultFields: ApiFormFieldSet = useTestResultFields({\n    partId: partId,\n    itemId: selectedOutput,\n    templateId: selectedTemplate\n  });\n\n  const createTestResult = useCreateApiFormModal({\n    url: apiUrl(ApiEndpoints.stock_test_result_list),\n    title: t`Add Test Result`,\n    fields: testResultFields,\n    initialData: {\n      template: selectedTemplate,\n      result: true\n    },\n    onFormSuccess: () => table.refreshTable(),\n    successMessage: t`Test result added`\n  });\n\n  const multipleTestResultFields: ApiFormFieldSet = useMemo(() => {\n    const fields: ApiFormFieldSet = { ...testResultFields };\n\n    // Do not allow attachment for multiple test results\n    delete fields.attachment;\n    delete fields.stock_item;\n\n    fields.template.disabled = false;\n\n    return fields;\n  }, [partId, testResultFields]);\n\n  const generateTestResults = useCallback(\n    (data: any, form: UseFormReturn) => {\n      // Generate a list of test results for each selected output\n      const results = table.selectedRecords.map((record: any) => {\n        return {\n          ...data,\n          stock_item: record.pk\n        };\n      });\n\n      return results;\n    },\n    [table.selectedIds]\n  );\n\n  const createTestResultMultiple = useCreateApiFormModal({\n    url: apiUrl(ApiEndpoints.stock_test_result_list),\n    title: t`Add Test Results`,\n    fields: multipleTestResultFields,\n    initialData: {\n      result: true\n    },\n    onFormSuccess: () => {\n      table.clearSelectedRecords();\n      table.refreshTable();\n    },\n    processFormData: generateTestResults,\n    successMessage: t`Test results added`\n  });\n\n  // Generate a table column for each test template\n  const testColumns: TableColumn[] = useMemo(() => {\n    if (!testTemplates || testTemplates.length == 0) {\n      return [];\n    }\n\n    return testTemplates.map((template: any) => {\n      return {\n        accessor: `test_${template.pk}`,\n        title: template.test_name,\n        sortable: false,\n        switchable: true,\n        render: (record: any) => {\n          const tests = record.tests || [];\n\n          // Find the most recent test result (highest primary key)\n          const test = tests\n            .filter((test: any) => test.template == template.pk)\n            .sort((a: any, b: any) => b.pk - a.pk)\n            .shift();\n\n          // No test result recorded\n          if (!test || test.result === undefined) {\n            return (\n              <Group gap='xs' wrap='nowrap' justify='space-between'>\n                <Badge color='lightblue' variant='filled'>{t`No Result`}</Badge>\n                <Tooltip label={t`Add Test Result`}>\n                  <ActionIcon\n                    size='lg'\n                    color='green'\n                    aria-label='add-test-result'\n                    variant='transparent'\n                    onClick={(event: any) => {\n                      cancelEvent(event);\n                      setSelectedOutput(record.pk);\n                      setSelectedTemplate(template.pk);\n                      createTestResult.open();\n                    }}\n                  >\n                    <IconCirclePlus />\n                  </ActionIcon>\n                </Tooltip>\n              </Group>\n            );\n          }\n\n          const extra: ReactNode[] = [];\n\n          if (test.value) {\n            extra.push(\n              <Text key='value' size='sm'>\n                {t`Value`}: {test.value}\n              </Text>\n            );\n          }\n\n          if (test.notes) {\n            extra.push(\n              <Text key='notes' size='sm'>\n                {t`Notes`}: {test.notes}\n              </Text>\n            );\n          }\n\n          if (test.date) {\n            extra.push(\n              <Text key='date' size='sm'>\n                {t`Date`}: {formatDate(test.date)}\n              </Text>\n            );\n          }\n\n          if (test.user_detail) {\n            extra.push(<RenderUser key='user' instance={test.user_detail} />);\n          }\n\n          return (\n            <TableHoverCard\n              value={<PassFailButton value={test.result} />}\n              title={template.test_name}\n              extra={extra}\n            />\n          );\n        }\n      };\n    });\n  }, [testTemplates]);\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    // Fixed columns\n    const columns: TableColumn[] = [\n      PartColumn({\n        title: t`Part`,\n        part: 'part_detail',\n        full_name: true,\n        ordering: 'part',\n        sortable: true,\n        switchable: true\n      }),\n      {\n        accessor: 'stock',\n        title: t`Stock Item`,\n        sortable: true,\n        switchable: false,\n        render: (record: any) => {\n          if (record.serial) {\n            return `# ${record.serial}`;\n          } else {\n            const extra: ReactNode[] = [];\n\n            if (record.batch) {\n              extra.push(\n                <Text key='batch' size='sm'>\n                  {t`Batch Code`}: {record.batch}\n                </Text>\n              );\n            }\n\n            return (\n              <TableHoverCard\n                value={\n                  <Text>\n                    {t`Quantity`}: {record.quantity}\n                  </Text>\n                }\n                title={t`Build Output`}\n                extra={extra}\n              />\n            );\n          }\n        }\n      },\n      {\n        accessor: 'batch',\n        title: t`Batch Code`,\n        sortable: true,\n        switchable: true\n      },\n      LocationColumn({\n        accessor: 'location_detail'\n      })\n    ];\n\n    return [...columns, ...testColumns];\n  }, [testColumns]);\n\n  const tableFilters: TableFilter[] = useMemo(() => {\n    return [\n      {\n        name: 'is_building',\n        label: t`In Production`,\n        description: t`Show build outputs currently in production`\n      },\n      InStockFilter(),\n      SerialFilter(),\n      SerialGTEFilter(),\n      SerialLTEFilter(),\n      HasBatchCodeFilter(),\n      BatchFilter(),\n      IsSerializedFilter(),\n      {\n        name: 'status',\n        label: t`Status`,\n        description: t`Filter by stock status`,\n        choiceFunction: StatusFilterOptions(ModelType.stockitem)\n      }\n    ];\n  }, []);\n\n  const tableActions = useMemo(() => {\n    return [\n      <AddItemButton\n        key='add-test-result'\n        tooltip={t`Add Test Result`}\n        disabled={!table.hasSelectedRecords}\n        onClick={(event: any) => {\n          createTestResultMultiple.open();\n        }}\n      />\n    ];\n  }, [table.hasSelectedRecords]);\n\n  const rowActions = useCallback((record: any) => {\n    return [\n      {\n        icon: <IconCirclePlus />,\n        color: 'green',\n        title: t`Add Test Result`,\n        onClick: (event: any) => {\n          setSelectedOutput(record.pk);\n          setSelectedTemplate(undefined);\n          createTestResult.open();\n        }\n      }\n    ];\n  }, []);\n\n  return (\n    <>\n      {createTestResult.modal}\n      {createTestResultMultiple.modal}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.stock_item_list)}\n        tableState={table}\n        columns={tableColumns}\n        props={{\n          params: {\n            part_detail: true,\n            location_detail: true,\n            tests: true,\n            part: partId,\n            build: buildId\n          },\n          enableSelection: true,\n          rowActions: rowActions,\n          tableFilters: tableFilters,\n          tableActions: tableActions,\n          modelType: ModelType.stockitem\n        }}\n      />\n    </>\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Alert, Group, Paper, Text } from '@mantine/core';\nimport {\n  IconArrowRight,\n  IconCircleCheck,\n  IconCircleDashedCheck,\n  IconCircleMinus,\n  IconCircleX,\n  IconShoppingCart,\n  IconTool,\n  IconWand\n} from '@tabler/icons-react';\nimport type { DataTableRowExpansionProps } from 'mantine-datatable';\nimport { useCallback, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { ActionButton } from '@lib/components/ActionButton';\nimport { ProgressBar } from '@lib/components/ProgressBar';\nimport { RowEditAction, RowViewAction } from '@lib/components/RowActions';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport { formatDecimal } from '@lib/functions/Formatting';\nimport type { TableFilter } from '@lib/types/Filters';\nimport type { RowAction, TableColumn } from '@lib/types/Tables';\nimport OrderPartsWizard from '../../components/wizards/OrderPartsWizard';\nimport {\n  useAllocateStockToBuildForm,\n  useBuildOrderFields,\n  useConsumeBuildLinesForm\n} from '../../forms/BuildForms';\nimport {\n  useCreateApiFormModal,\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport useStatusCodes from '../../hooks/UseStatusCodes';\nimport { useTable } from '../../hooks/UseTable';\nimport { useUserState } from '../../states/UserState';\nimport {\n  BooleanColumn,\n  CategoryColumn,\n  DecimalColumn,\n  DescriptionColumn,\n  LocationColumn,\n  PartColumn,\n  RenderPartColumn\n} from '../ColumnRenderers';\nimport { PartCategoryFilter } from '../Filter';\nimport { InvenTreeTable } from '../InvenTreeTable';\nimport RowExpansionIcon from '../RowExpansionIcon';\nimport { TableHoverCard } from '../TableHoverCard';\n\n/**\n * Render a sub-table of allocated stock against a particular build line.\n *\n * - Renders a simplified table of stock allocated against the build line\n * - Provides \"edit\" and \"delete\" actions for each allocation\n *\n * Note: We expect that the \"lineItem\" object contains an allocations[] list\n */\nexport function BuildLineSubTable({\n  lineItem,\n  onEditAllocation,\n  onDeleteAllocation\n}: Readonly<{\n  lineItem: any;\n  onEditAllocation?: (pk: number) => void;\n  onDeleteAllocation?: (pk: number) => void;\n}>) {\n  const user = useUserState();\n  const navigate = useNavigate();\n  const table = useTable('buildline-subtable');\n\n  const tableColumns: any[] = useMemo(() => {\n    return [\n      PartColumn({\n        part: 'part_detail'\n      }),\n      {\n        accessor: 'quantity',\n        title: t`Quantity`,\n        render: (record: any) => {\n          if (!!record.stock_item_detail?.serial) {\n            return `# ${record.stock_item_detail.serial}`;\n          }\n          return record.quantity;\n        }\n      },\n      {\n        accessor: 'stock_item_detail.batch',\n        title: t`Batch`\n      },\n      LocationColumn({\n        accessor: 'location_detail'\n      })\n    ];\n  }, []);\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      return [\n        RowEditAction({\n          hidden: !onEditAllocation || !user.hasChangeRole(UserRoles.build),\n          onClick: () => {\n            onEditAllocation?.(record.pk);\n          }\n        }),\n        {\n          title: t`Remove`,\n          tooltip: t`Remove allocated stock`,\n          icon: <IconCircleX />,\n          color: 'red',\n          hidden: !onDeleteAllocation || !user.hasDeleteRole(UserRoles.build),\n          onClick: () => {\n            onDeleteAllocation?.(record.pk);\n          }\n        },\n        RowViewAction({\n          title: t`View Stock Item`,\n          modelType: ModelType.stockitem,\n          modelId: record.stock_item,\n          navigate: navigate\n        })\n      ];\n    },\n    [user, onEditAllocation, onDeleteAllocation]\n  );\n\n  return (\n    <Paper p='xs'>\n      <InvenTreeTable\n        tableState={table}\n        columns={tableColumns}\n        tableData={lineItem.filteredAllocations ?? lineItem.allocations}\n        props={{\n          minHeight: 200,\n          enableSearch: false,\n          enableRefresh: false,\n          enableColumnSwitching: false,\n          enableFilters: false,\n          rowActions: rowActions,\n          noRecordsText: ''\n        }}\n      />\n    </Paper>\n  );\n}\n\n/**\n * Render a table of build lines for a particular build.\n */\nexport default function BuildLineTable({\n  build,\n  output,\n  params = {}\n}: Readonly<{\n  build: any;\n  output?: any;\n  params?: any;\n}>) {\n  const user = useUserState();\n  const navigate = useNavigate();\n  const buildStatus = useStatusCodes({ modelType: ModelType.build });\n\n  const hasOutput: boolean = useMemo(() => !!output?.pk, [output]);\n\n  const table = useTable(hasOutput ? 'buildline-output' : 'buildline');\n\n  const isActive: boolean = useMemo(() => {\n    return (\n      build?.status == buildStatus.PRODUCTION ||\n      build?.status == buildStatus.PENDING ||\n      build?.status == buildStatus.ON_HOLD\n    );\n  }, [build, buildStatus]);\n\n  const tableFilters: TableFilter[] = useMemo(() => {\n    return [\n      {\n        name: 'allocated',\n        label: t`Allocated`,\n        description: t`Show fully allocated lines`\n      },\n      {\n        name: 'consumed',\n        label: t`Consumed`,\n        description: t`Show fully consumed lines`\n      },\n      {\n        name: 'available',\n        label: t`Available`,\n        description: t`Show items with sufficient available stock`\n      },\n      {\n        name: 'consumable',\n        label: t`Consumable`,\n        description: t`Show consumable lines`\n      },\n      {\n        name: 'optional',\n        label: t`Optional`,\n        description: t`Show optional lines`\n      },\n      {\n        name: 'assembly',\n        label: t`Assembly`,\n        description: t`Show assembled items`\n      },\n      {\n        name: 'testable',\n        label: t`Testable`,\n        description: t`Show testable items`\n      },\n      {\n        name: 'tracked',\n        label: t`Tracked`,\n        description: t`Show tracked lines`\n      },\n      {\n        name: 'on_order',\n        label: t`On Order`,\n        description: t`Show items with stock on order`\n      },\n      PartCategoryFilter()\n    ];\n  }, []);\n\n  const renderAvailableColumn = useCallback((record: any) => {\n    const bom_item = record?.bom_item_detail ?? {};\n    const extra: any[] = [];\n    let available = record?.available_stock;\n\n    // Account for substitute stock\n    if (record.available_substitute_stock > 0) {\n      available += record.available_substitute_stock;\n      extra.push(\n        <Text key='substitite' size='sm'>\n          {t`Includes substitute stock`}\n        </Text>\n      );\n    }\n\n    // Account for variant stock\n    if (bom_item.allow_variants && record.available_variant_stock > 0) {\n      available += record.available_variant_stock;\n      extra.push(\n        <Text key='variant' size='sm'>\n          {t`Includes variant stock`}\n        </Text>\n      );\n    }\n\n    // Account for in-production stock\n    if (record.in_production > 0) {\n      extra.push(\n        <Text key='production' size='sm'>\n          {t`In production`}: {formatDecimal(record.in_production)}\n        </Text>\n      );\n    }\n\n    // Account for stock on order\n    if (record.on_order > 0) {\n      extra.push(\n        <Text key='on-order' size='sm'>\n          {t`On order`}: {formatDecimal(record.on_order)}\n        </Text>\n      );\n    }\n\n    // Account for \"external\" stock\n    if (record.external_stock > 0) {\n      extra.push(\n        <Text key='external' size='sm'>\n          {t`External stock`}: {formatDecimal(record.external_stock)}\n        </Text>\n      );\n    }\n\n    const sufficient = available >= record.quantity - record.allocated;\n\n    if (!sufficient) {\n      extra.push(\n        <Text key='insufficient' c='orange' size='sm'>\n          {t`Insufficient stock`}\n        </Text>\n      );\n    }\n\n    return (\n      <TableHoverCard\n        icon={sufficient ? 'info' : 'exclamation'}\n        iconColor={sufficient ? 'blue' : 'orange'}\n        value={\n          available > 0 ? (\n            `${formatDecimal(available)}`\n          ) : (\n            <Text\n              c='red'\n              style={{ fontStyle: 'italic' }}\n            >{t`No stock available`}</Text>\n          )\n        }\n        title={t`Available Stock`}\n        extra={extra}\n      />\n    );\n  }, []);\n\n  const tableColumns: TableColumn[] = useMemo(() => {\n    return [\n      PartColumn({\n        accessor: 'bom_item',\n        part: 'part_detail',\n        ordering: 'part',\n        sortable: true,\n        switchable: false,\n        render: (record: any) => {\n          const hasAllocatedItems = record.allocatedQuantity > 0;\n\n          return (\n            <Group wrap='nowrap'>\n              <RowExpansionIcon\n                enabled={hasAllocatedItems}\n                expanded={table.isRowExpanded(record.pk)}\n              />\n              <RenderPartColumn part={record.part_detail} />\n            </Group>\n          );\n        }\n      }),\n      {\n        accessor: 'part_detail.IPN',\n        sortable: false,\n        title: t`IPN`\n      },\n      CategoryColumn({\n        accessor: 'category_detail',\n        defaultVisible: false,\n        switchable: true,\n        sortable: true,\n        ordering: 'category'\n      }),\n      DescriptionColumn({\n        accessor: 'part_detail.description'\n      }),\n      {\n        accessor: 'bom_item_detail.reference',\n        ordering: 'reference',\n        sortable: true,\n        title: t`Reference`\n      },\n      BooleanColumn({\n        accessor: 'bom_item_detail.optional',\n        ordering: 'optional',\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      BooleanColumn({\n        accessor: 'bom_item_detail.consumable',\n        ordering: 'consumable',\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      BooleanColumn({\n        accessor: 'bom_item_detail.allow_variants',\n        ordering: 'allow_variants',\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      BooleanColumn({\n        accessor: 'bom_item_detail.inherited',\n        ordering: 'inherited',\n        title: t`Gets Inherited`,\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      BooleanColumn({\n        accessor: 'part_detail.trackable',\n        ordering: 'trackable',\n        hidden: hasOutput,\n        defaultVisible: false\n      }),\n      {\n        accessor: 'bom_item_detail.quantity',\n        sortable: true,\n        title: t`Unit Quantity`,\n        defaultVisible: false,\n        ordering: 'unit_quantity',\n        render: (record: any) => {\n          return (\n            <Group justify='space-between' wrap='nowrap'>\n              <Text>{record.bom_item_detail?.quantity}</Text>\n              {record?.part_detail?.units && (\n                <Text size='xs'>[{record.part_detail.units}]</Text>\n              )}\n            </Group>\n          );\n        }\n      },\n      {\n        accessor: 'quantity',\n        title: t`Required Quantity`,\n        sortable: true,\n        defaultVisible: false,\n        switchable: false,\n        render: (record: any) => {\n          // Include information about the BOM item (if available)\n          const extra: any[] = [];\n\n          if (record?.bom_item_detail?.setup_quantity) {\n            extra.push(\n              <Text key='setup-quantity' size='sm'>\n                {t`Setup Quantity`}:{' '}\n                {formatDecimal(record.bom_item_detail.setup_quantity)}\n              </Text>\n            );\n          }\n\n          if (record?.bom_item_detail?.attrition) {\n            extra.push(\n              <Text key='attrition' size='sm'>\n                {t`Attrition`}: {record.bom_item_detail.attrition}%\n              </Text>\n            );\n          }\n\n          if (record?.bom_item_detail?.rounding_multiple) {\n            extra.push(\n              <Text key='rounding-multiple' size='sm'>\n                {t`Rounding Multiple`}:{' '}\n                {record.bom_item_detail.rounding_multiple}\n              </Text>\n            );\n          }\n\n          // If a build output is specified, use the provided quantity\n          return (\n            <TableHoverCard\n              title={t`BOM Information`}\n              extra={extra}\n              value={\n                <Group justify='space-between' wrap='nowrap'>\n                  <Text>{formatDecimal(record.requiredQuantity)}</Text>\n                  {record?.part_detail?.units && (\n                    <Text size='xs'>[{record.part_detail.units}]</Text>\n                  )}\n                </Group>\n              }\n            />\n          );\n        }\n      },\n      {\n        accessor: 'available_stock',\n        sortable: true,\n        switchable: false,\n        render: renderAvailableColumn\n      },\n      {\n        accessor: 'in_production',\n        sortable: true,\n        ordering: 'scheduled_to_build',\n        render: (record: any) => {\n          if (record.scheduled_to_build > 0) {\n            return (\n              <ProgressBar\n                progressLabel={true}\n                value={record.in_production}\n                maximum={record.scheduled_to_build}\n              />\n            );\n          } else {\n            return record.part_detail?.is_assembly ? 0 : '-';\n          }\n        }\n      },\n      DecimalColumn({\n        accessor: 'on_order',\n        defaultVisible: false,\n        sortable: true\n      }),\n      {\n        accessor: 'allocated',\n        switchable: false,\n        sortable: true,\n        hidden: !isActive,\n        minWidth: 125,\n        render: (record: any) => {\n          if (record?.bom_item_detail?.consumable) {\n            return (\n              <Text\n                size='sm'\n                style={{ fontStyle: 'italic' }}\n              >{t`Consumable item`}</Text>\n            );\n          }\n\n          const allocated = record.allocatedQuantity ?? 0;\n          let required = Math.max(0, record.quantity - record.consumed);\n\n          if (output?.pk) {\n            // If an output is specified, we show the allocated quantity for that output\n            required = record.bom_item_detail?.quantity;\n          }\n\n          if (allocated <= 0 && required <= 0) {\n            return (\n              <Group gap='xs' wrap='nowrap'>\n                <IconCircleCheck size={16} color='green' />\n                <Text size='sm' style={{ fontStyle: 'italic' }}>\n                  {record.consumed >= record.quantity\n                    ? t`Fully consumed`\n                    : t`Fully allocated`}\n                </Text>\n              </Group>\n            );\n          }\n\n          return (\n            <ProgressBar\n              progressLabel={true}\n              value={allocated}\n              maximum={required}\n            />\n          );\n        }\n      },\n      {\n        accessor: 'consumed',\n        sortable: true,\n        hidden: !!output?.pk,\n        minWidth: 125,\n        render: (record: any) => {\n          return record?.bom_item_detail?.consumable ? (\n            <Text style={{ fontStyle: 'italic' }}>{t`Consumable item`}</Text>\n          ) : (\n            <ProgressBar\n              progressLabel={true}\n              value={record.consumed}\n              maximum={record.requiredQuantity}\n            />\n          );\n        }\n      }\n    ];\n  }, [hasOutput, isActive, table, output]);\n\n  const buildOrderFields = useBuildOrderFields({\n    create: true,\n    modalId: 'new-build-order'\n  });\n\n  const [initialData, setInitialData] = useState<any>({});\n\n  const [selectedLine, setSelectedLine] = useState<number | null>(null);\n\n  const [selectedRows, setSelectedRows] = useState<any[]>([]);\n\n  const newBuildOrder = useCreateApiFormModal({\n    url: ApiEndpoints.build_order_list,\n    title: t`Create Build Order`,\n    fields: buildOrderFields,\n    modalId: 'new-build-order',\n    initialData: initialData,\n    follow: true,\n    modelType: ModelType.build\n  });\n\n  const autoAllocateStock = useCreateApiFormModal({\n    url: ApiEndpoints.build_order_auto_allocate,\n    pk: build.pk,\n    title: t`Allocate Stock`,\n    fields: {\n      location: {\n        filters: {\n          structural: false\n        }\n      },\n      exclude_location: {},\n      interchangeable: {},\n      substitutes: {},\n      optional_items: {}\n    },\n    initialData: {\n      location: build.take_from,\n      interchangeable: true,\n      substitutes: true,\n      optional_items: false\n    },\n    successMessage: t`Auto allocation in progress`,\n    table: table,\n    preFormContent: (\n      <Alert color='green' title={t`Auto Allocate Stock`}>\n        <Text>{t`Automatically allocate stock to this build according to the selected options`}</Text>\n      </Alert>\n    )\n  });\n\n  const allocateStock = useAllocateStockToBuildForm({\n    build: build,\n    output: output,\n    outputId: output?.pk ?? null,\n    buildId: build.pk,\n    lineItems: selectedRows,\n    onFormSuccess: () => {\n      table.clearSelectedRecords();\n      table.refreshTable();\n    }\n  });\n\n  const deallocateStock = useCreateApiFormModal({\n    url: ApiEndpoints.build_order_deallocate,\n    pk: build.pk,\n    title: t`Deallocate Stock`,\n    fields: {\n      build_line: {\n        hidden: true\n      },\n      output: {\n        hidden: true\n      }\n    },\n    initialData: {\n      build_line: selectedLine,\n      output: output?.pk ?? null\n    },\n    preFormContent: (\n      <Alert color='red' title={t`Deallocate Stock`}>\n        {selectedLine == undefined ? (\n          <Text>{t`Deallocate all untracked stock for this build order`}</Text>\n        ) : (\n          <Text>{t`Deallocate stock from the selected line item`}</Text>\n        )}\n      </Alert>\n    ),\n    successMessage: t`Stock has been deallocated`,\n    onFormSuccess: () => {\n      table.clearSelectedRecords();\n      table.refreshTable();\n    }\n  });\n\n  const [selectedAllocation, setSelectedAllocation] = useState<number>(0);\n\n  const editAllocation = useEditApiFormModal({\n    url: ApiEndpoints.build_item_list,\n    pk: selectedAllocation,\n    title: t`Edit Stock Allocation`,\n    fields: {\n      stock_item: {\n        disabled: true\n      },\n      quantity: {}\n    },\n    onFormSuccess: table.refreshTable\n  });\n\n  const deleteAllocation = useDeleteApiFormModal({\n    url: ApiEndpoints.build_item_list,\n    pk: selectedAllocation,\n    title: t`Remove Allocated Stock`,\n    submitText: t`Remove`,\n    onFormSuccess: table.refreshTable,\n    preFormContent: (\n      <Alert color='red' title={t`Confirm Removal`}>\n        {t`Are you sure you want to remove this allocated stock from the order?`}\n      </Alert>\n    )\n  });\n\n  const [partsToOrder, setPartsToOrder] = useState<any[]>([]);\n\n  const orderPartsWizard = OrderPartsWizard({\n    parts: partsToOrder\n  });\n\n  const consumeLines = useConsumeBuildLinesForm({\n    buildId: build.pk,\n    buildLines: selectedRows,\n    onFormSuccess: () => {\n      table.clearSelectedRecords();\n      table.refreshTable();\n    }\n  });\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      const part = record.part_detail ?? {};\n      const in_production = build.status == buildStatus.PRODUCTION;\n      const consumable: boolean = record.bom_item_detail?.consumable ?? false;\n      const trackable: boolean = part?.trackable ?? false;\n\n      const hasOutput: boolean = !!output?.pk;\n\n      const required = Math.max(\n        0,\n        record.quantity - record.consumed - record.allocated\n      );\n\n      // Can consume\n      const canConsume =\n        in_production &&\n        !consumable &&\n        !trackable &&\n        record.allocated > 0 &&\n        user.hasChangeRole(UserRoles.build);\n\n      // Can allocate\n      const canAllocate =\n        in_production &&\n        !consumable &&\n        user.hasChangeRole(UserRoles.build) &&\n        required > 0 &&\n        record.trackable == hasOutput;\n\n      // Can de-allocate\n      const canDeallocate =\n        in_production &&\n        !consumable &&\n        user.hasChangeRole(UserRoles.build) &&\n        record.allocated > 0 &&\n        record.trackable == hasOutput;\n\n      const canOrder =\n        !consumable &&\n        user.hasAddRole(UserRoles.purchase_order) &&\n        part.purchaseable;\n\n      const canBuild =\n        !consumable && user.hasAddRole(UserRoles.build) && part.assembly;\n\n      return [\n        {\n          icon: <IconArrowRight />,\n          title: t`Allocate Stock`,\n          hidden: !canAllocate,\n          color: 'green',\n          onClick: () => {\n            setSelectedRows([record]);\n            allocateStock.open();\n          }\n        },\n        {\n          icon: <IconCircleDashedCheck />,\n          title: t`Consume Stock`,\n          color: 'green',\n          hidden: !canConsume || hasOutput,\n          onClick: () => {\n            setSelectedRows([record]);\n            consumeLines.open();\n          }\n        },\n        {\n          icon: <IconCircleMinus />,\n          title: t`Deallocate Stock`,\n          hidden: !canDeallocate,\n          color: 'red',\n          onClick: () => {\n            setSelectedLine(record.pk);\n            deallocateStock.open();\n          }\n        },\n        {\n          icon: <IconShoppingCart />,\n          title: t`Order Stock`,\n          hidden: !canOrder,\n          color: 'blue',\n          onClick: () => {\n            setPartsToOrder([record.part_detail]);\n            orderPartsWizard.openWizard();\n          }\n        },\n        {\n          icon: <IconTool />,\n          title: t`Build Stock`,\n          hidden: !canBuild,\n          color: 'blue',\n          onClick: () => {\n            setInitialData({\n              part: record.part,\n              parent: build.pk,\n              quantity: record.quantity - record.allocated\n            });\n            newBuildOrder.open();\n          }\n        },\n        RowViewAction({\n          title: t`View Part`,\n          modelType: ModelType.part,\n          modelId: record.part,\n          navigate: navigate\n        })\n      ];\n    },\n    [user, navigate, output, build, buildStatus]\n  );\n\n  const tableActions = useMemo(() => {\n    const production = build.status == buildStatus.PRODUCTION;\n    const canEdit = user.hasChangeRole(UserRoles.build);\n    const visible = production && canEdit;\n    return [\n      <ActionButton\n        key='auto-allocate'\n        icon={<IconWand />}\n        tooltip={t`Auto Allocate Stock`}\n        hidden={!visible || hasOutput}\n        color='blue'\n        onClick={() => {\n          autoAllocateStock.open();\n        }}\n      />,\n      <ActionButton\n        key='order-parts'\n        hidden={!user.hasAddRole(UserRoles.purchase_order)}\n        disabled={!table.hasSelectedRecords}\n        icon={<IconShoppingCart />}\n        color='blue'\n        tooltip={t`Order Parts`}\n        onClick={() => {\n          setPartsToOrder(\n            table.selectedRecords\n              .filter(\n                (r) => r.part_detail?.purchaseable && r.part_detail?.active\n              )\n              .map((r) => r.part_detail)\n          );\n          orderPartsWizard.openWizard();\n        }}\n      />,\n      <ActionButton\n        key='allocate-stock'\n        icon={<IconArrowRight />}\n        tooltip={t`Allocate Stock`}\n        hidden={!visible}\n        disabled={!table.hasSelectedRecords}\n        color='green'\n        onClick={() => {\n          let rows = table.selectedRecords\n            .filter((r) => r.allocatedQuantity < r.requiredQuantity)\n            .filter((r) => !r.bom_item_detail?.consumable);\n\n          if (hasOutput) {\n            rows = rows.filter((r) => r.trackable);\n          } else {\n            rows = rows.filter((r) => !r.trackable);\n          }\n\n          setSelectedRows(rows);\n          allocateStock.open();\n        }}\n      />,\n      <ActionButton\n        key='deallocate-stock'\n        icon={<IconCircleMinus />}\n        tooltip={t`Deallocate Stock`}\n        hidden={!visible || hasOutput}\n        disabled={table.hasSelectedRecords}\n        color='red'\n        onClick={() => {\n          setSelectedLine(null);\n          deallocateStock.open();\n        }}\n      />,\n      <ActionButton\n        key='consume-stock'\n        icon={<IconCircleDashedCheck />}\n        tooltip={t`Consume Stock`}\n        hidden={!visible || hasOutput}\n        disabled={!table.hasSelectedRecords}\n        color='green'\n        onClick={() => {\n          setSelectedRows(table.selectedRecords);\n          consumeLines.open();\n        }}\n      />\n    ];\n  }, [\n    user,\n    build,\n    buildStatus,\n    hasOutput,\n    table.hasSelectedRecords,\n    table.selectedRecords\n  ]);\n\n  /**\n   * Format the records for the table, before rendering\n   *\n   * - Filter the \"allocations\" field to only show allocations for the selected output\n   * - Pre-calculate the \"requiredQuantity\" and \"allocatedQuantity\" fields\n   */\n  const formatRecords = useCallback(\n    (records: any[]): any[] => {\n      return records.map((record) => {\n        let allocations = [...record.allocations];\n\n        // If an output is specified, filter the allocations to only show those for the selected output\n        if (output?.pk) {\n          allocations = allocations.filter((a) => a.install_into == output.pk);\n        }\n\n        let allocatedQuantity = 0;\n        let requiredQuantity = record.quantity;\n\n        // Calculate the total allocated quantity\n        allocations.forEach((a) => {\n          allocatedQuantity += a.quantity;\n        });\n\n        // Calculate the required quantity (based on the build output)\n        if (output?.quantity && record.bom_item_detail) {\n          requiredQuantity = output.quantity * record.bom_item_detail.quantity;\n        }\n\n        return {\n          ...record,\n          filteredAllocations: allocations,\n          requiredQuantity: requiredQuantity,\n          allocatedQuantity: allocatedQuantity\n        };\n      });\n    },\n    [output]\n  );\n\n  // Control row expansion\n  const rowExpansion: DataTableRowExpansionProps<any> = useMemo(() => {\n    return {\n      allowMultiple: true,\n      expandable: ({ record }: { record: any }) => {\n        // Only items with allocated stock can be expanded\n        return table.isRowExpanded(record.pk) || record.allocatedQuantity > 0;\n      },\n      content: ({ record }: { record: any }) => {\n        return (\n          <BuildLineSubTable\n            lineItem={record}\n            onEditAllocation={(pk: number) => {\n              setSelectedAllocation(pk);\n              editAllocation.open();\n            }}\n            onDeleteAllocation={(pk: number) => {\n              setSelectedAllocation(pk);\n              deleteAllocation.open();\n            }}\n          />\n        );\n      }\n    };\n  }, [table.isRowExpanded, output]);\n\n  return (\n    <>\n      {autoAllocateStock.modal}\n      {newBuildOrder.modal}\n      {allocateStock.modal}\n      {deallocateStock.modal}\n      {editAllocation.modal}\n      {deleteAllocation.modal}\n      {consumeLines.modal}\n      {orderPartsWizard.wizard}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.build_line_list)}\n        tableState={table}\n        columns={tableColumns}\n        props={{\n          params: {\n            ...params,\n            build: build.pk,\n            assembly_detail: false,\n            category_detail: true,\n            part_detail: true\n          },\n          tableActions: tableActions,\n          tableFilters: tableFilters,\n          rowActions: rowActions,\n          dataFormatter: formatRecords,\n          enableDownload: true,\n          enableSelection: true,\n          enableLabels: true,\n          modelType: ModelType.buildline,\n          detailAction: false,\n          onCellClick: () => {},\n          rowExpansion: rowExpansion\n        }}\n      />\n    </>\n  );\n}\n"],"names":["__iconNode","IconWand","createReactComponent","PartTestResultTable","buildId","partId","tableName","useMemo","table","useTable","api","useApi","data","testTemplates","useQuery","queryKey","queryFn","get","apiUrl","ApiEndpoints","part_test_template_list","params","part","include_inherited","enabled","required","then","res","useEffect","refreshTable","selectedOutput","setSelectedOutput","useState","selectedTemplate","setSelectedTemplate","undefined","testResultFields","useTestResultFields","itemId","templateId","createTestResult","useCreateApiFormModal","url","stock_test_result_list","title","_i18n","_","id","fields","initialData","template","result","onFormSuccess","successMessage","multipleTestResultFields","attachment","stock_item","disabled","generateTestResults","useCallback","form","selectedRecords","map","record","pk","selectedIds","createTestResultMultiple","clearSelectedRecords","processFormData","testColumns","length","accessor","test_name","sortable","switchable","render","test","tests","filter","sort","a","b","shift","Group","jsx","Badge","Tooltip","ActionIcon","event","cancelEvent","open","IconCirclePlus","extra","value","push","jsxs","Text","notes","date","formatDate","user_detail","RenderUser","TableHoverCard","PassFailButton","tableColumns","PartColumn","full_name","ordering","serial","batch","quantity","LocationColumn","tableFilters","name","label","description","InStockFilter","SerialFilter","SerialGTEFilter","SerialLTEFilter","HasBatchCodeFilter","BatchFilter","IsSerializedFilter","choiceFunction","StatusFilterOptions","ModelType","stockitem","tableActions","AddItemButton","hasSelectedRecords","rowActions","icon","color","onClick","Fragment","modal","InvenTreeTable","stock_item_list","part_detail","location_detail","build","enableSelection","modelType","BuildLineSubTable","lineItem","onEditAllocation","onDeleteAllocation","user","useUserState","navigate","useNavigate","stock_item_detail","RowEditAction","hidden","hasChangeRole","UserRoles","tooltip","IconCircleX","hasDeleteRole","RowViewAction","modelId","Paper","filteredAllocations","allocations","minHeight","enableSearch","enableRefresh","enableColumnSwitching","enableFilters","noRecordsText","BuildLineTable","output","buildStatus","useStatusCodes","hasOutput","isActive","status","PRODUCTION","PENDING","ON_HOLD","PartCategoryFilter","renderAvailableColumn","bom_item","bom_item_detail","available","available_stock","available_substitute_stock","allow_variants","available_variant_stock","in_production","formatDecimal","on_order","external_stock","sufficient","allocated","fontStyle","hasAllocatedItems","allocatedQuantity","RowExpansionIcon","isRowExpanded","RenderPartColumn","CategoryColumn","defaultVisible","DescriptionColumn","BooleanColumn","units","setup_quantity","attrition","rounding_multiple","requiredQuantity","scheduled_to_build","ProgressBar","is_assembly","DecimalColumn","minWidth","consumable","Math","max","consumed","IconCircleCheck","buildOrderFields","useBuildOrderFields","create","modalId","setInitialData","selectedLine","setSelectedLine","selectedRows","setSelectedRows","newBuildOrder","build_order_list","follow","autoAllocateStock","build_order_auto_allocate","location","filters","structural","exclude_location","interchangeable","substitutes","optional_items","take_from","preFormContent","Alert","allocateStock","useAllocateStockToBuildForm","outputId","lineItems","deallocateStock","build_order_deallocate","build_line","selectedAllocation","setSelectedAllocation","editAllocation","useEditApiFormModal","build_item_list","deleteAllocation","useDeleteApiFormModal","submitText","partsToOrder","setPartsToOrder","orderPartsWizard","OrderPartsWizard","parts","consumeLines","useConsumeBuildLinesForm","buildLines","trackable","canConsume","canAllocate","canDeallocate","canOrder","hasAddRole","purchase_order","purchaseable","canBuild","assembly","IconArrowRight","IconCircleDashedCheck","IconCircleMinus","IconShoppingCart","openWizard","IconTool","parent","production","canEdit","visible","ActionButton","r","active","rows","formatRecords","records","install_into","forEach","rowExpansion","allowMultiple","expandable","content","wizard","build_line_list","assembly_detail","category_detail","dataFormatter","enableDownload","enableLabels","buildline","detailAction","onCellClick"],"mappings":"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","x_google_ignoreList":[0]}