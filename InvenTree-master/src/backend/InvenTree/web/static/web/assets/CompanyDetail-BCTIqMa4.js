import{ag as C,r as n,ab as a,ao as p,b1 as i,j as s,an as P,b4 as j,by as g,bb as l,S as F}from"./index-Db7AGPIq.js";import{A as M}from"./AdminButton-BR7cWvGK.js";import{u as S,R as E,a as v,I as N,P as L,O as G,E as O,D as B}from"./InvenTreeTable-DmN557zY.js";import{I as Y,D as I,a as U}from"./InstanceDetail-CF-uHhEW.js";import{D as W}from"./DetailsBadge-rxZ_XzUd.js";import{D as $,A as H,N as K}from"./NotesPanel-BpiQDImp.js";import{P as V}from"./PageDetail-Bm50kpyR.js";import{P as q}from"./PanelGroup-Bif3iIGQ.js";import{P as J}from"./ParametersPanel-CrcKbDM0.js";import{c as Q}from"./CompanyForms-CIJgkbDe.js";import{a as z,b as D,c as R,d as X}from"./Filter-BgnAqEQC.js";import{u as Z}from"./UseInstance-BPJQEWDW.js";import{Y as ee}from"./YesNoButton-BaVgP5u9.js";import{L as se}from"./ColumnRenderers-BUH0stTX.js";import{C as ae}from"./ContactTable-e2_54XVE.js";import{M as te}from"./ManufacturerPartTable-D3cTQGW8.js";import{P as oe}from"./PurchaseOrderTable-D3f1t8t_.js";import{S as re,I as ie}from"./SupplierPartTable-DT57hHj3.js";import{S as ne,R as le}from"./SalesOrderTable-B1327nrl.js";import{S as A}from"./StockItemTable-CHHhSxX_.js";import{E as pe,a as ce,r as me,F as de,G as ue,H as be,J as _e,K as he,L as fe}from"./ThemeContext-CxdCkKtz.js";import{I as w}from"./IconPackageExport-BVVFEsrn.js";import"./ActionButton-Cv5j5I5R.js";import"./DesktopAppView-BuH2j218.js";import"./IconChevronDown-CzbIU38Y.js";import"./index-DRtKJP-e.js";import"./QRCode-BaIEIQ2d.js";import"./browser-DSycY7kT.js";import"./IconDotsVertical-D8D3XsjG.js";import"./IconTags-DnGx22aA.js";import"./formatters-B4ehJgEk.js";import"./ModelType-DSs66IM7.js";import"./GenericErrorPage-D-1fKCA7.js";import"./NotFound-CsJ_VLc_.js";import"./PermissionDenied-BDbEipg4.js";import"./use-hover-Cq0v4QX_.js";import"./index-Chjiymov.js";import"./AttachmentLink-D_UWVUZG.js";import"./PageTitle-B4iaHXKM.js";import"./PluginUIFeature-DCu8wTdG.js";import"./RemoteComponent-uZoHDwds.js";import"./ParameterTable-CGnscd1r.js";import"./ImporterForms-D2fp0CPO.js";import"./IconCircleDashedCheck-DnGBn8Eq.js";import"./CommonForms-DKQecQmS.js";import"./IconUsers-Dr_Sln9A.js";import"./IconAt-rYwKGkPn.js";import"./OrderPartsWizard-BcMgRjfh.js";import"./IconAddressBook-CdNRMeyy.js";import"./ImportPartWizard-DE8Rg4Ga.js";import"./UsePlugins-BAQCKs7Q.js";import"./ReturnOrderForms-DH3actnY.js";import"./SalesOrderForms-DoG2xqUe.js";import"./UseStockAdjustActions-BrgagWbF.js";function ke({companyId:b,params:_}){const o=C(),r=S("address"),e=n.useMemo(()=>[{accessor:"title",sortable:!0,switchable:!1},{accessor:"primary",switchable:!1,sortable:!1,render:t=>ee({value:t.primary})},{accessor:"address",title:a._({id:"Du6bPw"}),sortable:!1,switchable:!1,render:t=>{let c="";return t?.line1&&(c+=t.line1),t?.line2&&(c+=` ${t.line2}`),c.trim()}},{accessor:"postal_code",sortable:!1,switchable:!0},{accessor:"postal_city",sortable:!1,switchable:!0},{accessor:"province",sortable:!1,switchable:!0},{accessor:"country",sortable:!1,switchable:!0},{accessor:"shipping_notes",sortable:!1,switchable:!0},{accessor:"internal_shipping_notes",sortable:!1,switchable:!0},se({})],[]),m=n.useMemo(()=>({company:{},title:{},primary:{},line1:{},line2:{},postal_code:{},postal_city:{},province:{},country:{},shipping_notes:{},internal_shipping_notes:{},link:{}}),[]),d=z({url:p.address_list,title:a._({id:"W0pjLr"}),fields:m,initialData:{company:b},successMessage:a._({id:"N0ZOat"}),table:r}),[f,k]=n.useState(-1),u=D({url:p.address_list,pk:f,title:a._({id:"xLQ0lF"}),fields:m,table:r}),h=R({url:p.address_list,pk:f,title:a._({id:"xiRN5x"}),preFormWarning:a._({id:"F1bgq9"}),table:r}),y=n.useCallback(t=>{const c=o.hasChangeRole(i.purchase_order)||o.hasChangeRole(i.sales_order),T=o.hasDeleteRole(i.purchase_order)||o.hasDeleteRole(i.sales_order);return[E({hidden:!c,onClick:()=>{k(t.pk),u.open()}}),v({hidden:!T,onClick:()=>{k(t.pk),h.open()}})]},[o]),x=n.useMemo(()=>{const t=o.hasChangeRole(i.purchase_order)||o.hasChangeRole(i.sales_order);return[s.jsx(X,{tooltip:a._({id:"W0pjLr"}),onClick:()=>d.open(),hidden:!t},"add-address")]},[o]);return s.jsxs(s.Fragment,{children:[d.modal,u.modal,h.modal,s.jsx(N,{url:P(p.address_list),tableState:r,columns:e,props:{enableDownload:!0,rowActions:y,tableActions:x,params:{..._,company:b}}})]})}function ys(b){const{id:_}=pe(),o=ce(),r=C(),{instance:e,refreshInstance:m,instanceQuery:d}=Z({endpoint:p.company_list,pk:_,params:{},refetchOnMount:!0}),f=n.useMemo(()=>{if(d.isFetching)return s.jsx(j,{});const t=[{type:"text",name:"description",label:a._({id:"Nu4oKW"}),copy:!0},{type:"link",name:"website",label:a._({id:"On0aF2"}),external:!0,copy:!0,hidden:!e.website},{type:"text",name:"phone",label:a._({id:"HF6C2L"}),copy:!0,hidden:!e.phone},{type:"text",name:"email",label:a._({id:"hzKQCy"}),copy:!0,hidden:!e.email},{type:"text",name:"tax_id",label:a._({id:"m+elvG"}),copy:!0,hidden:!e.tax_id}],c=[{type:"string",name:"currency",label:a._({id:"xjO9oI"})},{type:"boolean",name:"is_supplier",label:a._({id:"PYTEl0"}),icon:"suppliers"},{type:"boolean",name:"is_manufacturer",label:a._({id:"+m9/3S"}),icon:"manufacturers"},{type:"boolean",name:"is_customer",label:a._({id:"876pfE"}),icon:"customers"}];return s.jsxs(Y,{children:[s.jsxs(g,{grow:!0,children:[s.jsx($,{appRole:i.purchase_order,apiPath:P(p.company_list,e.pk),src:e.image,pk:e.pk,refresh:m,imageActions:{uploadFile:!0,downloadImage:!0,deleteFile:!0}}),s.jsx(g.Col,{span:{base:12,sm:8},children:s.jsx(I,{item:e,fields:t})})]}),s.jsx(I,{item:e,fields:c})]})},[e,d]),k=n.useMemo(()=>[{name:"details",label:a._({id:"eDkDvt"}),icon:s.jsx(me,{}),content:f},{name:"supplied-parts",label:a._({id:"i4b9ex"}),icon:s.jsx(w,{}),hidden:!e?.is_supplier,content:e?.pk&&s.jsx(re,{supplierId:e.pk})},{name:"manufactured-parts",label:a._({id:"glJbgw"}),icon:s.jsx(ie,{}),hidden:!e?.is_manufacturer,content:e?.pk&&s.jsx(te,{manufacturerId:e.pk})},{name:"purchase-orders",label:a._({id:"85Yvr2"}),icon:s.jsx(de,{}),hidden:!e?.is_supplier,content:e?.pk&&s.jsx(oe,{supplierId:e.pk})},{name:"stock-items",label:a._({id:"Jbck4N"}),icon:s.jsx(ue,{}),hidden:!e?.is_manufacturer&&!e?.is_supplier,content:e?.pk&&s.jsx(A,{allowAdd:!1,tableName:"company-stock",params:{company:e.pk}})},{name:"sales-orders",label:a._({id:"B1TL+X"}),icon:s.jsx(be,{}),hidden:!e?.is_customer,content:e?.pk&&s.jsx(ne,{customerId:e.pk})},{name:"return-orders",label:a._({id:"LlTg8M"}),icon:s.jsx(_e,{}),hidden:!e?.is_customer,content:e.pk?s.jsx(le,{customerId:e.pk}):s.jsx(j,{})},{name:"assigned-stock",label:a._({id:"TVGEcl"}),icon:s.jsx(w,{}),hidden:!e?.is_customer,content:e?.pk?s.jsx(A,{allowAdd:!1,tableName:"assigned-stock",showLocation:!1,allowReturn:!0,params:{customer:e.pk}}):s.jsx(j,{})},{name:"contacts",label:a._({id:"gVfVfe"}),icon:s.jsx(he,{}),content:e?.pk&&s.jsx(ae,{companyId:e.pk})},{name:"addresses",label:a._({id:"bYmAV1"}),icon:s.jsx(fe,{}),content:e?.pk&&s.jsx(ke,{companyId:e.pk})},J({model_type:l.company,model_id:e?.pk}),H({model_type:l.company,model_id:e.pk}),K({model_type:l.company,model_id:e.pk})],[_,e,r]),u=D({url:p.company_list,pk:e?.pk,title:a._({id:"HoG6cl"}),fields:Q(),onFormSuccess:m}),h=R({url:p.company_list,pk:e?.pk,title:a._({id:"riHm27"}),onFormSuccess:()=>{o("/")}}),y=n.useMemo(()=>[s.jsx(M,{model:l.company,id:e.pk}),s.jsx(L,{modelType:l.company,items:[e.pk],enableReports:!0}),s.jsx(G,{tooltip:a._({id:"z+ZEYC"}),actions:[O({hidden:!r.hasChangeRole(i.purchase_order),onClick:()=>u.open()}),B({hidden:!r.hasDeleteRole(i.purchase_order),onClick:()=>h.open()})]})],[_,e,r]),x=n.useMemo(()=>[s.jsx(W,{label:a._({id:"NoNwIX"}),color:"red",visible:e.active==!1})],[e]);return s.jsxs(s.Fragment,{children:[u.modal,h.modal,s.jsx(U,{query:d,requiredPermission:l.company,children:s.jsxs(F,{gap:"xs",children:[s.jsx(V,{title:`${a._({id:"7i8j3G"})}: ${e.name}`,subtitle:e.description,actions:y,imageUrl:e.image,breadcrumbs:b.breadcrumbs,lastCrumb:[{name:e.name,url:`${b.last_crumb_url}/${e.pk}/`}],badges:x,editAction:u.open,editEnabled:r.hasChangePermission(l.company)}),s.jsx(q,{pageKey:"company",panels:k,instance:e,reloadInstance:m,model:l.company,id:e.pk})]})})]})}export{ys as default};
//# sourceMappingURL=CompanyDetail-BCTIqMa4.js.map
